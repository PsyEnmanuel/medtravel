import{az as P,bt as O,aj as D,ah as I,aq as N,l as k,n as L,w as m,o as E,$ as S,t as d,G as U,y as a,z as t,aF as y,x as i,A as g,b2 as f,b3 as b,Q as q,al as B,H as w,bu as r,bv as M,aa as u,v as _,bw as c,bx as p,a9 as Q,E as Y,j}from"./index.73cc0385.js";const A={key:0,class:"grid lg:grid-cols-2 gap-1"},K={class:"lg:col-span-2 gap-1"},R={class:"flex mb-1"},T={class:"flex lg:flex-nowrap gap-1 justify-between"},z={class:"grid grid-cols-2 gap-2"},F={class:"grid lg:grid-cols-3 my-1"},G={class:"grid lg:grid-cols-2 gap-1 mb-1"},H={class:"grid grid-cols-3 gap-1"},W={class:"border border-[#a9a7b1] border-l-4 border-l-primary flex justify-between px-2 rounded"},J=a("span",null,"Cantidad",-1),X={class:"border border-[#a9a7b1] border-l-4 border-l-primary flex justify-between px-2 rounded"},Z=a("span",null,"Maternidad",-1),ee={class:"lg:max-w-full max-w-[350px]"},te={class:"grid lg:grid-cols-1 gap-1"},se={class:"flex flex-col w-full gap-1"},ae={class:"grid lg:grid-cols-1 gap-1"},le={class:"flex flex-col w-full gap-1"},ie={class:"grid lg:grid-cols-1 gap-1"},ne={class:"flex flex-col w-full gap-1"},oe={class:"grid lg:grid-cols-1 gap-1"},de={class:"flex flex-col w-full gap-1"},re={class:"grid grid-cols-1 gap-1"},ue={class:"flex flex-col w-full gap-1"},_e={class:"grid grid-cols-1 gap-1"},ce={class:"flex flex-col w-full gap-1"},ve={__name:"chart-event",setup(pe){const{t:x}=P(),v={timePeriods:O.map(n=>({label:x(n),value:n})),event_state:[{label:"Todos",value:2},{label:"Finalizadas",value:1},{label:"Pendientes",value:0}]},h=D(new Date),C=I(h,"MMMM",{locale:j}),$=N(new Date),V=k("$api"),e=L({tab:"provider",$event_state_id:0,timePeriod:"all",initialPagination:{sortBy:"quantity",descending:!0,page:1,rowsPerPage:10},timeout:null,dialogEventWrite:!1,selectedEventId:0,loading:!0,first:!0,update:1,day:$,stats:{},diagnosis:[],dailyList:[],eventStateList:[],userList:[],treatment:[],month:C,start:"all",query:{group_by:"t_event.id",where:{"ne:$event_state_id":"40",user_id:null,$event_type_id:[],request_date:{from:null,to:null},c_status:[4]}}});m(()=>e.timePeriod,n=>{E(n,e.query,"request_date"),o()}),m(()=>e.query.where.user_id,n=>{o()}),m(()=>e.$event_state_id,n=>{n===2?(e.query.where["ne:$event_state_id"]=null,e.query.where.$event_state_id=null):n===1?(e.query.where.$event_state_id=40,e.query.where["ne:$event_state_id"]=null):(e.query.where.$event_state_id=null,e.query.where["ne:$event_state_id"]=40),o()});async function o(){e.stats=await V.get("event/stats",{params:e.query}),++e.update,e.loading=!1}return S(()=>{o()}),(n,s)=>e.loading?Y("",!0):(d(),U("div",A,[a("div",K,[a("div",R,[t(y,{class:"flex",size:"sm",modelValue:e.timePeriod,"onUpdate:modelValue":s[0]||(s[0]=l=>e.timePeriod=l),"toggle-color":"secondary","toggle-text-color":"text-font",options:v.timePeriods,type:"radio"},null,8,["modelValue","options"])]),a("div",T,[a("div",z,[t(q,{class:"min-w-[150px]",dense:"",outlined:"",modelValue:e.query.where.request_date.from,"onUpdate:modelValue":s[3]||(s[3]=l=>e.query.where.request_date.from=l),mask:"##-##-####"},{append:i(()=>[t(g,{name:"event",class:"cursor-pointer"},{default:i(()=>[t(f,{ref:"proxy"},{default:i(()=>[t(b,{flat:"",modelValue:e.query.where.request_date.from,"onUpdate:modelValue":[s[1]||(s[1]=l=>e.query.where.request_date.from=l),s[2]||(s[2]=l=>{n.$refs.proxy.hide(),o()})],"no-unset":"","years-in-month-view":"",minimal:"",mask:"DD-MM-YYYY"},null,8,["modelValue"])]),_:1},512)]),_:1})]),_:1},8,["modelValue"]),t(q,{class:"min-w-[150px]",dense:"",outlined:"",modelValue:e.query.where.request_date.to,"onUpdate:modelValue":s[6]||(s[6]=l=>e.query.where.request_date.to=l),mask:"##-##-####"},{append:i(()=>[t(g,{name:"event",class:"cursor-pointer"},{default:i(()=>[t(f,{ref:"proxy"},{default:i(()=>[t(b,{flat:"",modelValue:e.query.where.request_date.to,"onUpdate:modelValue":[s[4]||(s[4]=l=>e.query.where.request_date.to=l),s[5]||(s[5]=l=>{n.$refs.proxy.hide(),o()})],"no-unset":"","years-in-month-view":"",minimal:"",mask:"DD-MM-YYYY"},null,8,["modelValue"])]),_:1},512)]),_:1})]),_:1},8,["modelValue"])]),t(y,{class:"flex",modelValue:e.$event_state_id,"onUpdate:modelValue":s[7]||(s[7]=l=>e.$event_state_id=l),options:v.event_state},null,8,["modelValue","options"])]),a("div",F,[t(B,{onSetUser:s[8]||(s[8]=l=>e.query.where.user_id=l),onClearUser:s[9]||(s[9]=l=>e.query.where.user_id=null),"model-value":e.user_description,label:"Coordinador",unixroles:24,"onUpdate:modelValue":s[10]||(s[10]=l=>o())},null,8,["model-value"])]),a("div",G,[a("div",H,[a("div",W,[J,a("span",null,w(e.stats.c.quantity),1)]),a("div",X,[Z,a("span",null,w(e.stats.c.pregnant),1)])])]),a("div",ee,[t(M,{modelValue:e.tab,"onUpdate:modelValue":s[11]||(s[11]=l=>e.tab=l),dense:"",class:"text-grey mb-1 w-full","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":"","outside-arrows":""},{default:i(()=>[t(r,{name:"provider",label:"Proveedores"}),t(r,{name:"diagnosis",label:"Diagn\xF3sticos"}),t(r,{name:"country",label:"Pa\xEDs"}),t(r,{name:"city",label:"Ciudades"}),t(r,{name:"state",label:"Estado"}),t(r,{name:"user",label:"Coordinador"})]),_:1},8,["modelValue"])]),t(Q,{class:"p-0",modelValue:e.tab,"onUpdate:modelValue":s[12]||(s[12]=l=>e.tab=l),animated:""},{default:i(()=>[t(u,{class:"p-0",name:"provider"},{default:i(()=>[a("div",te,[a("div",se,[(d(),_(c,{key:e.update,data:e.stats.c.providerList,name:"label",value:"value",title:"Coordinaciones por Proveedores",subtitle:"Coordinaciones"},null,8,["data"])),t(p,{list:e.stats.c.providerList,title:"COORDINACIONES",stats:e.stats.c,type:"provider_description",columnKey:"provider_description",hideBtn:"",event_state_id:e.$event_state_id,quantity:e.stats.c.quantity},null,8,["list","stats","event_state_id","quantity"])])])]),_:1}),t(u,{class:"p-0",name:"diagnosis"},{default:i(()=>[a("div",ae,[a("div",le,[(d(),_(c,{key:e.update,data:e.stats.c.diagnosisList,name:"label",value:"value",title:"Coordinaciones por Diagn\xF3stico",subtitle:"Coordinaciones"},null,8,["data"])),t(p,{list:e.stats.c.diagnosisList,title:"COORDINACIONES",name:"Diagn\xF3stico",stats:e.stats.c,type:"diagnosis",columnKey:"diagnosis",hideBtn:"",event_state_id:e.$event_state_id,quantity:e.stats.c.quantity},null,8,["list","stats","event_state_id","quantity"])])])]),_:1}),t(u,{class:"p-0",name:"state"},{default:i(()=>[a("div",ie,[a("div",ne,[(d(),_(c,{key:e.update,data:e.stats.c.eventStateList,name:"label",value:"value",title:"Coordinaciones por Estado",subtitle:"Coordinaciones"},null,8,["data"])),t(p,{list:e.stats.c.eventStateList,title:"COORDINACIONES",name:"Proveedores",stats:e.stats.c,type:"event_state",columnKey:"event_state",hideBtn:"",event_state_id:e.$event_state_id,quantity:e.stats.c.quantity},null,8,["list","stats","event_state_id","quantity"])])])]),_:1}),t(u,{class:"p-0",name:"user"},{default:i(()=>[a("div",oe,[a("div",de,[(d(),_(c,{key:e.update,data:e.stats.c.users,name:"label",value:"value",title:"Coordinaciones por Usuario",subtitle:"Coordinaciones"},null,8,["data"])),t(p,{list:e.stats.c.users,title:"COORDINACIONES",stats:e.stats.c,type:"user_description",columnKey:"user_description",name:"Proveedores",hideBtn:"",event_state_id:e.$event_state_id,quantity:e.stats.c.quantity},null,8,["list","stats","event_state_id","quantity"])])])]),_:1}),t(u,{class:"p-0",name:"country"},{default:i(()=>[a("div",re,[a("div",ue,[(d(),_(c,{key:e.update,data:e.stats.c.countryList,name:"label",value:"value",title:"Coordinaciones por Pa\xEDs",subtitle:"Coordinaciones"},null,8,["data"])),t(p,{list:e.stats.c.countryList,title:"COORDINACIONES",name:"Paises",stats:e.stats.c,type:"country",columnKey:"country",hideBtn:"",event_state_id:e.$event_state_id,quantity:e.stats.c.quantity},null,8,["list","stats","event_state_id","quantity"])])])]),_:1}),t(u,{class:"p-0",name:"city"},{default:i(()=>[a("div",_e,[a("div",ce,[(d(),_(c,{key:e.update,data:e.stats.c.cityList,name:"label",value:"value",title:"Coordinaciones por Ciudad",subtitle:"Coordinaciones"},null,8,["data"])),t(p,{list:e.stats.c.cityList,title:"COORDINACIONES",name:"Ciudades",stats:e.stats.c,type:"city",columnKey:"city",hideBtn:"",event_state_id:e.$event_state_id,quantity:e.stats.c.quantity},null,8,["list","stats","event_state_id","quantity"])])])]),_:1})]),_:1},8,["modelValue"])])]))}};export{ve as default};
