import{l as w,m as O,r as A,n as h,w as G,a3 as W,aE as j,$ as L,t as i,G as p,y as a,H as M,v as y,F as r,E as P,z as o,x as b,Q as m,B as T,aS as H,aT as f,ar as d,A as E,an as J,aU as X,aV as Y,K as S,R as Z,aW as ee,D as te}from"./index.1c9c82ce.js";const le={class:"flex justify-between items-start gap-2 py-2"},oe={key:0},se=a("p",{class:"text-2xl text-info"},"Editar CORREDOR",-1),ie={class:"font-bold text-brand"},ae=a("p",{class:"text-xs"},"Los campos requeridos tienen un (*)",-1),ne={key:1},re=a("p",{class:"text-2xl text-info"},[te("Agregar "),a("b",{class:"font-bold text-brand"},"CORREDOR")],-1),de=a("p",null,"Los campos requeridos tienen un (*)",-1),ue=[re,de],me=a("div",{class:"subtitle mb-2 bg-primary p-0.5 rounded-none"},null,-1),ce={class:"grid lg:grid-cols-2 gap-1"},pe={class:"flex flex-col gap-1"},ye={key:1,class:"mt-10"},fe={__name:"BrokerWrite",props:{id:Number,isEdit:Boolean,width:String,isDrawer:Boolean},emits:["close"],setup(c,{emit:B}){const u=w("$api"),D=w("$cats"),g=w("$local"),v=O(),k=A(),n=c,x=B,I=h({broker_type:D.value.broker_type,binary:[{label:"Si",value:1},{label:"No",value:0}]}),V=()=>({}),e=h({item:V(),local:"WriteBroker",categories:[],plan:null,plan_type:null});G(()=>e.item,l=>{n.isEdit||g.set(e.local,l)},{deep:!0});function _(){e.item=V(),g.remove(e.local),k.value.resetValidation()}async function R(l){try{const t=await u.get(`utility/countries/${l}`);e.item.country_id=t.id,e.item.country=t.description}catch(t){console.log(t)}}function z(){try{e.item.state_id=null,e.item.state=null,e.item.country_id=null,e.item.country=null,e.item.city_id=null,e.item.city=null}catch(l){console.log(l)}}async function K(l){try{const t=await u.get(`utility/cities/${l}`);e.item.city_id=t.id,e.item.city=t.description}catch(t){console.log(t)}}function U(){try{e.item.city_id=null,e.item.city=null}catch(l){console.log(l)}}async function N(l){try{const t=await u.get(`utility/states/${l}`);e.item.state_id=t.id,e.item.state=t.description}catch(t){console.log(t)}}function Q(){try{e.item.state_id=null,e.item.state=null,e.item.city_id=null,e.item.city=null}catch(l){console.log(l)}}async function F(){if(n.isEdit)await u.put(`broker/${n.id}`,{...e.item})&&v.notify({type:"success",message:"Proveedor Editada"});else{const l=await u.post("broker",{...e.item});l&&(console.log(9),x("close",l.id),v.notify({type:"success",message:"Proveedor Agregado"}),_())}}async function q(){n.isEdit?e.item=await u.get(`broker/${n.id}`):g.get(e.local)}const $=W(()=>({width:n.width,padding:n.isDrawer&&"6px 8px"}));return j(I),L(()=>{q()}),(l,t)=>{var C;return i(),p("div",{style:S($.value),class:"pb-32"},[a("div",le,[c.isEdit?(i(),p("div",oe,[se,a("b",ie,M(e.item.description),1),ae])):(i(),p("div",ne,ue)),c.isDrawer?(i(),y(r,{key:2,flat:"",class:"button",label:"cerrar",onClick:t[0]||(t[0]=s=>x("close"))})):P("",!0)]),me,o(ee,{class:Z((C=c.isDrawer)!=null?C:"pb-64"),ref_key:"writeForm",ref:k,onSubmit:F,onReset:_},{default:b(()=>[a("div",ce,[a("div",pe,[o(m,{dense:"",outlined:"",modelValue:e.item.description,"onUpdate:modelValue":t[1]||(t[1]=s=>e.item.description=s),label:l.$t("name")+"*",rules:[T(H)],"hide-bottom-space":"",onKeydown:t[2]||(t[2]=f(d(()=>{},["prevent"]),["enter"]))},null,8,["modelValue","label","rules"]),o(m,{dense:"",outlined:"",modelValue:e.item.phone,"onUpdate:modelValue":t[3]||(t[3]=s=>e.item.phone=s),label:l.$t("phone"),onKeydown:t[4]||(t[4]=f(d(()=>{},["prevent"]),["enter"]))},null,8,["modelValue","label"]),o(m,{dense:"",outlined:"",modelValue:e.item.webpage,"onUpdate:modelValue":t[6]||(t[6]=s=>e.item.webpage=s),label:l.$t("webpage"),onKeydown:t[7]||(t[7]=f(d(()=>{},["prevent"]),["enter"]))},{after:b(()=>[o(r,{flat:"",class:"button rounded-md h-[40px] p-2","no-caps":"",rel:"noopener",onClick:t[5]||(t[5]=d(()=>{},["stop"])),href:e.item.webpage,target:"_blank"},{default:b(()=>[o(E,{name:"fa-solid fa-link",size:"xs"})]),_:1},8,["href"])]),_:1},8,["modelValue","label"]),o(m,{dense:"",outlined:"",modelValue:e.item.link_gps,"onUpdate:modelValue":t[9]||(t[9]=s=>e.item.link_gps=s),label:l.$t("link_gps"),onKeydown:t[10]||(t[10]=f(d(()=>{},["prevent"]),["enter"]))},{after:b(()=>[o(r,{flat:"",class:"button rounded-md h-[40px] p-2","no-caps":"",rel:"noopener",onClick:t[8]||(t[8]=d(()=>{},["stop"])),href:e.item.link_gps,target:"_blank"},{default:b(()=>[o(E,{name:"fa-solid fa-link",size:"xs"})]),_:1},8,["href"])]),_:1},8,["modelValue","label"]),o(J,{onSetCountry:R,onClearCountry:z,"model-value":e.item.country},null,8,["model-value"]),o(X,{refId:e.item.country_id,onSetState:N,onClearState:Q,"model-value":e.item.state},null,8,["refId","model-value"]),o(Y,{refId:e.item.state_id,onSetCity:K,onClearCity:U,"model-value":e.item.city},null,8,["refId","model-value"]),o(m,{dense:"",outlined:"",modelValue:e.item.zipcode,"onUpdate:modelValue":t[11]||(t[11]=s=>e.item.zipcode=s),label:l.$t("zipcode"),onKeydown:t[12]||(t[12]=f(d(()=>{},["prevent"]),["enter"]))},null,8,["modelValue","label"]),o(m,{dense:"",outlined:"",modelValue:e.item.address,"onUpdate:modelValue":t[13]||(t[13]=s=>e.item.address=s),label:l.$t("address"),type:"textarea",rows:3},null,8,["modelValue","label"])])]),c.isDrawer?(i(),p("div",{key:0,class:"fixed bottom-0 lg:right-[10px] right-0 py-2 bg-white mt-10",style:S($.value)},[n.isEdit?(i(),y(r,{key:0,class:"button-press w-full text-lg rounded-md bg-primary text-white",flat:"",label:"Guardar cambios",type:"submit"})):(i(),y(r,{key:1,class:"button-press w-full text-lg rounded-md bg-primary text-white",flat:"",label:"agregar",type:"submit"}))],4)):(i(),p("div",ye,[n.isEdit?(i(),y(r,{key:0,class:"button-press w-full text-lg rounded-md bg-primary text-white",flat:"",label:"Guardar cambios",type:"submit"})):(i(),y(r,{key:1,class:"button-press w-full text-lg rounded-md bg-primary text-white",flat:"",label:"agregar",type:"submit"}))]))]),_:1},8,["class"])],4)}}};export{fe as _};
