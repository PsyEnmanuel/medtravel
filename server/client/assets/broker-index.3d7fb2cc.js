import{t as g,G as _,y as o,z as a,C as Q,H as u,F as d,az as B,r as R,n as U,q as z,k as P,w as W,v as $,x as s,Q as E,A as x,B as f,E as y,D as v,I as N,J as T,aC as c,K as j,L as b,M as w,aH as L,R as H,S as M}from"./index.73cc0385.js";import{_ as h}from"./BrokerWrite.b12f5987.js";const A={bordered:"",flat:"",class:"card pb-2 relative flex flex-nowrap"},F={class:"absolute right-3 top-2"},G={class:"pl-3 pr-8 w-full pt-2 flex flex-col overflow-hidden"},J={class:"text-uppercase line-clamp-1 font-semibold"},K={class:"text-uppercase line-clamp-1 text-xxs"},O={class:"text-uppercase line-clamp-1 text-xxs"},X={class:"text-uppercase line-clamp-1 text-xxs"},Y={class:"flex justify-end gap-2 -mr-5 mt-1"},Z={__name:"BrokerCard",props:{item:Object},setup(p){return(r,n)=>(g(),_("div",null,[o("div",A,[o("div",F,[a(Q,{dense:"",modelValue:p.item.selected,"onUpdate:modelValue":n[0]||(n[0]=l=>p.item.selected=l)},null,8,["modelValue"])]),o("div",G,[o("span",J,u(p.item.row.description),1),o("span",K,u(p.item.row.country),1),o("span",O,u(p.item.row.address),1),o("span",X,u(p.item.row.webpage),1),o("div",Y,[a(d,{flat:"",class:"button bg-default text-primary rounded-md",label:"Editar","no-caps":"",onClick:n[1]||(n[1]=l=>r.$emit("selectedId",p.item.row.id))}),a(d,{flat:"",class:"button bg-default text-primary rounded-md",label:"consultar","no-caps":"",onClick:n[2]||(n[2]=l=>r.$router.push(`${r.$path.broker}/${r.$path.broker_consult}/${p.item.row.id}`))})])])])]))}},ee={class:"flex justify-between md:flex-nowrap mb-2"},le={class:"flex flex-nowrap w-full gap-2"},te={key:0,class:"grid grid-flow-col auto-cols-max gap-2"},ae={class:"full-width row flex-center text-primary q-gutter-sm"},se={class:"flex flex-col"},oe={class:"flex flex-col"},ie=["href"],ne={class:"flex flex-col"},re=["href"],de={class:"flex gap-2"},fe={__name:"broker-index",setup(p){const{t:r}=B(),n=R(),l=U({dialogImport:!1,dialogWrite:!1,dialogList:!1,dialogCreate:!1,selectedId:0,dialogWidth:400,selected:[],search:"",search_key:"orlike:description",pagination:{sortBy:"description",descending:!1,page:1,rowsPerPage:20},url:"broker",query:{groupBy:["t_broker.id"],where:{c_status:4}},columns:[{name:"action",required:!0,label:"",align:"left",field:r("id"),classes:"w-[230px]"},{name:"description",required:!0,label:r("name"),align:"left",field:"description",classes:"w-[250px]",sortable:!0},{name:"country",required:!0,label:r("country"),align:"left",field:"country",sortable:!0},{name:"city",required:!0,label:r("city"),align:"left",field:"city",sortable:!0},{name:"phone",required:!0,label:r("phone"),align:"left",field:"phone",sortable:!0},{name:"address",required:!0,label:r("address"),align:"left",field:"address",sortable:!0},{name:"webpage",required:!0,label:r("webpage"),align:"left",field:"webpage",classes:"max-w-[200px]",sortable:!0},{name:"link_gps",required:!0,label:r("link_gps"),align:"left",field:"link_gps",classes:"max-w-[200px]",sortable:!0}],rows:[]}),{onRequest:C,getSelectedString:V,onDeleteRows:q,addMore:D,itemsRange:k}=z(l,n),I=P();return W(()=>I.table.t_broker,i=>{n.value.requestServerInteraction(),n.value.clearSelection()},{deep:!0}),(i,t)=>(g(),$(M,{class:H(i.insuredId?"px-2 py-3":"px-1.5 py-2 lg:px-5 lg:py-6")},{default:s(()=>[o("div",ee,[o("div",le,[a(E,{class:"w-full md:w-auto",dense:"",outlined:"",debounce:"300",modelValue:l.search,"onUpdate:modelValue":t[0]||(t[0]=e=>l.search=e),placeholder:i.$t("search")},{append:s(()=>[a(x,{name:"search"})]),_:1},8,["modelValue","placeholder"]),a(d,{flat:"",class:"button h-full",icon:"add",label:i.$isDesktop&&i.$t("add"),onClick:t[1]||(t[1]=e=>l.dialogCreate=!0)},null,8,["label"]),l.selected.length?(g(),$(d,{key:0,flat:"",class:"button h-full bg-primary text-white","icon-right":"sym_o_remove",label:i.$isDesktop?"Remover":"","no-caps":"",onClick:f(q)},null,8,["label","onClick"])):y("",!0)]),i.$isDesktop?(g(),_("div",te,[a(d,{class:"bg-transparent",flat:"","no-caps":""},{default:s(()=>[v(u(f(k).start)+" - "+u(f(k).end)+" de "+u(l.pagination.rowsNumber),1)]),_:1}),a(d,{class:"bg-transparent",icon:"sym_o_first_page",flat:"",onClick:t[2]||(t[2]=e=>n.value.firstPage())}),a(d,{class:"bg-transparent",icon:"sym_o_navigate_before",flat:"",onClick:t[3]||(t[3]=e=>n.value.prevPage())}),a(d,{class:"bg-transparent",icon:"sym_o_navigate_next",flat:"",onClick:t[4]||(t[4]=e=>n.value.nextPage())}),a(d,{class:"bg-transparent",icon:"sym_o_last_page",flat:"",onClick:t[5]||(t[5]=e=>n.value.lastPage())})])):y("",!0)]),a(N,{grid:!i.$isDesktop,"hide-pagination":"",rows:l.rows,columns:l.columns,"row-key":"id",ref_key:"tableRef",ref:n,onRequest:f(C),flat:"",selection:"multiple",pagination:l.pagination,"onUpdate:pagination":t[7]||(t[7]=e=>l.pagination=e),selected:l.selected,"onUpdate:selected":t[8]||(t[8]=e=>l.selected=e),"selected-rows-label":f(V),loading:l.loading,"rows-per-page-label":"Lineas","wrap-cells":!0},T({"no-data":s(({icon:e,message:m,filter:S})=>[o("div",ae,[o("span",null,u(m),1),a(x,{size:"2em",name:S?"filter_b_and_w":e},null,8,["name"])])]),"body-cell-description":s(e=>[a(c,{props:e},{default:s(()=>[o("div",se,[o("div",null,u(e.row.description),1)])]),_:2},1032,["props"])]),"body-cell-webpage":s(e=>[a(c,{props:e},{default:s(()=>[o("div",oe,[o("a",{class:"text-primary line-clamp-1",href:e.row.webpage,target:"_blank"},u(e.row.webpage),9,ie)])]),_:2},1032,["props"])]),"body-cell-link_gps":s(e=>[a(c,{props:e},{default:s(()=>[o("div",ne,[o("a",{class:"text-primary line-clamp-1",href:e.row.link_gps,target:"_blank"},u(e.row.link_gps),9,re)])]),_:2},1032,["props"])]),"body-cell-action":s(e=>[a(c,{props:e},{default:s(()=>[o("div",de,[a(d,{flat:"",class:"button bg-default text-primary rounded-md",label:"Editar","no-caps":"",onClick:m=>{l.selectedId=e.row.id,l.dialogWrite=!0}},null,8,["onClick"]),a(d,{flat:"",class:"button bg-default text-primary rounded-md",label:"consultar","no-caps":"",onClick:m=>i.$router.push(`${i.$path.broker}/${i.$path.broker_consult}/${e.row.id}`)},null,8,["onClick"])])]),_:2},1032,["props"])]),item:s(e=>[o("div",{class:"q-py-xs col-xs-12 col-sm-6 col-md-4",style:j(e.selected?"transform: scale(0.95);":"")},[a(Z,{item:e,onSelectedId:t[6]||(t[6]=m=>{l.selectedId=m,l.dialogWrite=!0})},null,8,["item"])],4)]),_:2},[i.$isDesktop?void 0:{name:"bottom",fn:s(()=>[a(d,{flat:"",class:"button bg-primary-light w-full","no-caps":"",onClick:f(D)},{default:s(()=>[v("Cargar m\xE1s")]),_:1},8,["onClick"])]),key:"0"}]),1032,["grid","rows","columns","onRequest","pagination","selected","selected-rows-label","loading"]),a(b,{class:"q-pa-none",modelValue:l.dialogWrite,"onUpdate:modelValue":t[10]||(t[10]=e=>l.dialogWrite=e),position:i.$isDesktop?"right":"standard","full-height":"","full-width":i.$isDesktop,maximized:"","transition-duration":100},{default:s(()=>[a(w,null,{default:s(()=>[a(h,{onClose:t[9]||(t[9]=e=>l.dialogWrite=!1),isDrawer:"",id:l.selectedId,isEdit:"",width:i.$isDesktop?"1000px":"100%"},null,8,["id","width"])]),_:1})]),_:1},8,["modelValue","position","full-width"]),a(b,{modelValue:l.dialogCreate,"onUpdate:modelValue":t[12]||(t[12]=e=>l.dialogCreate=e),position:i.$isDesktop?"right":"standard","full-height":"",maximized:"","transition-duration":100},{default:s(()=>[a(w,null,{default:s(()=>[a(h,{onClose:t[11]||(t[11]=e=>l.dialogCreate=!1),isDrawer:"",width:i.$isDesktop?"1000px":"100%"},null,8,["width"])]),_:1})]),_:1},8,["modelValue","position"]),a(b,{modelValue:l.dialogImport,"onUpdate:modelValue":t[14]||(t[14]=e=>l.dialogImport=e),"full-height":"","full-width":"","transition-duration":100},{default:s(()=>[a(w,null,{default:s(()=>[a(L,{table:"t_broker",onClose:t[13]||(t[13]=e=>l.dialogImport=!1)})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["class"]))}};export{fe as default};
