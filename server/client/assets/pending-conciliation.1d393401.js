import{l as q,az as N,r as E,n as M,q as R,k as W,w as V,t as u,v as g,x as s,y as o,z as a,Q as A,A as x,B as c,C as D,D as v,E as b,G as _,F as d,H as n,al as L,ao as T,I as j,J as F,aC as p,T as G,U as I,aD as H,aU as J,W as z,K as C,ah as K,V as O,bi as X,L as y,M as w,ac as k,ax as Y,S as Z}from"./index.29778d79.js";const ee={class:"flex justify-between md:flex-nowrap mb-2"},te={class:"flex flex-nowrap w-full gap-2"},le={key:0,class:"grid grid-flow-col auto-cols-max gap-2"},ae={class:"grid lg:grid-cols-4 gap-1 mb-1"},se={class:"full-width row flex-center text-primary q-gutter-sm"},oe=["src"],ie={class:"grid grid-cols-2 gap-1"},ne={class:"flex flex-col text-xs"},re={class:"flex flex-col text-xs gap-1"},de={class:"flex flex-nowrap items-center gap-2"},ue={key:0},pe={class:"flex flex-col text-xs"},fe={key:0,class:"flex flex-col text-xs"},me={class:"flex flex-nowrap border-b border-default"},ce={class:"flex flex-col text-xs"},_e={class:"flex flex-col text-xs"},ge={class:"flex items-end text-xxs leading-none"},we={__name:"pending-conciliation",props:{insuredId:Number,doctorId:Number,providerId:Number},setup(S){q("$cats");const P=q("$me"),{t:m}=N(),f=E(),l=M({itinerary:[],eventSelected:null,itineraryDialog:!1,dialogCopy:!1,dialogWrite:!1,dialogList:!1,dialogCreate:!1,selectedId:0,dialogWidth:400,selected:[],search:"",search_key:"orlike:t_event.code,user_description,insured,t_event.provider_description,contact_description,t_event.created_by,MRN",pagination:{sortBy:"t_event.event_state",descending:!1,page:1,rowsPerPage:20},url:"event/alert-list",table:"t_event",query:{join:[{table:"t_itinerary",relationA:"t_itinerary.event_id",relationB:"t_event.id"}],groupBy:["t_event.id"],where:{"isnull:book_code":1,"t_event.c_status":4,"t_itinerary.c_status":4,["in:$event_state_id"]:[40]}},visibleColumns:[],columns:[{name:"action",required:!0,label:"",align:"left",field:m("id"),classes:"min-w-[200px]"},{name:"user_description",required:!0,label:"Asignado a",align:"left",field:"user_description",sortable:!0},{name:"insured",required:!0,label:m("insured"),align:"left",field:"insured",sortable:!0},{name:"provider_description",required:!0,label:"Proveedor/Contacto",align:"left",field:"provider_description",sortable:!0},{name:"doctor_description",required:!0,label:"M\xE9dico",align:"left",field:"doctor_description",sortable:!0},{name:"event_state",required:!0,label:m("event_state"),align:"left",field:"event_state",sortable:!0},{name:"request_date",required:!0,label:m("request_date"),align:"left",field:"request_date_format",sortable:!0},{name:"last_attendance_datetime",required:!0,label:m("last_attendance_datetime"),align:"left",field:"last_attendance_datetime_format",sortable:!0},{name:"pending_list",label:m("pending_list"),align:"left",field:"pending_list",sortable:!0,hidden:!0}],rows:[]}),{onRequest:Q,getSelectedString:ve,onDeleteRows:be,addMore:U,itemsRange:$}=R(l,f),B=W();return V(()=>B.table.t_event,i=>{f.value.requestServerInteraction(),f.value.clearSelection()},{deep:!0}),V(()=>l.query.where["t_event.c_status"],i=>{console.log(i),i===2?l.visibleColumns=l.columns.filter(t=>t.name==="reason_cancellation"&&!t.required).map(t=>t.name):l.visibleColumns=[]}),(i,t)=>(u(),g(Z,{class:"px-1.5 py-2 lg:px-5 lg:py-6"},{default:s(()=>[o("div",ee,[o("div",te,[a(A,{class:"w-full md:w-auto",dense:"",outlined:"",debounce:"300",modelValue:l.search,"onUpdate:modelValue":t[0]||(t[0]=e=>l.search=e),placeholder:i.$t("search")},{append:s(()=>[a(x,{name:"search"})]),_:1},8,["modelValue","placeholder"]),c(P).high_profile?(u(),g(D,{key:0,size:"xs",class:"border border-dashed px-4 h-[40px] text-xs",modelValue:l.query.where.high_profile,"onUpdate:modelValue":t[1]||(t[1]=e=>l.query.where.high_profile=e),"true-value":1,"false-value":null},{default:s(()=>[v("Alto perfil")]),_:1},8,["modelValue"])):b("",!0),a(D,{size:"xs",class:"border border-dashed px-4 h-[40px] text-xs",modelValue:l.query.where.pregnant,"onUpdate:modelValue":t[2]||(t[2]=e=>l.query.where.pregnant=e),"true-value":1,"false-value":null},{default:s(()=>[v("Maternidad")]),_:1},8,["modelValue"])]),i.$isDesktop?(u(),_("div",le,[a(d,{class:"bg-transparent",flat:"","no-caps":""},{default:s(()=>[v(n(c($).start)+" - "+n(c($).end)+" de "+n(l.pagination.rowsNumber),1)]),_:1}),a(d,{class:"bg-transparent",icon:"sym_o_first_page",flat:"",onClick:t[3]||(t[3]=e=>f.value.firstPage())}),a(d,{class:"bg-transparent",icon:"sym_o_navigate_before",flat:"",onClick:t[4]||(t[4]=e=>f.value.prevPage())}),a(d,{class:"bg-transparent",icon:"sym_o_navigate_next",flat:"",onClick:t[5]||(t[5]=e=>f.value.nextPage())}),a(d,{class:"bg-transparent",icon:"sym_o_last_page",flat:"",onClick:t[6]||(t[6]=e=>f.value.lastPage())})])):b("",!0)]),o("div",ae,[a(L,{onSetUser:t[7]||(t[7]=e=>l.query.where.user_id=e),onClearUser:t[8]||(t[8]=e=>l.query.where.user_id=null),"model-value":l.user_description,label:"Coordinador",unixroles:24},null,8,["model-value"]),a(T,{class:"w-full",onSetProvider:t[9]||(t[9]=e=>l.query.where["t_event.provider_id"]=e),onClearProvider:t[10]||(t[10]=e=>l.query.where["t_event.provider_id"]=null),"model-value":l.provider_description},null,8,["model-value"])]),a(j,{grid:!i.$isDesktop,"hide-pagination":"",rows:l.rows,columns:l.columns,"row-key":"id",ref_key:"tableRef",ref:f,onRequest:c(Q),flat:"",pagination:l.pagination,"onUpdate:pagination":t[14]||(t[14]=e=>l.pagination=e),loading:l.loading,"rows-per-page-label":"Lineas","wrap-cells":!0,visibleColumns:l.visibleColumns},F({"no-data":s(({icon:e,message:r,filter:h})=>[o("div",se,[o("span",null,n(r),1),a(x,{size:"2em",name:h?"filter_b_and_w":e},null,8,["name"])])]),"body-cell-avatar":s(e=>[a(p,{props:e},{default:s(()=>[a(G,{rounded:"",size:"42px"},{default:s(()=>[o("img",{src:i.$imageInsuredPlaceholder(e.value)},null,8,oe)]),_:2},1024)]),_:2},1032,["props"])]),"body-cell-action":s(e=>[a(p,{props:e},{default:s(()=>[o("div",ie,[a(d,{flat:"",class:"button text-primary rounded-md",size:"sm",label:"consultar","no-caps":"",onClick:r=>i.$router.push(`${i.$path.event}/${i.$path.event_consult}/${e.row.id}`)},null,8,["onClick"]),a(d,{flat:"",class:"button text-primary rounded-md",size:"sm",label:"Editar","no-caps":"",onClick:r=>{l.selectedId=e.row.id,l.dialogWrite=!0}},null,8,["onClick"]),a(d,{flat:"",class:"button text-primary rounded-md",size:"sm",label:"Itinerario","no-caps":"",onClick:r=>{l.eventSelected=e.row,l.itineraryDialog=!0}},null,8,["onClick"]),e.row.book_code?(u(),g(d,{key:0,flat:"",class:"button bg-secondary text-white rounded-md",size:"sm",label:"Coinciliada","no-caps":"",to:`/conciliaciones/editar/${e.row.book_code}`},null,8,["to"])):(u(),_(I,{key:1},[e.row.policy_id?(u(),g(d,{key:0,flat:"",class:"button text-primary rounded-md",size:"sm",label:"Coinciliar","no-caps":"",to:`/conciliaciones/crear?eventId=${e.row.id}`},null,8,["to"])):(u(),g(d,{key:1,flat:"",class:"button text-primary rounded-md",size:"sm",label:"Coinciliar*","no-caps":""},{default:s(()=>[a(H,{"transition-show":"flip-up","transition-hide":"flip-down"},{default:s(()=>[a(J,null,{avatar:s(()=>[a(x,{name:"fa-duotone fa-solid fa-triangle-exclamation"})]),default:s(()=>[v(" La cita debe tener una p\xF3liza para conciliar ")]),_:1})]),_:1})]),_:1}))],64))])]),_:2},1032,["props"])]),"body-cell-user_description":s(e=>[a(p,{props:e},{default:s(()=>[o("div",ne,[o("span",null,"#"+n(e.row.code),1),o("span",null,n(e.row.event_type),1),o("span",null,n(e.row.user_description),1)])]),_:2},1032,["props"])]),"body-cell-request_date":s(e=>[a(p,{props:e},{default:s(()=>[o("span",null,n(e.row.request_date_format),1)]),_:2},1032,["props"])]),"body-cell-event_state":s(e=>[a(p,{props:e},{default:s(()=>[o("div",re,[o("div",de,[a(z,{class:"text-font w-4",style:C({background:e.row.color})},null,8,["style"]),o("span",null,n(e.row.event_state),1)]),e.row.event_state_time?(u(),_("span",ue,n(c(K)(e.row.event_state_time[e.row.$event_state_id],"EEE dd MMM yyyy hh:mm:ss")),1)):b("",!0)])]),_:2},1032,["props"])]),"body-cell-provider_description":s(e=>[a(p,{props:e},{default:s(()=>[o("div",pe,[o("span",null,"P: "+n(e.row.provider_description),1),o("span",null,"C: "+n(e.row.contact_description),1)])]),_:2},1032,["props"])]),"body-cell-doctor_description":s(e=>[a(p,{props:e},{default:s(()=>[e.row.doctor_description?(u(),_("div",fe,[(u(!0),_(I,null,O(e.row.doctor_description,(r,h)=>(u(),_("div",{key:r},[o("span",me,n(r),1)]))),128))])):b("",!0)]),_:2},1032,["props"])]),"body-cell-created_by":s(e=>[a(p,{props:e},{default:s(()=>[o("div",ce,[o("span",null,n(e.row.created_format),1),o("span",null,n(e.row.created_by),1)])]),_:2},1032,["props"])]),"body-cell-last_attendance_datetime":s(e=>[a(p,{props:e},{default:s(()=>[o("div",_e,[o("span",null,n(e.row.last_attendance_datetime_format),1),o("div",ge,[a(z,{class:"text-font bg-default text-xxs w-4 h-2 mr-1",style:C({background:e.row.time_passed_color})},null,8,["style"]),o("span",null,n(e.row.time_passed_format),1)])])]),_:2},1032,["props"])]),item:s(e=>[o("div",{class:"q-py-xs col-xs-12",style:C(e.selected?"transform: scale(0.95);":"")},[a(X,{item:e.row,onSelected:t[11]||(t[11]=r=>{l.selectedId=r,l.dialogWrite=!0}),onOpenItinerary:t[12]||(t[12]=r=>{l.eventSelected=r,l.itineraryDialog=!0}),onCopy:t[13]||(t[13]=r=>{l.selectedId=r,l.dialogCopy=!0})},null,8,["item"])],4)]),_:2},[i.$isDesktop?void 0:{name:"bottom",fn:s(()=>[a(d,{flat:"",class:"button bg-primary-light w-full","no-caps":"",onClick:c(U)},{default:s(()=>[v("Cargar m\xE1s")]),_:1},8,["onClick"])]),key:"0"}]),1032,["grid","rows","columns","onRequest","pagination","loading","visibleColumns"]),a(y,{class:"q-pa-none",modelValue:l.dialogWrite,"onUpdate:modelValue":t[16]||(t[16]=e=>l.dialogWrite=e),position:i.$isDesktop?"right":"standard","full-height":"","full-width":i.$isDesktop,maximized:"","transition-duration":100},{default:s(()=>[a(w,null,{default:s(()=>[a(k,{onClose:t[15]||(t[15]=e=>l.dialogWrite=!1),isDrawer:"",id:l.selectedId,isEdit:"",width:(i.$isDesktop,"100%")},null,8,["id","width"])]),_:1})]),_:1},8,["modelValue","position","full-width"]),a(y,{modelValue:l.dialogCreate,"onUpdate:modelValue":t[18]||(t[18]=e=>l.dialogCreate=e),position:i.$isDesktop?"right":"standard","full-height":"",maximized:"","transition-duration":100},{default:s(()=>[a(w,null,{default:s(()=>[a(k,{onClose:t[17]||(t[17]=e=>l.dialogCreate=!1),isDrawer:"",width:(i.$isDesktop,"100%"),insuredId:S.insuredId},null,8,["width","insuredId"])]),_:1})]),_:1},8,["modelValue","position"]),a(y,{modelValue:l.dialogCopy,"onUpdate:modelValue":t[20]||(t[20]=e=>l.dialogCopy=e),position:i.$isDesktop?"right":"standard","full-height":"",maximized:"","transition-duration":100},{default:s(()=>[a(w,null,{default:s(()=>[a(k,{onClose:t[19]||(t[19]=e=>l.dialogCopy=!1),isDrawer:"",width:(i.$isDesktop,"100%"),copyId:l.selectedId},null,8,["width","copyId"])]),_:1})]),_:1},8,["modelValue","position"]),a(y,{modelValue:l.itineraryDialog,"onUpdate:modelValue":t[22]||(t[22]=e=>l.itineraryDialog=e),"full-height":"",maximized:""},{default:s(()=>[a(w,{class:"shadow pt-4 lg:px-6 pb-4 flex-col w-[400px]"},{default:s(()=>[a(Y,{isEdit:"",id:l.eventSelected.id,isDrawer:"",onClose:t[21]||(t[21]=e=>l.itineraryDialog=!1),displayAdd:""},null,8,["id"])]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{we as default};
