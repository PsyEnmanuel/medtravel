import{l as k,m as G,r as L,n as P,a0 as Q,$ as z,t as u,G as _,y as n,H as I,v as C,F as p,E,z as o,x as r,Q as O,B as f,aR as V,C as W,K as S,R as j,aW as H,D as x,k as K,w as T,bj as F,A as U,U as Y,V as J,bk as X,bl as M,bm as Z,bn as ee,q as te,I as le,J as ae,aC as B,T as oe,S as se,M as h,L as N}from"./index.eccc4231.js";const ie={class:"flex justify-between items-start gap-2 py-2"},ne={key:0,class:"mb-2"},re=n("p",{class:"text-2xl text-info"},"Editar Categor\xEDa",-1),de={class:"font-bold text-brand"},ue=n("p",{class:"text-xs"},"Los campos requeridos tienen un (*)",-1),ce={key:1},pe=n("p",{class:"text-2xl text-info"},[x("Agregar "),n("b",{class:"font-bold text-brand"},"Categor\xEDa")],-1),me=n("p",null,"Los campos requeridos tienen un (*)",-1),fe=[pe,me],be=n("div",{class:"subtitle mb-2 bg-primary p-0.5 rounded-none"},null,-1),q={__name:"CategoryWrite",props:{id:Number,isEdit:Boolean,width:String,isDrawer:Boolean},setup(y){const m=k("$api"),A=k("$local"),b=G(),t=L(),c=y,w=()=>({filterable:0,root:0}),a=P({item:w(),local:"CategoryWrite",categories:[]});function v(){a.item=w(),A.remove(a.local),t.value.resetValidation()}async function D(){if(a.item.parent_id){const[l]=a.categories.filter(e=>e.id===a.item.parent_id);a.item.parent_description=l.description}c.isEdit?await m.put(`Category/${c.id}`,{...a.item})&&b.notify({type:"success",message:"Categor\xEDa Editada"}):await m.post("category",{...a.item})&&(b.notify({type:"success",message:"Categor\xEDa Agregada"}),v())}async function $(){c.isEdit?a.item=await m.get(`category/${c.id}`):A.get(a.local);let{items:l}=await m.get("category",{params:{where:{level:0,c_status:[4]}}});a.categories=l}const i=Q(()=>({width:c.width,"padding-right":c.isDrawer&&"8px","padding-left":c.isDrawer&&"8px"}));return z(()=>{$()}),(l,e)=>{var s;return u(),_("div",{style:S(i.value),class:"pb-32"},[n("div",ie,[y.isEdit?(u(),_("div",ne,[re,n("b",de,I(a.item.description),1),ue])):(u(),_("div",ce,fe)),y.isDrawer?(u(),C(p,{key:2,flat:"",class:"button",label:"cerrar",onClick:e[0]||(e[0]=d=>l.$emit("close"))})):E("",!0)]),be,o(H,{class:j((s=y.isDrawer)!=null?s:"pb-64"),ref_key:"writeForm",ref:t,onSubmit:D,onReset:v},{default:r(()=>[o(O,{class:"mb-2",dense:"",outlined:"",modelValue:a.item.description,"onUpdate:modelValue":e[1]||(e[1]=d=>a.item.description=d),label:l.$t("description"),rules:[f(V)],"hide-bottom-space":""},null,8,["modelValue","label","rules"]),l.$me.unixroles&1?(u(),C(O,{key:0,class:"mb-2",dense:"",outlined:"",modelValue:a.item.ref,"onUpdate:modelValue":e[2]||(e[2]=d=>a.item.ref=d),label:l.$t("reference"),rules:[f(V)],"hide-bottom-space":""},null,8,["modelValue","label","rules"])):E("",!0),l.$me.unixroles&1?(u(),C(O,{key:1,dense:"",outlined:"",modelValue:a.item.color,"onUpdate:modelValue":e[3]||(e[3]=d=>a.item.color=d),label:l.$t("color"),"hide-bottom-space":""},null,8,["modelValue","label"])):E("",!0),l.$me.unixroles&1?(u(),C(W,{key:2,size:"xs",modelValue:a.item.root,"onUpdate:modelValue":e[4]||(e[4]=d=>a.item.root=d),label:"Root","true-value":1,"false-value":0},null,8,["modelValue"])):E("",!0),n("div",{class:"fixed bottom-0 right-0 py-2 bg-white",style:S(i.value)},[c.isEdit?(u(),C(p,{key:0,class:"button-press w-full text-lg rounded-md bg-btn-drawer-green",flat:"",label:"Guardar cambios",type:"submit"})):(u(),C(p,{key:1,class:"button-press w-full text-lg rounded-md bg-btn-drawer-sky",flat:"",label:"agregar",type:"submit"}))],4)]),_:1},8,["class"])],4)}}},ge={class:"flex justify-between items-start gap-2 py-2"},Ce={class:"mb-2"},ye=n("p",{class:"text-2xl text-info"},"Listado Categor\xEDa",-1),Ae={class:"font-bold text-brand"},Ee=n("p",{class:"text-xs"},"Los campos requeridos tienen un (*)",-1),ve={class:"mt-2"},Ie={class:"flex justify-end"},Oe={__name:"CategoryList",props:{id:Number,width:String,isDrawer:Boolean},setup(y){const m=G(),A=k("$api"),b=K(),t=L(),c=y,w=()=>({description:null,parent_id:c.id}),a=P({category:{},items:[],staticItems:[],item:w(),total:0,selected:{},search:"",query:{order:{description:"ASC"},where:{c_status:4,parent_id:c.id}}});T(()=>b.t_category,()=>{v()}),T(()=>a.search,s=>{if(!s){a.items=F(a.staticItems);return}a.items=a.staticItems.filter(d=>d.description.includes(s))});async function v(){try{a.category=await A.get(`category/${c.id}`);const s=await A.get("category",{params:{...a.query}});a.staticItems=F(s.items),a.items=s.items,a.total=s.total}catch(s){console.log(s)}}function D(){a.item=w(),t.value.resetValidation()}async function $(){try{await A.post("category",a.item)&&m.notify({type:"success",message:"Categor\xEDa Agregada"}),v(),D()}catch(s){console.log(s)}}async function i(s){try{const d=await A.delete(`category/${s.id}`,s);v(),d&&m.notify({type:"success",message:"Categor\xEDa removida"})}catch(d){console.log(d)}}async function l(s){try{await A.put(`category/${s.id}`,s)&&m.notify({type:"success",message:"Categor\xEDa editada"})}catch(d){console.log(d)}}const e=Q(()=>({width:c.width,"padding-right":c.isDrawer&&"8px","padding-left":c.isDrawer&&"8px"}));return z(()=>{v()}),(s,d)=>(u(),_("div",{style:S(e.value),class:"pb-32"},[n("div",ge,[n("div",Ce,[ye,n("b",Ae,I(a.category.description),1),Ee]),y.isDrawer?(u(),C(p,{key:0,flat:"",class:"button",label:"cerrar",onClick:d[0]||(d[0]=g=>s.$emit("close"))})):E("",!0)]),o(H,{ref_key:"writeForm",ref:t,onSubmit:$,onReset:D},{default:r(()=>[n("div",ve,[o(O,{class:"mb-2",dense:"",outlined:"",modelValue:a.item.description,"onUpdate:modelValue":d[1]||(d[1]=g=>a.item.description=g),label:s.$t("description"),"hide-bottom-space":"",rules:[f(V)]},null,8,["modelValue","label","rules"]),o(p,{flat:"",class:"button-press w-full bg-default text-primary text-sm font-bold tracking-normal mb-2",type:"submit"},{default:r(()=>[x(" CREAR CATEGOR\xCDA ")]),_:1})])]),_:1},512),o(O,{class:"mb-2",dense:"",outlined:"",modelValue:a.search,"onUpdate:modelValue":d[2]||(d[2]=g=>a.search=g),label:s.$t("search"),"hide-bottom-space":""},{append:r(()=>[o(U,{name:"search"})]),_:1},8,["modelValue","label"]),(u(!0),_(Y,null,J(a.items,g=>(u(),_("div",{key:g.id},[(u(),C(ee,{key:g.id,class:"mb-2",separator:""},{default:r(()=>[o(X,{class:"p-0",dense:"",center:""},{default:r(()=>[o(M,{class:"relative"},{default:r(()=>[o(O,{dense:"",outlined:"",modelValue:g.description,"onUpdate:modelValue":R=>g.description=R,label:s.$t("description"),"hide-bottom-space":""},null,8,["modelValue","onUpdate:modelValue","label"]),a.category.color?(u(),C(O,{key:0,dense:"",outlined:"",modelValue:g.color,"onUpdate:modelValue":R=>g.color=R,label:s.$t("color"),"hide-bottom-space":""},null,8,["modelValue","onUpdate:modelValue","label"])):E("",!0),o(Z,{class:"absolute top-1 right-2",caption:""},{default:r(()=>[x(I(g.id),1)]),_:2},1024)]),_:2},1024),o(M,{side:""},{default:r(()=>[n("div",Ie,[o(p,{class:"bg-default text-primary mr-2","text-color":"font",size:"12px",flat:"",round:"",icon:"sym_o_edit_note",onClick:R=>l(g)},null,8,["onClick"]),o(p,{class:"bg-default text-primary","text-color":"font",size:"12px",flat:"",round:"",icon:"sym_o_remove",onClick:R=>i(g)},null,8,["onClick"])])]),_:2},1024)]),_:2},1024)]),_:2},1024))]))),128))],4))}},_e=[{id:340,description:"ANAL\xCDTICAS",parent_id:24,label:"ANAL\xCDTICAS",value:340,color:null},{id:357,description:"CAPTURA PANTALLA",parent_id:24,label:"CAPTURA PANTALLA",value:357,color:null},{id:314,description:"CARN\xC9",parent_id:24,label:"CARN\xC9",value:314,color:null},{id:315,description:"C\xC9DULA",parent_id:24,label:"C\xC9DULA",value:315,color:null},{id:311,description:"CEDULA Y SEGURO",parent_id:24,label:"CEDULA Y SEGURO",value:311,color:null},{id:393,description:"COMPROBANTE DE PAGO",parent_id:24,label:"COMPROBANTE DE PAGO",value:393,color:null},{id:395,description:"CONFIRMACION PROVEEDOR AFILIADO A RED",parent_id:24,label:"CONFIRMACION PROVEEDOR AFILIADO A RED",value:395,color:null},{id:318,description:"CORREO ELECTR\xD3NICO",parent_id:24,label:"CORREO ELECTR\xD3NICO",value:318,color:null},{id:400,description:"CUADRO DE BENEFICIOS",parent_id:24,label:"CUADRO DE BENEFICIOS",value:400,color:null},{id:199,description:"DOCUMENTO IDENTIFICACI\xD3N",parent_id:24,label:"DOCUMENTO IDENTIFICACI\xD3N",value:199,color:null},{id:313,description:"EOB",parent_id:24,label:"EOB",value:313,color:null},{id:312,description:"EOB - UCH",parent_id:24,label:"EOB - UCH",value:312,color:null},{id:392,description:"ESTADO DE CUENTA",parent_id:24,label:"ESTADO DE CUENTA",value:392,color:null},{id:367,description:"ESTUDIO DE IM\xC1GENES",parent_id:24,label:"ESTUDIO DE IM\xC1GENES",value:367,color:null},{id:382,description:"FORMULARIO DE REGISTO DE PACIENTE (INTAKE FORM)",parent_id:24,label:"FORMULARIO DE REGISTO DE PACIENTE (INTAKE FORM)",value:382,color:null},{id:188,description:"FOTO PERFIL",parent_id:24,label:"FOTO PERFIL",value:188,color:null},{id:187,description:"GENERAL",parent_id:24,label:"GENERAL",value:187,color:null},{id:198,description:"GU\xCDA M\xC9DICA",parent_id:24,label:"GU\xCDA M\xC9DICA",value:198,color:null},{id:274,description:"HIPAA",parent_id:24,label:"HIPAA",value:274,color:null},{id:397,description:"INDICACION MEDICA",parent_id:24,label:"INDICACION MEDICA",value:397,color:null},{id:304,description:"ITINERARIO",parent_id:24,label:"ITINERARIO",value:304,color:null},{id:356,description:"LABORATORIOS PPS",parent_id:24,label:"LABORATORIOS PPS",value:356,color:null},{id:396,description:"LISTADO DE CONSUMOS",parent_id:24,label:"LISTADO DE CONSUMOS",value:396,color:null},{id:380,description:"MAPA",parent_id:24,label:"MAPA",value:380,color:null},{id:276,description:"NOTAS M\xC9DICAS",parent_id:24,label:"NOTAS M\xC9DICAS",value:276,color:null},{id:371,description:"ORDENES MEDICAS",parent_id:24,label:"ORDENES MEDICAS",value:371,color:null},{id:316,description:"PASAPORTE",parent_id:24,label:"PASAPORTE",value:316,color:null},{id:381,description:"PRECERTIFICACI\xD3N",parent_id:24,label:"PRECERTIFICACI\xD3N",value:381,color:null},{id:321,description:"PRESUPUESTO",parent_id:24,label:"PRESUPUESTO",value:321,color:null},{id:369,description:"RESULTADOS PATOLOG\xCDA CONFIRMANDO CA HIGADO",parent_id:24,label:"RESULTADOS PATOLOG\xCDA CONFIRMANDO CA HIGADO",value:369,color:null},{id:275,description:"ROI",parent_id:24,label:"ROI",value:275,color:null},{id:317,description:"VISA",parent_id:24,label:"VISA",value:317,color:null},{id:197,description:"VOB",parent_id:24,label:"VOB",value:197,color:null}],we="FILE_",De=y=>y.toUpperCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g,"_").replace(/[^\w]/g,""),$e=()=>{const y=k("$api"),m=_e.map(t=>({...t,ref:we+De(t.label)}));async function A(t){for(const c of t)await y.put(`category/${c.id}`,c)}return{updateCats:async()=>{try{await A(m),console.log("\u2705 Files Category updated successfully")}catch(t){console.error("\u274C Error updating Files Category:",t)}}}},Re={class:"flex justify-between md:flex-nowrap"},ke={class:"flex flex-nowrap w-full gap-2 mb-1"},xe={key:0,class:"grid grid-flow-col auto-cols-max gap-2"},Se={class:"full-width row flex-center text-primary q-gutter-sm"},he=["src"],Ne={class:"flex gap-2"},Ve={bordered:"",flat:"",class:"card pb-2 relative flex flex-nowrap"},Te={class:"absolute right-3 top-2"},Ue={class:"pl-3 pr-8 w-full pt-2 flex flex-col overflow-hidden"},Le={class:"text-uppercase line-clamp-1 font-semibold"},Pe={class:"text-uppercase line-clamp-1 text-xxs"},Fe={class:"flex justify-end gap-2 -mr-5 mt-1"},Be={__name:"category-index",setup(y){const m=k("$me"),{updateCats:A}=$e(),b=L(),t=P({visibleColumns:m.unixroles&1?["action","description","ref","created"]:["action","description","created"],dialogWrite:!1,dialogList:!1,dialogCreate:!1,selectedId:0,dialogWidth:400,selected:[],search:"",search_key:"orlike:description,ref",pagination:{sortBy:"description",descending:!1,page:1,rowsPerPage:20},url:"category",query:{groupBy:["t_category.id"],where:{c_status:4,level:0,"ne:root":m.unixroles&1?null:1}},columns:[{name:"action",required:!0,label:"",align:"left",field:i=>i.id,format:i=>`${i}`,classes:"w-[190px]"},{name:"description",required:!0,label:"Nombre",align:"left",field:i=>i.description,sortable:!0},{name:"ref",label:"Ref",align:"left",field:i=>i.ref,sortable:!0},{name:"created",required:!0,label:"Creado",align:"left",field:"created_format",sortable:!0}],rows:[]}),{onRequest:c,getSelectedString:w,onDeleteRows:a,addMore:v,itemsRange:D}=te(t,b),$=K();return T(()=>$.table.t_category,i=>{b.value.requestServerInteraction(),b.value.clearSelection()},{deep:!0}),(i,l)=>(u(),_(Y,null,[o(se,{class:j(i.$isDesktop?i.insuredId?"px-2 py-3":"px-1.5 py-2 lg:px-5 lg:py-6":"px-1.5 py-2")},{default:r(()=>[n("div",Re,[n("div",ke,[o(O,{class:"w-full md:w-auto",dense:"",outlined:"",debounce:"300",modelValue:t.search,"onUpdate:modelValue":l[0]||(l[0]=e=>t.search=e),placeholder:i.$t("search")},{append:r(()=>[o(U,{name:"search"})]),_:1},8,["modelValue","placeholder"]),f(m).unixroles&1?(u(),C(p,{key:0,flat:"",class:"button h-full",label:"Actualizar categorias",onClick:f(A)},null,8,["onClick"])):E("",!0),f(m).unixroles&1?(u(),C(p,{key:1,flat:"",class:"button h-full",icon:"add",label:i.$isDesktop&&i.$t("add"),onClick:l[1]||(l[1]=e=>t.dialogCreate=!0)},null,8,["label"])):E("",!0),t.selected.length&&f(m).unixroles&1?(u(),C(p,{key:2,flat:"",class:"button h-full bg-primary text-white","icon-right":"sym_o_remove",label:i.$isDesktop?"Remover":"","no-caps":"",onClick:f(a)},null,8,["label","onClick"])):E("",!0)]),i.$isDesktop?(u(),_("div",xe,[o(p,{class:"bg-transparent",flat:"","no-caps":""},{default:r(()=>[x(I(f(D).start)+" - "+I(f(D).end)+" de "+I(t.pagination.rowsNumber),1)]),_:1}),o(p,{class:"bg-transparent",icon:"sym_o_first_page",flat:"",onClick:l[2]||(l[2]=e=>b.value.firstPage())}),o(p,{class:"bg-transparent",icon:"sym_o_navigate_before",flat:"",onClick:l[3]||(l[3]=e=>b.value.prevPage())}),o(p,{class:"bg-transparent",icon:"sym_o_navigate_next",flat:"",onClick:l[4]||(l[4]=e=>b.value.nextPage())}),o(p,{class:"bg-transparent",icon:"sym_o_last_page",flat:"",onClick:l[5]||(l[5]=e=>b.value.lastPage())})])):E("",!0)]),o(le,{grid:!i.$isDesktop,"visible-columns":t.visibleColumns,"hide-pagination":"",rows:t.rows,columns:t.columns,"row-key":"id",ref_key:"tableRef",ref:b,onRequest:f(c),flat:"",selection:"multiple",pagination:t.pagination,"onUpdate:pagination":l[6]||(l[6]=e=>t.pagination=e),selected:t.selected,"onUpdate:selected":l[7]||(l[7]=e=>t.selected=e),"selected-rows-label":f(w),loading:t.loading,"rows-per-page-label":"Lineas","wrap-cells":!0},ae({"no-data":r(({icon:e,message:s,filter:d})=>[n("div",Se,[n("span",null,I(s),1),o(U,{size:"2em",name:d?"filter_b_and_w":e},null,8,["name"])])]),"body-cell-avatar":r(e=>[o(B,{props:e},{default:r(()=>[o(oe,{rounded:"",size:"42px"},{default:r(()=>[n("img",{src:i.$imageInsuredPlaceholder(e.value)},null,8,he)]),_:2},1024)]),_:2},1032,["props"])]),"body-cell-action":r(e=>[o(B,{props:e},{default:r(()=>[n("div",Ne,[f(m).unixroles&1?(u(),C(p,{key:0,flat:"",class:"button bg-default text-primary rounded-md",size:"sm",label:"Editar","no-caps":"",onClick:s=>{t.selectedId=e.row.id,t.dialogWrite=!0}},null,8,["onClick"])):E("",!0),o(p,{flat:"",class:"button bg-default text-primary rounded-md",size:"sm",label:"listado","no-caps":"",onClick:s=>{t.selectedId=e.row.id,t.dialogList=!0}},null,8,["onClick"])])]),_:2},1032,["props"])]),item:r(e=>[n("div",{class:"q-py-xs col-xs-12 col-sm-6 col-md-4",style:S(e.selected?"transform: scale(0.95);":"")},[n("div",Ve,[n("div",Te,[o(W,{dense:"",modelValue:e.selected,"onUpdate:modelValue":s=>e.selected=s,label:e.row.name},null,8,["modelValue","onUpdate:modelValue","label"])]),n("div",Ue,[n("span",Le,I(e.row.description),1),n("span",Pe,I(e.row.ref),1),n("div",Fe,[f(m).unixroles&1?(u(),C(p,{key:0,flat:"",class:"button bg-default text-primary rounded-md",label:"Editar","no-caps":"",onClick:s=>{t.selectedId=e.row.id,t.dialogWrite=!0}},null,8,["onClick"])):E("",!0),o(p,{flat:"",class:"button bg-default text-primary rounded-md",label:"listado","no-caps":"",onClick:s=>{t.selectedId=e.row.id,t.dialogList=!0}},null,8,["onClick"])])])])],4)]),_:2},[i.$isDesktop?void 0:{name:"bottom",fn:r(()=>[o(p,{flat:"",class:"button bg-primary-light w-full","no-caps":"",onClick:f(v)},{default:r(()=>[x("Cargar m\xE1s")]),_:1},8,["onClick"])]),key:"0"}]),1032,["grid","visible-columns","rows","columns","onRequest","pagination","selected","selected-rows-label","loading"])]),_:1},8,["class"]),o(N,{class:"q-pa-none",modelValue:t.dialogWrite,"onUpdate:modelValue":l[9]||(l[9]=e=>t.dialogWrite=e),position:i.$isDesktop?"right":"standard","full-height":"","full-width":i.$isDesktop,maximized:"","transition-duration":100},{default:r(()=>[o(h,null,{default:r(()=>[o(q,{onClose:l[8]||(l[8]=e=>t.dialogWrite=!1),isDrawer:"",id:t.selectedId,isEdit:"",width:i.$isDesktop?"400px":"100%"},null,8,["id","width"])]),_:1})]),_:1},8,["modelValue","position","full-width"]),o(N,{modelValue:t.dialogList,"onUpdate:modelValue":l[11]||(l[11]=e=>t.dialogList=e),position:i.$isDesktop?"right":"standard","full-height":"",maximized:"","transition-duration":100},{default:r(()=>[o(h,null,{default:r(()=>[o(Oe,{onClose:l[10]||(l[10]=e=>t.dialogList=!1),isDrawer:"",id:t.selectedId,width:i.$isDesktop?"400px":"100%"},null,8,["id","width"])]),_:1})]),_:1},8,["modelValue","position"]),o(N,{modelValue:t.dialogCreate,"onUpdate:modelValue":l[13]||(l[13]=e=>t.dialogCreate=e),position:i.$isDesktop?"right":"standard","full-height":"",maximized:"","transition-duration":100},{default:r(()=>[o(h,null,{default:r(()=>[o(q,{onClose:l[12]||(l[12]=e=>t.dialogCreate=!1),isDrawer:"",width:i.$isDesktop?"400px":"100%"},null,8,["width"])]),_:1})]),_:1},8,["modelValue","position"])],64))}};export{Be as default};
