import{r as B,l as C,n as $,$ as A,k as j,w as U,t as n,G as c,U as E,V as k,v as f,a0 as G,a1 as N,y as t,H as d,z as s,B as L,a2 as q,F as w,x as i,D as O,E as b,K as M,W as z,a3 as Q,a4 as H,M as P,a5 as x,L as h,m as K,a6 as W,R as J,A as X,a7 as Y,a8 as m,a9 as Z,aa as ee,ab as te,ac as ae,ad as le,S as se}from"./index.7b06e917.js";import{_ as oe}from"./ChartPoll.d03c8de0.js";import ie from"./itinerary-index.03100f57.js";const re={class:"grid lg:grid-cols-2 gap-4"},ne={__name:"poll-event",props:{id:Number},setup(y){const u=B(),v=y,e=C("$api"),o=$({average:{},stats:{}});async function p(){const{list:_,average:r}=await e(`poll/stats/event_id/${v.id}`);console.log(o.stats),o.stats=_,o.average=r}A(()=>{p()});const R=j();return U(()=>R.table.t_poll,_=>{u.value.requestServerInteraction(),u.value.clearSelection()},{deep:!0}),(_,r)=>(n(),c("div",re,[(n(!0),c(E,null,k(o.stats,(l,a)=>(n(),c("div",{key:a,class:"card mb-2"},[(n(),f(oe,{key:`poll-${l.description}`,data:l.answers,name:`poll-${l.description}`,title:l.description,subtitle:""},null,8,["data","name","title"]))]))),128))]))}},de={class:"flex justify-between items-end"},ce={class:"flex flex-col"},ue=t("span",{class:"text-lg font-bold text-primary"},"GU\xCDA M\xC9DICA",-1),fe={class:"text-xs text-font"},pe={class:"flex"},_e={class:"flex flex-col gap-1 mt-1"},me=t("div",{class:"bg-default p-1 rounded-md text-center font-bold text-xs"},"Pendientes",-1),be={class:"w-full max-w-[40px] min-w-[40px] flex justify-center items-center border card shadow-none"},ve={class:"flex flex-nowrap justify-between w-full items-start border card shadow-none px-3 py-1"},ge={class:"w-full flex flex-col"},xe={class:"text-xs uppercase pr-4 line-clamp-1"},we=["innerHTML"],ye={class:"card border my-4 rounded-xl overflow-hidden"},Re={key:0},Pe={class:"mt-2 flex justify-center"},he={class:"flex items-center gap-3"},Ee=["disabled"],Ie={class:"text-sm font-medium text-gray-700"},Ce=["disabled"],Oe={class:"mb-2 flex justify-center"},$e={class:"flex items-center gap-3"},Ae=["disabled"],ke={class:"text-sm font-medium text-gray-700"},De=["disabled"],Ve={class:"border border-dashed w-full"},Te={class:"border border-dashed w-full"},Fe={class:"border border-dashed w-full"},Se={class:"border border-dashed w-full"},Ne={class:"border border-dashed w-full"},Le={__name:"EventMedicalGuide",props:{id:Number,width:String},setup(y){const u=y,v=C("$api"),e=$({loading:!0,visible:!0,item:{},filename:null,pdfSrc:null,numOfPages:0,currentPage:1});function o(){e.loading=!0,e.currentPage<e.numOfPages&&e.currentPage++,e.loading=!1}function p(){e.loading=!0,e.currentPage>1&&e.currentPage--,e.loading=!1}A(async()=>{const{item:r,filename:l,pdfUrl:a}=await v.get(`report/medical-guide2/${u.id}`);e.item=r,e.filename=l,e.fileUrl=a;const I=await G(a).promise;e.numOfPages=I.numPages,e.currentPage=1,e.loading=!1});const R=N(()=>{var l,a,g,I,D,V,T,F,S;const r=[];return e.item._files&&((l=e.item)!=null&&l._files.cardnet.length||r.push({text:"Agregar cardnet de asegurado (Foto)",detail:"Se refiere a el tipo de archivo <b>CARN\xC9</b> de los asegurados",color:"black",btnText:"Subir CARN\xC9",fun(){e.uploadCARNEDrawer=!0}}),(a=e.item)!=null&&a._files.doctor.length||r.push({text:"Agregar imagenes de m\xE9dicos",detail:"Se refiere a la foto de <b>PERFIL</b> de los m\xE9dicos presentes en la coordinaci\xF3n",color:"black"}),(g=e.item)!=null&&g._files.presertification.length||r.push({text:"Agregar PRECERTIFICACI\xD3N (Archivo)",detail:"Tipo de Archivo <b>PRECERTIFICACI\xD3N</b> adjunto en la coordinaci\xF3n presentes en la coordinaci\xF3n",color:"black",btnText:"Subir PRECERTIFICACI\xD3N",fun(){e.uploadPRESERTIFICATIONDrawer=!0}}),(I=e.item)!=null&&I.provider||r.push({text:"Agregar Proveedor",detail:"Se refiere al proveedor principal de la coordinaci\xF3n",color:"black"}),(D=e.item)!=null&&D._files.provider||r.push({text:"Agregar Foto de perfil de proveedor",detail:"Se refiere a la foto de <b>PERFIL</b> del proveedor presente en la coordinaci\xF3n",color:"black",btnText:"Subir FOTO PERFIL PROVEEDOR",fun(){e.uploadPROFILEPROVIDERDrawer=!0}}),(V=e.item)!=null&&V.provider.file||r.push({text:"Agregar Foto de centro de proveedor (TIPO GU\xCDA M\xC9DICA)",detail:"Se refiere a la foto de <b>CENTRO</b> del proveedor presente en la coordinaci\xF3n",color:"black",btnText:"Subir FOTO CENTRO PROVEEDOR",fun(){e.uploadcentroPROVIDERDrawer=!0}}),(T=e.item)!=null&&T.provider.mapa||r.push({text:"Agregar Foto de Ubicaci\xF3n Mapa del proveedor",detail:"Tipo de Archivo <b>MAPA</b> adjunto en la <b>PROVEEDOR</b> presente en la coordinaci\xF3n",color:"black",btnText:"Subir FOTO MAPA PROVEEDOR",fun(){e.uploadMAPAPROVIDERrawer=!0}}),(S=(F=e.item)==null?void 0:F.itineraries)!=null&&S.length||r.push({text:"Agregar itinerarios",detail:"Listado de itinerarios correspondientes a la coordinaci\xF3n",color:"black"})),r}),_=N(()=>({width:u.width}));return(r,l)=>(n(),c(E,null,[t("div",{class:"card no-shadow border overflow-hidden p-4",style:M(_.value)},[t("div",de,[t("div",ce,[ue,t("span",fe,"#"+d(e.item.code),1)]),t("div",pe,[s(w,{flat:"",class:"button mr-2",label:"Descargar",icon:"sym_o_download",onClick:l[0]||(l[0]=a=>L(q)(e.fileUrl,e.item.code))}),s(w,{flat:"",class:"button",label:"cerrar",onClick:l[1]||(l[1]=a=>r.$emit("close"))})])]),t("div",_e,[me,(n(!0),c(E,null,k(R.value,(a,g)=>(n(),c("div",{class:"flex flex-nowrap gap-1",key:a.id},[t("div",be,d(g+1),1),t("div",ve,[t("div",ge,[t("div",xe,d(a.text),1),t("div",{class:"text-xxs uppercase pr-4",innerHTML:a.detail},null,8,we)]),a.fun?(n(),f(w,{key:0,class:"button",flat:"",onClick:a.fun},{default:i(()=>[O(d(a.btnText),1)]),_:2},1032,["onClick"])):b("",!0)]),s(z,{color:a.color,style:M({background:a.color}),class:"flex justify-center font-bold text-xxs w-[16px] h-[16px]"},null,8,["color","style"])]))),128))]),r.isEdit?(n(),f(w,{key:0,flat:"",class:"button-icon h-[40px] bg-secondary text-white",onClick:l[2]||(l[2]=a=>e.cancelDialog=!0),label:"Cancelar coordinaci\xF3n"},{default:i(()=>[s(Q,{class:"bg-default text-black text-xs"},{default:i(()=>[O("Cancelar coordinaci\xF3n")]),_:1})]),_:1})):b("",!0),t("div",ye,[e.loading?b("",!0):(n(),c("div",Re,[t("div",Pe,[t("div",he,[t("button",{onClick:p,disabled:e.currentPage===1,class:"p-2 rounded-full bg-gray-200 hover:bg-gray-300 disabled:opacity-40 disabled:cursor-not-allowed transition"}," \u25C0 ",8,Ee),t("span",Ie," Pag. "+d(e.currentPage)+" / "+d(e.numOfPages),1),t("button",{onClick:o,disabled:e.currentPage===e.numOfPages,class:"p-2 rounded-full bg-gray-200 hover:bg-gray-300 disabled:opacity-40 disabled:cursor-not-allowed transition"}," \u25B6 ",8,Ce)])]),(n(),f(L(H),{src:e.fileUrl,page:e.currentPage,key:e.currentPage},null,8,["src","page"])),t("div",Oe,[t("div",$e,[t("button",{onClick:p,disabled:e.currentPage===1,class:"p-2 rounded-full bg-gray-200 hover:bg-gray-300 disabled:opacity-40 disabled:cursor-not-allowed transition"}," \u25C0 ",8,Ae),t("span",ke," Pag. "+d(e.currentPage)+" / "+d(e.numOfPages),1),t("button",{onClick:o,disabled:e.currentPage===e.numOfPages,class:"p-2 rounded-full bg-gray-200 hover:bg-gray-300 disabled:opacity-40 disabled:cursor-not-allowed transition"}," \u25B6 ",8,De)])])]))])],4),s(h,{class:"q-pa-none left-0","no-refocus":"",modelValue:e.uploadcentroPROVIDERDrawer,"onUpdate:modelValue":l[4]||(l[4]=a=>e.uploadcentroPROVIDERDrawer=a)},{default:i(()=>[s(P,{class:"p-2 flex justify-center items-center"},{default:i(()=>[t("div",Ve,[s(x,{class:"py-16 px-24",ref_id:e.item.provider_id,table:"t_provider",icon:"fa-duotone fa-solid fa-camera-retro",avaliable_file_text:!1,text:"Subir FOTO DE CENTRO PROVEEDOR",file_type:"GU\xCDA M\xC9DICA",onClose:l[3]||(l[3]=a=>e.uploadcentroPROVIDERDrawer=!1)},null,8,["ref_id"])])]),_:1})]),_:1},8,["modelValue"]),s(h,{class:"q-pa-none left-0","no-refocus":"",modelValue:e.uploadPROFILEPROVIDERDrawer,"onUpdate:modelValue":l[6]||(l[6]=a=>e.uploadPROFILEPROVIDERDrawer=a)},{default:i(()=>[s(P,{class:"p-2 flex justify-center items-center"},{default:i(()=>[t("div",Te,[s(x,{class:"py-16 px-24",ref_id:e.item.provider_id,table:"t_provider",icon:"fa-duotone fa-solid fa-camera-retro",avaliable_file_text:!1,text:"Subir FOTO PERFIL PROVEEDOR",file_type:"FOTO PERFIL",onClose:l[5]||(l[5]=a=>e.uploadPROFILEPROVIDERDrawer=!1)},null,8,["ref_id"])])]),_:1})]),_:1},8,["modelValue"]),s(h,{class:"q-pa-none left-0","no-refocus":"",modelValue:e.uploadMAPAPROVIDERrawer,"onUpdate:modelValue":l[8]||(l[8]=a=>e.uploadMAPAPROVIDERrawer=a)},{default:i(()=>[s(P,{class:"p-2 flex justify-center items-center"},{default:i(()=>[t("div",Fe,[s(x,{class:"py-16 px-24",ref_id:e.item.provider_id,table:"t_provider",icon:"fa-duotone fa-solid fa-camera-retro",avaliable_file_text:!1,text:"Subir FOTO MAPA PROVEEDOR",file_type:"MAPA",onClose:l[7]||(l[7]=a=>e.uploadMAPAPROVIDERrawer=!1)},null,8,["ref_id"])])]),_:1})]),_:1},8,["modelValue"]),s(h,{class:"q-pa-none left-0","no-refocus":"",modelValue:e.uploadCARNEDrawer,"onUpdate:modelValue":l[10]||(l[10]=a=>e.uploadCARNEDrawer=a)},{default:i(()=>[s(P,{class:"p-2 flex justify-center items-center"},{default:i(()=>[t("div",Se,[s(x,{class:"py-16 px-24",ref_id:e.item.id,table:"t_event",icon:"fa-duotone fa-solid fa-camera-retro",avaliable_file_text:!1,text:"Subir CARN\xC9",file_type:"CARN\xC9",onClose:l[9]||(l[9]=a=>e.uploadCARNEDrawer=!1)},null,8,["ref_id"])])]),_:1})]),_:1},8,["modelValue"]),s(h,{class:"q-pa-none left-0","no-refocus":"",modelValue:e.uploadPRESERTIFICATIONDrawer,"onUpdate:modelValue":l[12]||(l[12]=a=>e.uploadPRESERTIFICATIONDrawer=a)},{default:i(()=>[s(P,{class:"p-2 flex justify-center items-center"},{default:i(()=>[t("div",Ne,[s(x,{class:"py-16 px-24",ref_id:e.item.id,table:"t_event",icon:"fa-duotone fa-solid fa-camera-retro",avaliable_file_text:!1,text:"Subir PRECERTIFICACI\xD3N",file_type:"PRECERTIFICACI\xD3N",onClose:l[11]||(l[11]=a=>e.uploadPRESERTIFICATIONDrawer=!1)},null,8,["ref_id"])])]),_:1})]),_:1},8,["modelValue"])],64))}},Me={class:"flex md:flex-nowrap gap-2 break-all"},je={class:"w-full md:max-w-[200px] min-w-[200px]"},Ue={key:0,class:"relative"},Qe={class:"card rounded-md flex flex-col py-2 px-3 mb-1 mt-1"},Be={class:"font-semibold text-xs"},Ge={class:"font-semibold text-xxs"},qe={class:"grid gap-1 my-1"},ze={class:"flex items-center justify-between w-full"},He={class:"flex items-center w-full"},Ke={class:"ml-4 md:text-md font-bold pt-1.5"},We={class:"w-full overflow-hidden"},Je={class:"card px-3 py-2"},Xe={class:"card px-3 py-2"},Ye={class:"card"},Ze={class:"card px-3 py-2"},et={class:"card px-3 py-2"},tt={class:"flex flex-col w-full md:max-w-[250px] min-w-[250px]"},ot={__name:"event-view",props:{id:String},setup(y){K();const u=C("$api"),v=C("$me"),e=y,o=$({loading:!0,timeout:null,tabsList:[{label:"Comentarios",value:"history",icon:"list"}],tabs:[{label:"Editar Coordinaci\xF3n",value:"edit",icon:"fa-duotone fa-solid fa-user-pen",visible:1},{label:"Itinerario",value:"itinerary",icon:"fa-duotone fa-solid fa-calendar-days",visible:1},{label:"Conciliaciones",value:"conciliation",icon:"fa-duotone fa-solid fa-file-lines",visible:(v.unixroles&3,1)},{label:"Gu\xEDa M\xE9dica",value:"medical_guide",icon:"fa-duotone fa-solid fa-file-lines",visible:(v.unixroles&3,1)},{label:"Archivos",value:"file",icon:"fa-duotone fa-solid fa-image",visible:1},{label:"Encuesta",value:"poll",icon:"fa-duotone fa-solid fa-poll-people",visible:1},{label:"Historial",value:"log",icon:"fa-duotone fa-solid fa-clock-rotate-left",visible:1}],tab:"edit",item:{},dialogWrite:!1,dialogPassword:!1});async function p(){o.item=await u.get(`event/${e.id}`),o.loading=!1}async function R(){try{const r=await u.delete(`file/${o.item.profile.id}`,{data:{ref_key:"t_event",ref_id:o.item.id}})}catch(r){console.log(r)}}const _=j();return U(()=>_.table.t_event,r=>{r.id===o.item.id&&p()},{deep:!0}),A(()=>{p()}),(r,l)=>(n(),f(se,{class:"px-1.5 py-2 lg:px-5 lg:py-6"},{default:i(()=>[t("div",Me,[t("div",je,[o.item.profile?(n(),c("div",Ue,[s(W,{class:"card w-full max-h-[128px] object-contain",src:o.item.profile.url,"spinner-color":"white"},null,8,["src"]),s(w,{flat:"",class:"absolute top-0 right-0 button-icon bg-primary text-white rounded-md",size:"sm","no-caps":"",onClick:R,icon:"fa-solid fa-xmark"},{default:i(()=>[s(Q,{class:"bg-default text-black text-xs"},{default:i(()=>[O("Remover Linea")]),_:1})]),_:1})])):b("",!0),t("div",Qe,[t("div",Be,d(o.item.event_state),1),t("div",Ge,d(o.item.code),1)]),t("div",qe,[(n(!0),c(E,null,k(o.tabs,a=>(n(),c(E,{key:a.value},[a.visible?(n(),f(w,{key:0,class:J(["button-tab hover:shadow-left-secondary w-full text-xs",o.tab==a.value&&"shadow-left-secondary bg-primary text-white"]),align:"left",unelevated:"",onClick:g=>o.tab=a.value},{default:i(()=>[t("div",ze,[t("div",He,[s(X,{name:a.icon},null,8,["name"]),t("span",Ke,d(a.label),1)])])]),_:2},1032,["onClick","class"])):b("",!0)],64))),128))])]),t("div",We,[o.loading?b("",!0):(n(),f(Y,{key:0,modelValue:o.tab,"onUpdate:modelValue":l[0]||(l[0]=a=>o.tab=a),class:"bg-transparent"},{default:i(()=>[s(m,{name:"edit",class:"p-0"},{default:i(()=>[t("div",Je,[s(Z,{isEdit:"",id:o.item.id,width:"100%"},null,8,["id"])])]),_:1}),s(m,{name:"medical_guide",class:"p-0"},{default:i(()=>[t("div",Xe,[s(Le,{isEdit:"",id:o.item.id,width:"100%"},null,8,["id"])])]),_:1}),s(m,{name:"file",class:"p-0"},{default:i(()=>[s(x,{ref_id:o.item.id,table:"t_event",file_type:"GENERAL"},null,8,["ref_id"]),s(ee,{refId:o.item.id,refKey:"t_event"},null,8,["refId"])]),_:1}),s(m,{name:"itinerary",class:"p-0"},{default:i(()=>[s(ie,{eventId:o.item.id,width:"100%"},null,8,["eventId"])]),_:1}),s(m,{name:"invoice",class:"p-0"},{default:i(()=>[t("div",Ye,[s(te,{eventId:o.item.id,width:"100%"},null,8,["eventId"])])]),_:1}),s(m,{name:"poll",class:"p-0"},{default:i(()=>[t("div",Ze,[s(ne,{id:o.item.id,width:"100%"},null,8,["id"])])]),_:1}),s(m,{name:"log",class:"p-0"},{default:i(()=>[t("div",et,[s(ae,{isEdit:"",id:o.item.id,ref_id:o.item.id,width:"100%"},null,8,["id","ref_id"])])]),_:1})]),_:1},8,["modelValue"]))]),t("div",tt,[o.loading?b("",!0):(n(),f(le,{key:0,refKey:"t_event",refId:o.item.id,comment_state:o.item.event_state,comment_state_id:o.item.$event_state_id},null,8,["refId","comment_state","comment_state_id"]))])])]),_:1}))}};export{ot as default};
