import{az as q,r as V,n as S,q as B,k as D,w as P,t as p,G as f,y as t,z as l,x as n,A as _,Q,F as r,v as R,B as c,E as m,D as w,H as d,J as z,aC as v,T as I,K as U,C as N,I as T,U as j}from"./index.73cc0385.js";const A={class:"flex justify-between md:flex-nowrap"},E={class:"flex flex-nowrap w-full gap-2"},F={key:0,class:"grid grid-flow-col auto-cols-max gap-2"},L={class:"full-width row flex-center text-primary q-gutter-sm"},W=["src"],G={class:"flex gap-2"},H={bordered:"",flat:"",class:"card pb-2 relative flex flex-nowrap"},J={class:"absolute right-3 top-2"},K={class:"pl-3 pr-8 w-full pt-2 flex flex-col overflow-hidden"},M={class:"text-uppercase line-clamp-1 font-semibold"},O={class:"text-uppercase line-clamp-1 text-xxs"},X={class:"flex flex-col ml-auto"},Y={key:0,class:"text-xs flex justify-between gap-2"},Z=t("span",null,"Cobertura: ",-1),ee={class:"text-red-600 ml-auto font-bold"},te={key:1,class:"text-xs flex justify-between gap-2"},le=t("span",null,"Precio: ",-1),ae={class:"ml-auto font-bold"},se={class:"flex justify-end gap-2 -mr-5 mt-1"},re={__name:"poll-index",setup(oe){const{t:g}=q(),i=V(),o=S({dialogWrite:!1,dialogList:!1,dialogCreate:!1,selectedId:0,dialogWidth:400,selected:[],search:"",search_key:"orlike:description",pagination:{sortBy:"description",descending:!1,page:1,rowsPerPage:20},url:"poll",query:{groupBy:["t_poll.id"],where:{c_status:4}},columns:[{name:"action",required:!0,label:"",align:"left",field:g("id"),classes:"w-[100px]"},{name:"description",required:!0,label:g("name"),align:"left",field:"description",sortable:!0},{name:"note",required:!0,label:"Nota",align:"left",field:"note",sortable:!0}],rows:[]}),{onRequest:h,getSelectedString:k,onDeleteRows:y,addMore:x,itemsRange:b}=B(o,i),$=D();return P(()=>$.table.t_poll,s=>{i.value.requestServerInteraction(),i.value.clearSelection()},{deep:!0}),(s,a)=>(p(),f(j,null,[t("div",A,[t("div",E,[l(Q,{class:"w-full md:w-auto",dense:"",outlined:"",debounce:"300",modelValue:o.search,"onUpdate:modelValue":a[0]||(a[0]=e=>o.search=e),placeholder:s.$t("search")},{append:n(()=>[l(_,{name:"search"})]),_:1},8,["modelValue","placeholder"]),l(r,{flat:"",class:"button h-full",icon:"add",label:s.$isDesktop&&s.$t("add"),onClick:a[1]||(a[1]=e=>o.dialogCreate=!0)},null,8,["label"]),o.selected.length?(p(),R(r,{key:0,flat:"",class:"button h-full bg-primary text-white","icon-right":"sym_o_remove",label:s.$isDesktop?"Remover":"","no-caps":"",onClick:c(y)},null,8,["label","onClick"])):m("",!0)]),s.$isDesktop?(p(),f("div",F,[l(r,{class:"bg-transparent",flat:"","no-caps":""},{default:n(()=>[w(d(c(b).start)+" - "+d(c(b).end)+" de "+d(o.pagination.rowsNumber),1)]),_:1}),l(r,{class:"bg-transparent",icon:"sym_o_first_page",flat:"",onClick:a[2]||(a[2]=e=>i.value.firstPage())}),l(r,{class:"bg-transparent",icon:"sym_o_navigate_before",flat:"",onClick:a[3]||(a[3]=e=>i.value.prevPage())}),l(r,{class:"bg-transparent",icon:"sym_o_navigate_next",flat:"",onClick:a[4]||(a[4]=e=>i.value.nextPage())}),l(r,{class:"bg-transparent",icon:"sym_o_last_page",flat:"",onClick:a[5]||(a[5]=e=>i.value.lastPage())})])):m("",!0)]),l(T,{grid:!s.$isDesktop,"hide-pagination":"",rows:o.rows,columns:o.columns,"row-key":"id",ref_key:"tableRef",ref:i,onRequest:c(h),flat:"",selection:"multiple",pagination:o.pagination,"onUpdate:pagination":a[6]||(a[6]=e=>o.pagination=e),selected:o.selected,"onUpdate:selected":a[7]||(a[7]=e=>o.selected=e),"selected-rows-label":c(k),loading:o.loading,"rows-per-page-label":"Lineas","wrap-cells":!0},z({"no-data":n(({icon:e,message:u,filter:C})=>[t("div",L,[t("span",null,d(u),1),l(_,{size:"2em",name:C?"filter_b_and_w":e},null,8,["name"])])]),"body-cell-avatar":n(e=>[l(v,{props:e},{default:n(()=>[l(I,{rounded:"",size:"42px"},{default:n(()=>[t("img",{src:s.$imageInsuredPlaceholder(e.value)},null,8,W)]),_:2},1024)]),_:2},1032,["props"])]),"body-cell-action":n(e=>[l(v,{props:e},{default:n(()=>[t("div",G,[l(r,{flat:"",class:"button-press bg-primary text-white rounded-md",size:"sm",label:"Consultar","no-caps":"",onClick:u=>s.$router.push(`${s.$path.setting}/${s.$path.setting_poll_consult}/${e.row.id}`)},null,8,["onClick"])])]),_:2},1032,["props"])]),item:n(e=>[t("div",{class:"q-py-xs col-xs-12 col-sm-6 col-md-4",style:U(e.selected?"transform: scale(0.95);":"")},[t("div",H,[t("div",J,[l(N,{dense:"",modelValue:e.selected,"onUpdate:modelValue":u=>e.selected=u,label:e.row.name},null,8,["modelValue","onUpdate:modelValue","label"])]),t("div",K,[t("span",M,d(e.row.description),1),t("span",O,d(e.row.barcode),1),t("div",X,[e.row.coverage_format?(p(),f("span",Y,[Z,t("span",ee,d(e.row.coverage_format),1)])):m("",!0),e.row.price?(p(),f("span",te,[le,t("span",ae,d(e.row.price_format),1)])):m("",!0)]),t("div",se,[l(r,{flat:"",class:"button-press bg-primary text-white rounded-md",size:"sm",label:"Consultar","no-caps":"",onClick:u=>s.$router.push(`${s.$path.setting}/${s.$path.setting_poll_consult}/${e.row.id}`)},null,8,["onClick"])])])])],4)]),_:2},[s.$isDesktop?void 0:{name:"bottom",fn:n(()=>[l(r,{flat:"",class:"button bg-primary-light w-full","no-caps":"",onClick:c(x)},{default:n(()=>[w("Cargar m\xE1s")]),_:1},8,["onClick"])]),key:"0"}]),1032,["grid","rows","columns","onRequest","pagination","selected","selected-rows-label","loading"])],64))}};export{re as default};
