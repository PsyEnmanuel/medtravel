import{bL as g,az as N,bM as G,aj as U,ah as L,aq as E,l as M,n as S,w as v,o as Q,$ as j,t as u,G as A,y as a,z as s,aT as q,x as o,A as w,aD as C,aE as h,Q as x,al as R,H as $,bC as n,bD as V,ab as c,v as p,bN as _,bO as m,aa as Y,E as T,j as K}from"./index.29778d79.js";const z={key:0,class:"grid lg:grid-cols-2 gap-1"},F={class:"lg:col-span-2 gap-1"},H={class:"flex mb-1"},W={class:"flex lg:flex-nowrap gap-1 justify-between"},J={class:"grid grid-cols-2 gap-2"},X={class:"grid lg:grid-cols-3 my-1"},Z={class:"grid lg:grid-cols-2 gap-1 mb-1"},ee={class:"grid grid-cols-3 gap-1"},te={class:"border border-[#a9a7b1] border-l-4 border-l-primary flex justify-between px-2 rounded"},se=a("span",null,"Cantidad",-1),ae={class:"border border-[#a9a7b1] border-l-4 border-l-primary flex justify-between px-2 rounded"},ie=a("span",null,"Maternidad",-1),le={class:"lg:max-w-full max-w-[350px]"},oe={class:"grid lg:grid-cols-1 gap-1"},ne={class:"flex flex-col w-full gap-1"},de={class:"grid lg:grid-cols-1 gap-1"},re={class:"flex flex-col w-full gap-1"},ue={class:"flex justify-center gap-4"},ce={class:"grid lg:grid-cols-1 gap-1"},pe={class:"flex flex-col w-full gap-1"},_e={class:"grid lg:grid-cols-1 gap-1"},me={class:"flex flex-col w-full gap-1"},ye={class:"grid grid-cols-1 gap-1"},ge={class:"flex flex-col w-full gap-1"},ve={class:"grid grid-cols-1 gap-1"},fe={class:"flex flex-col w-full gap-1"},we={__name:"chart-event",setup(be){console.log("test",g);const{t:D}=N(),f={timePeriods:G.map(l=>({label:D(l),value:l})),event_state:[{label:"Todos",value:2},{label:"Finalizadas",value:1},{label:"Pendientes",value:0}]},O=U(new Date),P=L(O,"MMMM",{locale:K}),B=E(new Date),I=M("$api"),e=S({tab:"provider",$event_state_id:0,timePeriod:"all",initialPagination:{sortBy:"quantity",descending:!0,page:1,rowsPerPage:10},timeout:null,dialogEventWrite:!1,selectedEventId:0,loading:!0,first:!0,update:1,day:B,stats:{},diagnosisBy:"code",diagnosisGraph:{title:"Coordinaciones por Diagn\xF3stico",data:[]},diagnosisByGroupDesc:[],diagnosis:[],dailyList:[],eventStateList:[],userList:[],treatment:[],month:P,start:"all",query:{group_by:"t_event.id",where:{"ne:$event_state_id":"40",user_id:null,$event_type_id:[],request_date:{from:null,to:null},c_status:[4]}}});v(()=>e.timePeriod,l=>{Q(l,e.query,"request_date"),d()}),v(()=>e.query.where.user_id,l=>{d()}),v(()=>e.$event_state_id,l=>{l===2?(e.query.where["ne:$event_state_id"]=null,e.query.where.$event_state_id=null):l===1?(e.query.where.$event_state_id=40,e.query.where["ne:$event_state_id"]=null):(e.query.where.$event_state_id=null,e.query.where["ne:$event_state_id"]=40),d()});function k(l){const t={};for(const[i,b]of Object.entries(l)){const r=b.group_desc||"unknown";t[r]||(t[r]={value:0,label:""}),t[r].value+=b.quantity,console.log("group",r),console.log("ICD_GROUP",g),t[r].label=`[${r}] ${g[r].en}`||""}return Object.values(t)}function y(l){e.diagnosisBy=l,l==="code"?e.diagnosisGraph={title:"Coordinaciones por Diagn\xF3stico de grupo",data:e.diagnosisByGroupDesc}:e.diagnosisGraph={title:"Coordinaciones por Diagn\xF3stico",data:e.stats.c.diagnosisList},++e.update}async function d(){e.stats=await I.get("event/stats",{params:e.query}),e.diagnosisByGroupDesc=k(e.stats.c.diagnosis),y(e.diagnosisBy),e.loading=!1}return j(()=>{d()}),(l,t)=>e.loading?T("",!0):(u(),A("div",z,[a("div",F,[a("div",H,[s(q,{class:"flex",size:"sm",modelValue:e.timePeriod,"onUpdate:modelValue":t[0]||(t[0]=i=>e.timePeriod=i),"toggle-color":"secondary","toggle-text-color":"text-font",options:f.timePeriods,type:"radio"},null,8,["modelValue","options"])]),a("div",W,[a("div",J,[s(x,{class:"min-w-[150px]",dense:"",outlined:"",modelValue:e.query.where.request_date.from,"onUpdate:modelValue":t[3]||(t[3]=i=>e.query.where.request_date.from=i),mask:"##-##-####"},{append:o(()=>[s(w,{name:"event",class:"cursor-pointer"},{default:o(()=>[s(C,{ref:"proxy"},{default:o(()=>[s(h,{flat:"",modelValue:e.query.where.request_date.from,"onUpdate:modelValue":[t[1]||(t[1]=i=>e.query.where.request_date.from=i),t[2]||(t[2]=i=>{l.$refs.proxy.hide(),d()})],"no-unset":"","years-in-month-view":"",minimal:"",mask:"DD-MM-YYYY"},null,8,["modelValue"])]),_:1},512)]),_:1})]),_:1},8,["modelValue"]),s(x,{class:"min-w-[150px]",dense:"",outlined:"",modelValue:e.query.where.request_date.to,"onUpdate:modelValue":t[6]||(t[6]=i=>e.query.where.request_date.to=i),mask:"##-##-####"},{append:o(()=>[s(w,{name:"event",class:"cursor-pointer"},{default:o(()=>[s(C,{ref:"proxy"},{default:o(()=>[s(h,{flat:"",modelValue:e.query.where.request_date.to,"onUpdate:modelValue":[t[4]||(t[4]=i=>e.query.where.request_date.to=i),t[5]||(t[5]=i=>{l.$refs.proxy.hide(),d()})],"no-unset":"","years-in-month-view":"",minimal:"",mask:"DD-MM-YYYY"},null,8,["modelValue"])]),_:1},512)]),_:1})]),_:1},8,["modelValue"])]),s(q,{class:"flex",modelValue:e.$event_state_id,"onUpdate:modelValue":t[7]||(t[7]=i=>e.$event_state_id=i),options:f.event_state},null,8,["modelValue","options"])]),a("div",X,[s(R,{onSetUser:t[8]||(t[8]=i=>e.query.where.user_id=i),onClearUser:t[9]||(t[9]=i=>e.query.where.user_id=null),"model-value":e.user_description,label:"Coordinador",unixroles:24,"onUpdate:modelValue":t[10]||(t[10]=i=>d())},null,8,["model-value"])]),a("div",Z,[a("div",ee,[a("div",te,[se,a("span",null,$(e.stats.c.quantity),1)]),a("div",ae,[ie,a("span",null,$(e.stats.c.pregnant),1)])])]),a("div",le,[s(V,{modelValue:e.tab,"onUpdate:modelValue":t[11]||(t[11]=i=>e.tab=i),dense:"",class:"text-grey mb-1 w-full","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":"","outside-arrows":""},{default:o(()=>[s(n,{name:"provider",label:"Proveedores"}),s(n,{name:"diagnosis",label:"Diagn\xF3sticos"}),s(n,{name:"country",label:"Pa\xEDs"}),s(n,{name:"city",label:"Ciudades"}),s(n,{name:"state",label:"Estado"}),s(n,{name:"user",label:"Coordinador"})]),_:1},8,["modelValue"])]),s(Y,{class:"p-0",modelValue:e.tab,"onUpdate:modelValue":t[15]||(t[15]=i=>e.tab=i),animated:""},{default:o(()=>[s(c,{class:"p-0",name:"provider"},{default:o(()=>[a("div",oe,[a("div",ne,[(u(),p(_,{key:e.update,data:e.stats.c.providerList,name:"label",value:"value",title:"Coordinaciones por Proveedores",subtitle:"Coordinaciones"},null,8,["data"])),s(m,{list:e.stats.c.providerList,title:"COORDINACIONES",stats:e.stats.c,type:"provider_description",columnKey:"provider_description",hideBtn:"",event_state_id:e.$event_state_id,quantity:e.stats.c.quantity},null,8,["list","stats","event_state_id","quantity"])])])]),_:1}),s(c,{class:"p-0",name:"diagnosis"},{default:o(()=>[a("div",de,[a("div",re,[a("div",ue,[s(V,{modelValue:e.diagnosisBy,"onUpdate:modelValue":t[14]||(t[14]=i=>e.diagnosisBy=i),dense:"",class:"text-grey mb-1 w-full","active-color":"primary","indicator-color":"primary",align:"center","narrow-indicator":"","outside-arrows":""},{default:o(()=>[s(n,{name:"code",label:"Grupo",onClick:t[12]||(t[12]=()=>y("code"))}),s(n,{name:"list",label:"C\xF3digo",onClick:t[13]||(t[13]=()=>y("list"))})]),_:1},8,["modelValue"])]),(u(),p(_,{key:e.update,data:e.diagnosisGraph.data,name:"label",value:"value",title:e.diagnosisGraph.title,subtitle:"Coordinaciones",hideLegend:!0},null,8,["data","title"])),s(m,{list:e.diagnosisGraph.data,title:"COORDINACIONES",name:"Diagn\xF3stico",stats:e.stats.c,type:"diagnosis",columnKey:"diagnosis",hideBtn:"",event_state_id:e.$event_state_id,quantity:e.stats.c.quantity,showActions:e.diagnosisBy!="code"},null,8,["list","stats","event_state_id","quantity","showActions"])])])]),_:1}),s(c,{class:"p-0",name:"state"},{default:o(()=>[a("div",ce,[a("div",pe,[(u(),p(_,{key:e.update,data:e.stats.c.eventStateList,name:"label",value:"value",title:"Coordinaciones por Estado",subtitle:"Coordinaciones"},null,8,["data"])),s(m,{list:e.stats.c.eventStateList,title:"COORDINACIONES",name:"Proveedores",stats:e.stats.c,type:"event_state",columnKey:"event_state",hideBtn:"",event_state_id:e.$event_state_id,quantity:e.stats.c.quantity},null,8,["list","stats","event_state_id","quantity"])])])]),_:1}),s(c,{class:"p-0",name:"user"},{default:o(()=>[a("div",_e,[a("div",me,[(u(),p(_,{key:e.update,data:e.stats.c.users,name:"label",value:"value",title:"Coordinaciones por Usuario",subtitle:"Coordinaciones"},null,8,["data"])),s(m,{list:e.stats.c.users,title:"COORDINACIONES",stats:e.stats.c,type:"user_description",columnKey:"user_description",name:"Proveedores",hideBtn:"",event_state_id:e.$event_state_id,quantity:e.stats.c.quantity},null,8,["list","stats","event_state_id","quantity"])])])]),_:1}),s(c,{class:"p-0",name:"country"},{default:o(()=>[a("div",ye,[a("div",ge,[(u(),p(_,{key:e.update,data:e.stats.c.countryList,name:"label",value:"value",title:"Coordinaciones por Pa\xEDs",subtitle:"Coordinaciones"},null,8,["data"])),s(m,{list:e.stats.c.countryList,title:"COORDINACIONES",name:"Paises",stats:e.stats.c,type:"country",columnKey:"country",hideBtn:"",event_state_id:e.$event_state_id,quantity:e.stats.c.quantity},null,8,["list","stats","event_state_id","quantity"])])])]),_:1}),s(c,{class:"p-0",name:"city"},{default:o(()=>[a("div",ve,[a("div",fe,[(u(),p(_,{key:e.update,data:e.stats.c.cityList,name:"label",value:"value",title:"Coordinaciones por Ciudad",subtitle:"Coordinaciones"},null,8,["data"])),s(m,{list:e.stats.c.cityList,title:"COORDINACIONES",name:"Ciudades",stats:e.stats.c,type:"city",columnKey:"city",hideBtn:"",event_state_id:e.$event_state_id,quantity:e.stats.c.quantity},null,8,["list","stats","event_state_id","quantity"])])])]),_:1})]),_:1},8,["modelValue"])])]))}};export{we as default};
