import{t as m,G as _,y as o,z as a,C as Q,H as u,F as r,ax as R,r as B,n as U,q as P,k as W,w as z,v as x,x as s,Q as N,A as y,B as g,E as k,D as v,I as E,J as L,aA as c,K as T,L as b,M as w,bc as h,a$ as j,R as M,S as A}from"./index.91b66b4a.js";const F={bordered:"",flat:"",class:"card pb-2 relative flex flex-nowrap"},G={class:"absolute right-3 top-2"},H={class:"pl-3 pr-8 w-full pt-2 flex flex-col overflow-hidden"},J={class:"text-uppercase line-clamp-1 font-semibold"},K={class:"text-uppercase line-clamp-1 text-xxs"},O={class:"text-uppercase line-clamp-1 text-xxs"},X={class:"text-uppercase line-clamp-1 text-xxs"},Y={class:"text-uppercase line-clamp-1 text-xxs"},Z={class:"flex justify-end gap-2 -mr-5 mt-1"},ee={__name:"LodgingCard",props:{item:Object},setup(p){return(d,n)=>(m(),_("div",null,[o("div",F,[o("div",G,[a(Q,{dense:"",modelValue:p.item.selected,"onUpdate:modelValue":n[0]||(n[0]=l=>p.item.selected=l)},null,8,["modelValue"])]),o("div",H,[o("span",J,u(p.item.row.description),1),o("span",K,u(p.item.row.lodging_type),1),o("span",O,u(p.item.row.MRN),1),o("span",X,u(p.item.row.address),1),o("span",Y,u(p.item.row.webpage),1),o("div",Z,[a(r,{flat:"",class:"button bg-default text-primary rounded-md",label:"Editar","no-caps":"",onClick:n[1]||(n[1]=l=>d.$emit("selectedId",p.item.row.id))}),a(r,{flat:"",class:"button bg-default text-primary rounded-md",label:"consultar","no-caps":"",onClick:n[2]||(n[2]=l=>d.$router.push(`${d.$path.lodging}/${d.$path.lodging_consult}/${p.item.row.id}`))})])])])]))}},le={class:"flex justify-between md:flex-nowrap mb-2"},te={class:"flex flex-nowrap w-full gap-2"},ae={key:0,class:"grid grid-flow-col auto-cols-max gap-2"},se={class:"full-width row flex-center text-primary q-gutter-sm"},oe={class:"flex flex-col"},ie={class:"flex flex-col"},ne=["href"],de={class:"flex flex-col"},re=["href"],ue={class:"flex gap-2"},ge={__name:"lodging-index",setup(p){const{t:d}=R(),n=B(),l=U({dialogImport:!1,dialogWrite:!1,dialogList:!1,dialogCreate:!1,selectedId:0,dialogWidth:400,selected:[],search:"",search_key:"orlike:description",pagination:{sortBy:"description",descending:!1,page:1,rowsPerPage:20},url:"lodging",query:{groupBy:["t_lodging.id"],where:{c_status:4}},columns:[{name:"action",required:!0,label:"",align:"left",field:d("id"),classes:"w-[220px]"},{name:"description",required:!0,label:d("name"),align:"left",field:"description",classes:"w-[250px]",sortable:!0},{name:"lodging_type",required:!0,label:d("lodging_type"),align:"left",field:"lodging_type",sortable:!0},{name:"country",required:!0,label:d("country"),align:"left",field:"country",sortable:!0},{name:"city",required:!0,label:d("city"),align:"left",field:"city",sortable:!0},{name:"phone",required:!0,label:d("phone"),align:"left",field:"phone",sortable:!0},{name:"address",required:!0,label:d("address"),align:"left",field:"address",sortable:!0},{name:"webpage",required:!0,label:d("webpage"),align:"left",field:"webpage",classes:"max-w-[200px]",sortable:!0},{name:"link_gps",required:!0,label:d("link_gps"),align:"left",field:"link_gps",classes:"max-w-[200px]",sortable:!0}],rows:[]}),{onRequest:C,getSelectedString:V,onDeleteRows:q,addMore:D,itemsRange:$}=P(l,n),I=W();return z(()=>I.table.t_lodging,i=>{n.value.requestServerInteraction(),n.value.clearSelection()},{deep:!0}),(i,t)=>(m(),x(A,{class:M(i.insuredId?"px-2 py-3":"px-1.5 py-2 lg:px-5 lg:py-6")},{default:s(()=>[o("div",le,[o("div",te,[a(N,{class:"w-full md:w-auto",dense:"",outlined:"",debounce:"300",modelValue:l.search,"onUpdate:modelValue":t[0]||(t[0]=e=>l.search=e),placeholder:i.$t("search")},{append:s(()=>[a(y,{name:"search"})]),_:1},8,["modelValue","placeholder"]),a(r,{flat:"",class:"button h-full",icon:"add",label:i.$isDesktop&&i.$t("add"),onClick:t[1]||(t[1]=e=>l.dialogCreate=!0)},null,8,["label"]),l.selected.length?(m(),x(r,{key:0,flat:"",class:"button h-full bg-primary text-white","icon-right":"sym_o_remove",label:i.$isDesktop?"Remover":"","no-caps":"",onClick:g(q)},null,8,["label","onClick"])):k("",!0)]),i.$isDesktop?(m(),_("div",ae,[a(r,{class:"bg-transparent",flat:"","no-caps":""},{default:s(()=>[v(u(g($).start)+" - "+u(g($).end)+" de "+u(l.pagination.rowsNumber),1)]),_:1}),a(r,{class:"bg-transparent",icon:"sym_o_first_page",flat:"",onClick:t[2]||(t[2]=e=>n.value.firstPage())}),a(r,{class:"bg-transparent",icon:"sym_o_navigate_before",flat:"",onClick:t[3]||(t[3]=e=>n.value.prevPage())}),a(r,{class:"bg-transparent",icon:"sym_o_navigate_next",flat:"",onClick:t[4]||(t[4]=e=>n.value.nextPage())}),a(r,{class:"bg-transparent",icon:"sym_o_last_page",flat:"",onClick:t[5]||(t[5]=e=>n.value.lastPage())})])):k("",!0)]),a(E,{grid:!i.$isDesktop,"hide-pagination":"",rows:l.rows,columns:l.columns,"row-key":"id",ref_key:"tableRef",ref:n,onRequest:g(C),flat:"",selection:"multiple",pagination:l.pagination,"onUpdate:pagination":t[7]||(t[7]=e=>l.pagination=e),selected:l.selected,"onUpdate:selected":t[8]||(t[8]=e=>l.selected=e),"selected-rows-label":g(V),loading:l.loading,"rows-per-page-label":"Lineas","wrap-cells":!0},L({"no-data":s(({icon:e,message:f,filter:S})=>[o("div",se,[o("span",null,u(f),1),a(y,{size:"2em",name:S?"filter_b_and_w":e},null,8,["name"])])]),"body-cell-description":s(e=>[a(c,{props:e},{default:s(()=>[o("div",oe,[o("div",null,u(e.row.description),1)])]),_:2},1032,["props"])]),"body-cell-webpage":s(e=>[a(c,{props:e},{default:s(()=>[o("div",ie,[o("a",{class:"text-primary line-clamp-1",href:e.row.webpage,target:"_blank"},u(e.row.webpage),9,ne)])]),_:2},1032,["props"])]),"body-cell-link_gps":s(e=>[a(c,{props:e},{default:s(()=>[o("div",de,[o("a",{class:"text-primary line-clamp-1",href:e.row.link_gps,target:"_blank"},u(e.row.link_gps),9,re)])]),_:2},1032,["props"])]),"body-cell-action":s(e=>[a(c,{props:e},{default:s(()=>[o("div",ue,[a(r,{flat:"",class:"button bg-default text-primary rounded-md",label:"Editar","no-caps":"",onClick:f=>{l.selectedId=e.row.id,l.dialogWrite=!0}},null,8,["onClick"]),a(r,{flat:"",class:"button bg-default text-primary rounded-md",label:"consultar","no-caps":"",onClick:f=>i.$router.push(`${i.$path.lodging}/${i.$path.lodging_consult}/${e.row.id}`)},null,8,["onClick"])])]),_:2},1032,["props"])]),item:s(e=>[o("div",{class:"q-py-xs col-xs-12 col-sm-6 col-md-4",style:T(e.selected?"transform: scale(0.95);":"")},[a(ee,{item:e,onSelectedId:t[6]||(t[6]=f=>{l.selectedId=f,l.dialogWrite=!0})},null,8,["item"])],4)]),_:2},[i.$isDesktop?void 0:{name:"bottom",fn:s(()=>[a(r,{flat:"",class:"button bg-primary-light w-full","no-caps":"",onClick:g(D)},{default:s(()=>[v("Cargar m\xE1s")]),_:1},8,["onClick"])]),key:"0"}]),1032,["grid","rows","columns","onRequest","pagination","selected","selected-rows-label","loading"]),a(b,{class:"q-pa-none",modelValue:l.dialogWrite,"onUpdate:modelValue":t[10]||(t[10]=e=>l.dialogWrite=e),position:i.$isDesktop?"right":"standard","full-height":"","full-width":i.$isDesktop,maximized:"","transition-duration":100},{default:s(()=>[a(w,null,{default:s(()=>[a(h,{onClose:t[9]||(t[9]=e=>l.dialogWrite=!1),isDrawer:"",id:l.selectedId,isEdit:"",width:i.$isDesktop?"1000px":"100%"},null,8,["id","width"])]),_:1})]),_:1},8,["modelValue","position","full-width"]),a(b,{modelValue:l.dialogCreate,"onUpdate:modelValue":t[12]||(t[12]=e=>l.dialogCreate=e),position:i.$isDesktop?"right":"standard","full-height":"",maximized:"","transition-duration":100},{default:s(()=>[a(w,null,{default:s(()=>[a(h,{onClose:t[11]||(t[11]=e=>l.dialogCreate=!1),isDrawer:"",width:i.$isDesktop?"1000px":"100%"},null,8,["width"])]),_:1})]),_:1},8,["modelValue","position"]),a(b,{modelValue:l.dialogImport,"onUpdate:modelValue":t[14]||(t[14]=e=>l.dialogImport=e),"full-height":"","full-width":"","transition-duration":100},{default:s(()=>[a(w,null,{default:s(()=>[a(j,{table:"t_lodging",onClose:t[13]||(t[13]=e=>l.dialogImport=!1)})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["class"]))}};export{ge as default};
