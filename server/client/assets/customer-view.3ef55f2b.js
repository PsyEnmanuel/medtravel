import{aI as k,m as $,l as _,n as I,k as C,w as Q,$ as V,t as i,v as n,x as l,y as t,G as c,z as a,a8 as E,F as p,a5 as P,D as S,a7 as x,H as d,U as b,V as L,R as B,A as N,E as r,a9 as T,aa as v,b0 as F,ac as R,af as j,S as z}from"./index.e9245a9e.js";const A={class:"flex md:flex-nowrap gap-2 break-all"},U={class:"w-full md:max-w-[200px] min-w-[200px]"},D={key:0,class:"relative"},G={class:"card rounded-md flex flex-col py-2 px-3 mb-1 mt-1"},K={class:"font-semibold text-xs"},O={class:"font-semibold text-xs"},H={class:"font-semibold text-xxs"},M={class:"grid gap-1 my-1"},W={class:"flex items-center justify-between w-full"},q={class:"flex items-center w-full"},J={class:"ml-4 md:text-md font-bold pt-1.5"},X={class:"w-full overflow-hidden"},Y={class:"card px-3 py-2"},Z={class:"flex flex-col w-full md:max-w-[250px] min-w-[250px]"},ae=k({__name:"customer-view",props:{id:String},setup(h){$();const f=_("$api");_("$me");const y=h,e=I({loading:!0,timeout:null,tabsList:[{label:"Seguimiento",value:"history",icon:"list"},{label:"Prescripciones",value:"prescription",icon:"list"}],tabs:[{label:"Editar Cliente",value:"edit",icon:"fa-duotone fa-solid fa-user-pen",visible:1},{label:"Archivos",value:"file",icon:"fa-duotone fa-solid fa-image",visible:1}],tab:"edit",tabList:"history",item:{},dialogWrite:!1,dialogPassword:!1});async function m(){e.item=await f.get(`customer/${y.id}`),e.loading=!1}async function w(){try{const o=await f.delete(`file/${e.item.profile.id}`,{data:{ref_key:"t_customer",ref_id:e.item.id}})}catch(o){console.log(o)}}const g=C();return Q(()=>g.table.t_customer,o=>{o.id===e.item.id&&m()},{deep:!0}),V(()=>{m()}),(o,u)=>(i(),n(z,{class:"px-1.5 py-2 lg:px-5 lg:py-6"},{default:l(()=>[t("div",A,[t("div",U,[e.item.profile?(i(),c("div",D,[a(E,{class:"card w-full max-h-[128px] object-contain",src:e.item.profile.url,"spinner-color":"white"},null,8,["src"]),a(p,{flat:"",class:"absolute top-0 right-0 button-icon bg-primary text-white rounded-md",size:"sm","no-caps":"",onClick:w,icon:"fa-solid fa-xmark"},{default:l(()=>[a(P,{class:"bg-default text-black text-xs"},{default:l(()=>[S("Remover Linea")]),_:1})]),_:1})])):(i(),n(x,{key:1,ref_id:e.item.id,table:"t_customer",icon:"fa-duotone fa-solid fa-camera-retro",avaliable_file_text:!1,text:"Subir foto de perfil",file_type:"FOTO PERFIL"},null,8,["ref_id"])),t("div",G,[t("div",K,"#"+d(e.item.code),1),t("div",O,d(e.item.description),1),t("div",H,d(e.item.ident_no),1)]),t("div",M,[(i(!0),c(b,null,L(e.tabs,s=>(i(),c(b,{key:s.value},[s.visible?(i(),n(p,{key:0,class:B(["button-tab hover:shadow-left-secondary w-full text-xs",e.tab==s.value&&"shadow-left-secondary bg-primary text-white"]),align:"left",unelevated:"",onClick:ee=>e.tab=s.value},{default:l(()=>[t("div",W,[t("div",q,[a(N,{name:s.icon},null,8,["name"]),t("span",J,d(s.label),1)])])]),_:2},1032,["onClick","class"])):r("",!0)],64))),128))])]),t("div",X,[e.loading?r("",!0):(i(),n(T,{key:0,modelValue:e.tab,"onUpdate:modelValue":u[0]||(u[0]=s=>e.tab=s),class:"bg-transparent"},{default:l(()=>[a(v,{name:"edit",class:"p-0"},{default:l(()=>[t("div",Y,[a(F,{isEdit:"",id:e.item.id,width:"100%"},null,8,["id"])])]),_:1}),a(v,{name:"file",class:"p-0"},{default:l(()=>[a(x,{ref_id:e.item.id,table:"t_customer",file_type:"GENERAL"},null,8,["ref_id"]),a(R,{refId:e.item.id,refKey:"t_customer"},null,8,["refId"])]),_:1})]),_:1},8,["modelValue"]))]),t("div",Z,[e.loading?r("",!0):(i(),n(j,{key:0,refKey:"t_customer",refId:e.item.id},null,8,["refId"]))])])]),_:1}))}});export{ae as default};
