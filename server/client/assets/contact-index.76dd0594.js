import{t as d,G as m,y as o,z as t,C as U,x as s,T as W,H as r,U as y,V as x,F as p,az as E,r as N,l as T,n as _,q as L,a_ as j,k as F,w as A,v as h,Q as M,A as C,B as b,E as $,D as V,I as G,J as H,aC as v,K as J,L as D,M as q,b6 as I,R as K,S as O}from"./index.29778d79.js";const X={bordered:"",flat:"",class:"card pb-2 relative flex flex-col justify-between"},Y={class:"flex flex-nowrap"},Z={class:"absolute right-3 top-2"},ee=["src"],te={class:"pl-3 pr-8 w-full pt-2 flex flex-col overflow-hidden text-xs line-clamp-1"},le={class:"text-uppercase font-bold"},ae=o("div",{class:"bg-default rounded-md text-center font-bold mb-1"},"Proveedores",-1),se={class:"flex ml-auto gap-2 pr-3 mt-2"},oe={__name:"ContactCard",props:{item:{}},setup(f){return(u,n)=>(d(),m("div",X,[o("div",Y,[o("div",Z,[t(U,{dense:"",modelValue:f.item.selected,"onUpdate:modelValue":n[0]||(n[0]=g=>f.item.selected=g),label:f.item.row.name},null,8,["modelValue","label"])]),t(W,{rounded:"",size:"48px",class:"p-2"},{default:s(()=>[o("img",{src:u.$imageInsuredPlaceholder(f.item.row.sex)},null,8,ee)]),_:1}),o("div",te,[o("span",le,r(f.item.row.description),1),o("span",null,r(f.item.row.contact_type),1),o("span",null,r(f.item.row.contact_position),1),ae,(d(!0),m(y,null,x(f.item.row.provider,g=>(d(),m("div",{class:"flex flex-col text-xs gap-0.5",key:g.id},[o("div",null,r(g.description),1)]))),128))])]),o("div",se,[t(p,{flat:"",class:"button bg-default text-primary rounded-md",label:"Editar","no-caps":"",onClick:n[1]||(n[1]=g=>u.$emit("selectedId",f.item.row.id))}),t(p,{flat:"",class:"button bg-default text-primary rounded-md",label:"consultar","no-caps":"",onClick:n[2]||(n[2]=g=>u.$router.push(`${u.$path.contact}/${u.$path.contact_consult}/${f.item.row.id}`))})])]))}},ie={class:"flex justify-between md:flex-nowrap mb-2"},ne={class:"flex flex-nowrap w-full gap-2"},de={key:0,class:"grid grid-flow-col auto-cols-max gap-2"},re={class:"full-width row flex-center text-primary q-gutter-sm"},ue={class:"flex flex-col"},ce={class:"subtitle text-xs"},pe={key:0},fe={class:"subtitle text-xs mb-1"},me={class:"flex flex-col"},ge={class:"line-clamp-1"},be={class:"flex gap-2"},ve={__name:"contact-index",setup(f){const{t:u}=E(),n=N(),g=T("$cats"),Q=_({attention_type:g.value.attention_type}),a=_({dialogWrite:!1,dialogList:!1,dialogCreate:!1,selectedId:0,dialogWidth:400,selected:[],search:"",search_key:"orlike:description",pagination:{sortBy:"description",descending:!1,page:1,rowsPerPage:20},url:"contact",query:{groupBy:["t_contact.id"],where:{c_status:4}},columns:[{name:"action",required:!0,label:"",align:"left",field:u("id"),classes:"w-[220px]"},{name:"description",required:!0,label:u("name"),align:"left",field:"description",sortable:!0,classes:"w-[220px]"},{name:"contact_type",required:!0,label:u("contact_type"),align:"left",field:"contact_type",sortable:!0,classes:"w-[100px]"},{name:"contact_position",required:!0,label:u("contact_position"),align:"left",field:"contact_position",sortable:!0,classes:"w-[220px]"},{name:"provider",required:!0,label:u("providers"),align:"left",field:"provider",sortable:!0},{name:"city",required:!0,label:u("city"),align:"left",field:"city",sortable:!0}],rows:[]}),{onRequest:S,getSelectedString:P,onDeleteRows:R,addMore:z,itemsRange:k}=L(a,n);j(Q);const B=F();return A(()=>B.table.t_contact,i=>{n.value.requestServerInteraction(),n.value.clearSelection()},{deep:!0}),(i,l)=>(d(),h(O,{class:K(i.insuredId?"px-2 py-3":"px-1.5 py-2 lg:px-5 lg:py-6")},{default:s(()=>[o("div",ie,[o("div",ne,[t(M,{class:"w-full md:w-auto",dense:"",outlined:"",debounce:"300",modelValue:a.search,"onUpdate:modelValue":l[0]||(l[0]=e=>a.search=e),placeholder:i.$t("search")},{append:s(()=>[t(C,{name:"search"})]),_:1},8,["modelValue","placeholder"]),t(p,{flat:"",class:"button h-full",icon:"add",label:i.$isDesktop&&i.$t("add"),onClick:l[1]||(l[1]=e=>a.dialogCreate=!0)},null,8,["label"]),a.selected.length?(d(),h(p,{key:0,flat:"",class:"button h-full bg-primary text-white","icon-right":"sym_o_remove",label:i.$isDesktop?"Remover":"","no-caps":"",onClick:b(R)},null,8,["label","onClick"])):$("",!0)]),i.$isDesktop?(d(),m("div",de,[t(p,{class:"bg-transparent",flat:"","no-caps":""},{default:s(()=>[V(r(b(k).start)+" - "+r(b(k).end)+" de "+r(a.pagination.rowsNumber),1)]),_:1}),t(p,{class:"bg-transparent",icon:"sym_o_first_page",flat:"",onClick:l[2]||(l[2]=e=>n.value.firstPage())}),t(p,{class:"bg-transparent",icon:"sym_o_navigate_before",flat:"",onClick:l[3]||(l[3]=e=>n.value.prevPage())}),t(p,{class:"bg-transparent",icon:"sym_o_navigate_next",flat:"",onClick:l[4]||(l[4]=e=>n.value.nextPage())}),t(p,{class:"bg-transparent",icon:"sym_o_last_page",flat:"",onClick:l[5]||(l[5]=e=>n.value.lastPage())})])):$("",!0)]),t(G,{grid:!i.$isDesktop,"hide-pagination":"",rows:a.rows,columns:a.columns,"row-key":"id",ref_key:"tableRef",ref:n,onRequest:b(S),flat:"",selection:"multiple",pagination:a.pagination,"onUpdate:pagination":l[7]||(l[7]=e=>a.pagination=e),selected:a.selected,"onUpdate:selected":l[8]||(l[8]=e=>a.selected=e),"selected-rows-label":b(P),loading:a.loading,"rows-per-page-label":"Lineas","wrap-cells":!0},H({"no-data":s(({icon:e,message:c,filter:w})=>[o("div",re,[o("span",null,r(c),1),t(C,{size:"2em",name:w?"filter_b_and_w":e},null,8,["name"])])]),"body-cell-description":s(e=>[t(v,{props:e},{default:s(()=>[o("div",ue,[o("div",null,r(e.row.description),1)])]),_:2},1032,["props"])]),"body-cell-speciality":s(e=>[t(v,{props:e},{default:s(()=>[(d(!0),m(y,null,x(e.row.speciality,c=>(d(),m("div",{class:"flex flex-col",key:c.id},[o("div",ce,r(c.description),1),(d(!0),m(y,null,x(c.sub,w=>(d(),m("ul",{class:"flex flex-col list-inside text-xxs mt-1",key:w.id},[w.checked?(d(),m("li",pe,r(w.description),1)):$("",!0)]))),128))]))),128))]),_:2},1032,["props"])]),"body-cell-provider":s(e=>[t(v,{props:e},{default:s(()=>[(d(!0),m(y,null,x(e.row.provider,c=>(d(),m("div",{class:"flex flex-col",key:c.id},[o("div",fe,r(c.description),1)]))),128))]),_:2},1032,["props"])]),"body-cell-bio":s(e=>[t(v,{props:e},{default:s(()=>[o("div",me,[o("div",ge,r(e.row.bio),1)])]),_:2},1032,["props"])]),"body-cell-action":s(e=>[t(v,{props:e},{default:s(()=>[o("div",be,[t(p,{flat:"",class:"button bg-default text-primary rounded-md",label:"Editar","no-caps":"",onClick:c=>{a.selectedId=e.row.id,a.dialogWrite=!0}},null,8,["onClick"]),t(p,{flat:"",class:"button bg-default text-primary rounded-md",label:"consultar","no-caps":"",onClick:c=>i.$router.push(`${i.$path.contact}/${i.$path.contact_consult}/${e.row.id}`)},null,8,["onClick"])])]),_:2},1032,["props"])]),item:s(e=>[o("div",{class:"q-py-xs col-xs-12 col-sm-6 col-md-4",style:J(e.selected?"transform: scale(0.95);":"")},[t(oe,{item:e,onSelectedId:l[6]||(l[6]=c=>{a.selectedId=c,a.dialogWrite=!0})},null,8,["item"])],4)]),_:2},[i.$isDesktop?void 0:{name:"bottom",fn:s(()=>[t(p,{flat:"",class:"button bg-primary-light w-full","no-caps":"",onClick:b(z)},{default:s(()=>[V("Cargar m\xE1s")]),_:1},8,["onClick"])]),key:"0"}]),1032,["grid","rows","columns","onRequest","pagination","selected","selected-rows-label","loading"]),t(D,{class:"q-pa-none",modelValue:a.dialogWrite,"onUpdate:modelValue":l[10]||(l[10]=e=>a.dialogWrite=e),position:i.$isDesktop?"right":"standard","full-height":"","full-width":i.$isDesktop,maximized:"","transition-duration":100},{default:s(()=>[t(q,null,{default:s(()=>[t(I,{onClose:l[9]||(l[9]=e=>a.dialogWrite=!1),isDrawer:"",id:a.selectedId,isEdit:"",width:i.$isDesktop?"1000px":"100%"},null,8,["id","width"])]),_:1})]),_:1},8,["modelValue","position","full-width"]),t(D,{modelValue:a.dialogCreate,"onUpdate:modelValue":l[12]||(l[12]=e=>a.dialogCreate=e),position:i.$isDesktop?"right":"standard","full-height":"",maximized:"","transition-duration":100},{default:s(()=>[t(q,null,{default:s(()=>[t(I,{onClose:l[11]||(l[11]=e=>a.dialogCreate=!1),isDrawer:"",width:i.$isDesktop?"1000px":"100%"},null,8,["width"])]),_:1})]),_:1},8,["modelValue","position"])]),_:1},8,["class"]))}};export{ve as default};
