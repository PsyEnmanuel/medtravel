import{az as b,m as f,l as y,n as x,$ as _,t as r,v as m,x as t,z as l,I as v,aB as I,aC as u,D as V,H as $,G as k,U as C,V as Q,C as B,R as P,S as T}from"./index.eccc4231.js";const z={__name:"permission-index",setup(U){const{t:c}=b(),d=f(),i=y("$api"),a=x({permission:{},tables:{},columns:[{name:"label",label:"Tabla",field:"label",classes:"w-[100px]",align:"left"}],rows:[],pagination:{sortBy:"",descending:!1,page:1,rowsPerPage:100}});_(async()=>{a.tables=await i.get("/permission/tables"),a.permission=await i.get("permission");for(const s in a.permission.items)if(Object.prototype.hasOwnProperty.call(a.permission.items,s)){const n=a.permission[s];a.columns.push({name:s,label:c(s),field:n,align:"center"})}a.rows=a.tables.tables_unixperms});async function w(s,n,e){e.row[s]?e.row.value=parseInt(e.row.value)+parseInt(n):e.row.value=parseInt(e.row.value)-parseInt(n),i.put("permission/unixperms",[{c_unixperms:e.row.value,table:e.row.label}]),d.notify({type:"success",message:"Permiso de Unixperms actualizado"})}return(s,n)=>(r(),m(T,{class:P(s.$isDesktop?s.insuredId?"px-2 py-3":"px-1.5 py-2 lg:px-5 lg:py-6":"px-1.5 py-2")},{default:t(()=>[l(v,{class:"overflow-auto",pagination:a.pagination,"onUpdate:pagination":n[0]||(n[0]=e=>a.pagination=e),flat:"",rows:a.rows,columns:a.columns,"row-key":"name",separator:"vertical"},{body:t(e=>[l(I,{props:e},{default:t(()=>[l(u,{key:"label",props:e},{default:t(()=>[V($(s.$t(e.row.label)),1)]),_:2},1032,["props"]),(r(!0),k(C,null,Q(a.permission.items,(g,o)=>(r(),m(u,{key:o,props:e},{default:t(()=>[l(B,{modelValue:e.row[o],"onUpdate:modelValue":[p=>e.row[o]=p,p=>w(o,g,e)]},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),_:1},8,["pagination","rows","columns"])]),_:1},8,["class"]))}};export{z as default};
