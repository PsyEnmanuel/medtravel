import{az as Q,r as S,n as B,q as R,k as z,w as U,aB as W,t as d,v as y,x as n,y as s,z as t,Q as T,A as v,F as i,B as m,E as c,G as f,D as p,H as r,I as E,J as N,aC as k,K as L,C as j,L as h,M as $,aD as x,R as A,S as M}from"./index.1c9c82ce.js";const F={class:"flex justify-between md:flex-nowrap mb-2"},G={class:"flex flex-nowrap w-full gap-2"},H={key:0,class:"grid grid-flow-col auto-cols-max gap-2"},J={class:"full-width row flex-center text-primary q-gutter-sm"},K={class:"flex flex-col"},O={key:0},X=s("b",{class:"text-primary"},"Planes:",-1),Y={key:1},Z=s("b",{class:"text-primary"},"Tipo de planes:",-1),ee={class:"flex gap-2"},te={bordered:"",flat:"",class:"card pb-2 relative flex flex-nowrap"},ae={class:"absolute right-3 top-2"},le={class:"pl-3 pr-8 w-full pt-2 flex flex-col overflow-hidden"},se={class:"text-uppercase line-clamp-1 font-semibold"},oe={key:0},ne=s("b",{class:"text-primary"},"Planes:",-1),ie={key:1},re=s("b",{class:"text-primary"},"Tipo de planes:",-1),de={key:2},ue=s("b",{class:"text-primary"},"P\xF3lizas:",-1),ce={key:3},pe=s("b",{class:"text-primary"},"Asegurados:",-1),fe={class:"flex justify-end gap-2 -mr-5 mt-1"},ge={__name:"insurance-index",setup(me){const{t:g}=Q(),u=S(),a=B({dialogWrite:!1,dialogList:!1,dialogCreate:!1,selectedId:0,dialogWidth:400,selected:[],search:"",search_key:"orlike:description,insurance_plan,insurance_plan_type",pagination:{sortBy:"description",descending:!1,page:1,rowsPerPage:20},url:"insurance",query:{groupBy:["t_insurance.id"],where:{c_status:4}},columns:[{name:"action",required:!0,label:"",align:"left",field:g("id"),classes:"w-[220px]"},{name:"description",required:!0,label:g("name"),align:"left",field:"description",sortable:!0},{name:"total_policy",required:!0,label:g("policy"),align:"left",field:"total_policy",sortable:!0},{name:"total_insured",required:!0,label:g("insureds"),align:"left",field:"total_insured",sortable:!0}],rows:[]}),{onRequest:C,getSelectedString:D,onDeleteRows:V,addMore:q,itemsRange:b}=R(a,u),I=z();return U(()=>I.table.t_insurance,o=>{u.value.requestServerInteraction(),u.value.clearSelection()},{deep:!0}),(o,l)=>{const w=W("router-link");return d(),y(M,{class:A(o.insuredId?"px-2 py-3":"px-1.5 py-2 lg:px-5 lg:py-6")},{default:n(()=>[s("div",F,[s("div",G,[t(T,{class:"w-full md:w-auto",dense:"",outlined:"",debounce:"300",modelValue:a.search,"onUpdate:modelValue":l[0]||(l[0]=e=>a.search=e),placeholder:o.$t("search")},{append:n(()=>[t(v,{name:"search"})]),_:1},8,["modelValue","placeholder"]),t(i,{flat:"",class:"button h-full",icon:"add",label:o.$isDesktop&&o.$t("add"),onClick:l[1]||(l[1]=e=>a.dialogCreate=!0)},null,8,["label"]),a.selected.length?(d(),y(i,{key:0,flat:"",class:"button h-full bg-primary text-white","icon-right":"sym_o_remove",label:o.$isDesktop?"Remover":"","no-caps":"",onClick:m(V)},null,8,["label","onClick"])):c("",!0)]),o.$isDesktop?(d(),f("div",H,[t(i,{class:"bg-transparent",flat:"","no-caps":""},{default:n(()=>[p(r(m(b).start)+" - "+r(m(b).end)+" de "+r(a.pagination.rowsNumber),1)]),_:1}),t(i,{class:"bg-transparent",icon:"sym_o_first_page",flat:"",onClick:l[2]||(l[2]=e=>u.value.firstPage())}),t(i,{class:"bg-transparent",icon:"sym_o_navigate_before",flat:"",onClick:l[3]||(l[3]=e=>u.value.prevPage())}),t(i,{class:"bg-transparent",icon:"sym_o_navigate_next",flat:"",onClick:l[4]||(l[4]=e=>u.value.nextPage())}),t(i,{class:"bg-transparent",icon:"sym_o_last_page",flat:"",onClick:l[5]||(l[5]=e=>u.value.lastPage())})])):c("",!0)]),t(E,{grid:!o.$isDesktop,"hide-pagination":"",rows:a.rows,columns:a.columns,"row-key":"id",ref_key:"tableRef",ref:u,onRequest:m(C),flat:"",selection:"multiple",pagination:a.pagination,"onUpdate:pagination":l[6]||(l[6]=e=>a.pagination=e),selected:a.selected,"onUpdate:selected":l[7]||(l[7]=e=>a.selected=e),"selected-rows-label":m(D),loading:a.loading,"rows-per-page-label":"Lineas","wrap-cells":!0},N({"no-data":n(({icon:e,message:_,filter:P})=>[s("div",J,[s("span",null,r(_),1),t(v,{size:"2em",name:P?"filter_b_and_w":e},null,8,["name"])])]),"body-cell-description":n(e=>[t(k,{props:e},{default:n(()=>[s("div",K,[s("div",null,r(e.row.description),1),e.row.insurance_plan_format?(d(),f("div",O,[X,p(" "+r(e.row.insurance_plan_format),1)])):c("",!0),e.row.insurance_plan_type_format?(d(),f("div",Y,[Z,p(" "+r(e.row.insurance_plan_type_format),1)])):c("",!0)])]),_:2},1032,["props"])]),"body-cell-action":n(e=>[t(k,{props:e},{default:n(()=>[s("div",ee,[t(i,{flat:"",class:"button bg-default text-primary rounded-md",label:"Editar","no-caps":"",onClick:_=>{a.selectedId=e.row.id,a.dialogWrite=!0}},null,8,["onClick"]),t(w,{to:`${o.$path.insurance}/${o.$path.insurance_consult}/${e.row.id}`},{default:n(()=>[t(i,{flat:"",class:"button bg-default text-primary rounded-md",label:"consultar","no-caps":""})]),_:2},1032,["to"])])]),_:2},1032,["props"])]),item:n(e=>[s("div",{class:"q-py-xs col-xs-12 col-sm-6 col-md-4",style:L(e.selected?"transform: scale(0.95);":"")},[s("div",te,[s("div",ae,[t(j,{dense:"",modelValue:e.selected,"onUpdate:modelValue":_=>e.selected=_,label:e.row.name},null,8,["modelValue","onUpdate:modelValue","label"])]),s("div",le,[s("span",se,r(e.row.description),1),e.row.insurance_plan_format?(d(),f("div",oe,[ne,p(" "+r(e.row.insurance_plan_format),1)])):c("",!0),e.row.insurance_plan_type_format?(d(),f("div",ie,[re,p(" "+r(e.row.insurance_plan_type_format),1)])):c("",!0),e.row.total_policy?(d(),f("div",de,[ue,p(" "+r(e.row.total_policy),1)])):c("",!0),e.row.total_insured?(d(),f("div",ce,[pe,p(" "+r(e.row.total_insured),1)])):c("",!0),s("div",fe,[t(i,{flat:"",class:"button bg-default text-primary rounded-md",label:"Editar","no-caps":"",onClick:_=>{a.selectedId=e.row.id,a.dialogWrite=!0}},null,8,["onClick"]),t(w,{to:`${o.$path.insurance}/${o.$path.insurance_consult}/${e.row.id}`},{default:n(()=>[t(i,{flat:"",class:"button bg-default text-primary rounded-md",label:"consultar","no-caps":""})]),_:2},1032,["to"])])])])],4)]),_:2},[o.$isDesktop?void 0:{name:"bottom",fn:n(()=>[t(i,{flat:"",class:"button bg-primary-light w-full","no-caps":"",onClick:m(q)},{default:n(()=>[p("Cargar m\xE1s")]),_:1},8,["onClick"])]),key:"0"}]),1032,["grid","rows","columns","onRequest","pagination","selected","selected-rows-label","loading"]),t(h,{class:"q-pa-none",modelValue:a.dialogWrite,"onUpdate:modelValue":l[9]||(l[9]=e=>a.dialogWrite=e),position:o.$isDesktop?"right":"standard","full-height":"","full-width":o.$isDesktop,maximized:"","transition-duration":100},{default:n(()=>[t($,null,{default:n(()=>[t(x,{onClose:l[8]||(l[8]=e=>a.dialogWrite=!1),isDrawer:"",id:a.selectedId,isEdit:"",width:o.$isDesktop?"1000px":"100%"},null,8,["id","width"])]),_:1})]),_:1},8,["modelValue","position","full-width"]),t(h,{modelValue:a.dialogCreate,"onUpdate:modelValue":l[11]||(l[11]=e=>a.dialogCreate=e),position:o.$isDesktop?"right":"standard","full-height":"",maximized:"","transition-duration":100},{default:n(()=>[t($,null,{default:n(()=>[t(x,{onClose:l[10]||(l[10]=e=>a.dialogCreate=!1),isDrawer:"",width:o.$isDesktop?"1000px":"100%"},null,8,["width"])]),_:1})]),_:1},8,["modelValue","position"])]),_:1},8,["class"])}}};export{ge as default};
