import{az as j,bk as Y,l as _,$ as x,t as b,G as M,aA as E,aj as v,ah as d,aq as L,n as D,bl as Q,w as k,bm as U,bn as B,bo as S,bp as $,bq as V,y as m,z as n,x as c,A as C,b2 as A,b3 as O,Q as z,aF as T,_ as N,an as G,br as P,bs as R,D as W,aJ as F,v as q,E as H,j as J}from"./index.e9245a9e.js";const K=["id"],X={__name:"ChartBarVertical",props:{data:Object,title:String,name:String,subtitle:String},setup(p){const{t:g}=j(),t=p,h=Y(Object.keys(t.data).length),r=_("$isDesktop");function w(){const e=document.getElementById(t.name),u=E(e),s={data:[],legend:[]};let y=0;for(const l in t.data){if(t.data.hasOwnProperty(l)){const a=t.data[l];s.data.push({value:a.length,name:g(l),itemStyle:{color:h[y]}}),s.legend.push(g(l))}y++}const f={title:{text:t.title,subtext:t.subtitle,left:"center",top:20,textStyle:{fontSize:r?22:16},subtextStyle:{fontSize:r?14:12}},grid:{left:"3%",right:50,top:r?100:130,containLabel:!0,height:"auto"},toolbox:{show:!0,orient:"horizontal",itemSize:r?25:20,feature:{saveAsImage:{pixelRatio:1.75,show:!0,title:"Descargar Gr\xE1fico"}}},yAxis:{type:"value"},xAxis:{type:"category",data:s.legend},tooltip:{trigger:"item"},series:[{name:t.title,data:s.data,type:"bar",barGap:0,smooth:!0,avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!0,position:"top",backgroundColor:"#fff",padding:4,borderRadius:4,formatter:l=>l.value.length}}]};f&&u.setOption(f),window.addEventListener("resize",function(){u.resize()})}return x(()=>{w()}),(e,u)=>(b(),M("div",{id:p.name,style:{height:"500px",width:"100%"}},null,8,K))}},Z=["id"],I={__name:"ChartPie",props:{data:Object,title:String,name:String,subtitle:String,from:String,to:String},setup(p){const{t:g}=j(),t=p,h=Y(Object.keys(t.data).length),r=_("$isDesktop");function w(){const e=document.getElementById(t.name),u=E(e),s={data:[],legend:[],subtitle:`${t.subtitle}`};t.from&&t.to&&t.from===t.to?s.subtitle+=` ${t.from}`:t.from&&t.to?s.subtitle+=` (${t.from} - ${t.to})`:t.from?s.subtitle+=` ${t.from}`:t.to&&(s.subtitle+=` ${t.to}`);let y=0;for(const l in t.data)if(Object.hasOwnProperty.call(t.data,l)){const a=t.data[l];s.data.push({value:a,name:g(l.toUpperCase()),itemStyle:{color:h[y]}}),s.legend.push(a),y++}const f={title:{text:t.title.toUpperCase(),subtext:s.subtitle.toUpperCase(),left:"center",top:20,textStyle:{fontSize:r?22:16,textTransform:"uppercase"},subtextStyle:{fontSize:r?14:12,textTransform:"uppercase"}},grid:{left:"3%",right:50,top:r?100:130,containLabel:!0,height:"auto"},toolbox:{show:!0,orient:"horizontal",itemSize:r?25:20,feature:{saveAsImage:{pixelRatio:1.75,show:!0,title:"Descargar Gr\xE1fico"}}},legend:{bottom:"5%",left:"center"},tooltip:{trigger:"item"},series:[{name:t.title,data:s.data,type:"pie",radius:["40%","70%"],smooth:!0,avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!!r,position:"insideBottomLeft",backgroundColor:"#fff",padding:4,borderRadius:4,formatter:l=>l.name}}]};f&&u.setOption(f),window.addEventListener("resize",function(){u.resize()})}return x(()=>{w()}),(e,u)=>(b(),M("div",{id:p.name,style:{height:"500px",width:"100%"}},null,8,Z))}},ee={key:0},te=m("div",{class:"subtitle mb-2 text-center"},"Estad\xEDsticas Asegurados",-1),ae={class:"grid md:grid-cols-2 gap-2 mb-1"},oe={class:"grid grid-cols-2 gap-2"},re={class:"w-full"},se={class:"grid lg:grid-cols-3 gap-1 mb-1"},le={class:"grid grid-cols-1 gap-2"},ne={class:"card"},ie={class:"card"},de={class:"card"},ce={__name:"chart-insured",setup(p){_("$cats");const g=v(new Date),t=d(g,"MMMM",{locale:J}),h=L(new Date),r=_("$api"),w=D({languages:Q.filter(a=>a.available)}),e=D({quickDate:5,dialogDiagnosisTable:!1,searchDiagnosis:null,searchProcedure:null,loading:!0,first:!0,update:1,tab:"diagnosis",tabs:[{name:"diagnosis",label:"Diagn\xF3stico"},{name:"age",label:"Edad"},{name:"cities",label:"Ciudad"},{name:"sex",label:"Sexo"}],day:h,stats:{},diagnosis:[],diagnosisList:[],mprocedureList:[],treatment:[],month:t,start:"all",query:{group_by:"t_insured.id",where:{$sex_id:null,"jc:language_ids":[],created:{from:null,to:null},c_status:[4]}},columns:[{name:"action",required:!0,label:"Acciones",align:"left",field:"action",classes:"w-[150px]"},{name:"description",required:!0,label:"Nombre",align:"left",field:"description"},{name:"quantity",required:!0,label:"Cantidad",align:"left",field:"quantity"}],insuredsTableTitle:null,insuredsTable:[],columnsDiagnosis:[{name:"action",required:!0,label:"Acciones",align:"left",field:"action",classes:"w-[150px]"},{name:"description",required:!0,label:"Nombre",align:"left",field:"description"},{name:"sex",required:!0,label:"Sexo",align:"left",field:"sex"},{name:"age",required:!0,label:"Edad",align:"left",field:"age"}]});k(()=>e.quickDate,a=>{switch(a){case 0:e.query.where.created.from=d(new Date,"dd/MM/yyyy"),e.query.where.created.to=d(new Date,"dd/MM/yyyy");break;case 1:e.query.where.created.from=d(V(),"dd/MM/yyyy"),e.query.where.created.to=d(V(),"dd/MM/yyyy");break;case 2:e.query.where.created.from=d(v(new Date),"dd/MM/yyyy"),e.query.where.created.to=d($(new Date),"dd/MM/yyyy");break;case 3:e.query.where.created.from=d(S(v(new Date),1),"dd/MM/yyyy"),e.query.where.created.to=d(S($(new Date),1),"dd/MM/yyyy");break;case 4:e.query.where.created.from=d(U(new Date),"dd/MM/yyyy"),e.query.where.created.to=d(B(new Date),"dd/MM/yyyy");break;case 5:e.query.where.created.from=null,e.query.where.created.to=null;break}});async function u(){e.stats=await r.get("insured/stats",{params:e.query}),++e.update}function s(a){try{e.query.where["js:policies|insurance_id"]=[a]}catch(o){console.log(o)}}function y(){try{e.query.where["js:policies|insurance_id"]=null}catch(a){console.log(a)}}async function f(a){try{e.query.where.country_id=a}catch(o){console.log(o)}}function l(){try{e.query.where.country_id=null}catch(a){console.log(a)}}return k(()=>e.query.where,a=>{u()},{deep:!0}),x(async()=>{await u(),e.loading=!1}),(a,o)=>e.loading?H("",!0):(b(),M("div",ee,[te,m("div",ae,[m("div",oe,[n(z,{dense:"",outlined:"",modelValue:e.query.where.created.from,"onUpdate:modelValue":o[2]||(o[2]=i=>e.query.where.created.from=i),mask:"##-##-####"},{append:c(()=>[n(C,{name:"event",class:"cursor-pointer"},{default:c(()=>[n(A,{ref:"proxy"},{default:c(()=>[n(O,{flat:"",modelValue:e.query.where.created.from,"onUpdate:modelValue":[o[0]||(o[0]=i=>e.query.where.created.from=i),o[1]||(o[1]=i=>a.$refs.proxy.hide())],"no-unset":"","years-in-month-view":"",minimal:"",mask:"DD-MM-YYYY"},null,8,["modelValue"])]),_:1},512)]),_:1})]),_:1},8,["modelValue"]),n(z,{dense:"",outlined:"",modelValue:e.query.where.created.to,"onUpdate:modelValue":o[5]||(o[5]=i=>e.query.where.created.to=i),mask:"##-##-####"},{append:c(()=>[n(C,{name:"event",class:"cursor-pointer"},{default:c(()=>[n(A,{ref:"proxy"},{default:c(()=>[n(O,{flat:"",modelValue:e.query.where.created.to,"onUpdate:modelValue":[o[3]||(o[3]=i=>e.query.where.created.to=i),o[4]||(o[4]=i=>a.$refs.proxy.hide())],"no-unset":"","years-in-month-view":"",minimal:"",mask:"DD-MM-YYYY"},null,8,["modelValue"])]),_:1},512)]),_:1})]),_:1},8,["modelValue"])])]),m("div",re,[n(T,{class:"flex",size:"sm",modelValue:e.quickDate,"onUpdate:modelValue":o[6]||(o[6]=i=>e.quickDate=i),"toggle-color":"secondary","toggle-text-color":"text-font",options:[{label:"Hoy",value:0},{label:"Ayer",value:1},{label:"Mes Actual",value:2},{label:"Mes Anterior",value:3},{label:"A\xF1o Actual",value:4},{label:"Todas",value:5}],type:"radio"},null,8,["modelValue"])]),m("div",se,[n(N,{onSetInsurance:s,onClearInsurance:y,"model-value":e.query.where.insurance},null,8,["model-value"]),n(G,{onSetCountry:f,onClearCountry:l,"model-value":e.query.where.country},null,8,["model-value"]),n(F,{dense:"",outlined:"",clearable:"",modelValue:e.query.where["jc:language_ids"],"onUpdate:modelValue":o[7]||(o[7]=i=>e.query.where["jc:language_ids"]=i),label:a.$t("languages"),multiple:"",options:w.languages,"option-value":"value","option-label":"label","emit-value":"","map-options":""},{"no-option":c(()=>[n(P,null,{default:c(()=>[n(R,{class:"text-grey"},{default:c(()=>[W(" No data ")]),_:1})]),_:1})]),_:1},8,["modelValue","label","options"])]),m("div",le,[m("div",ne,[(b(),q(I,{key:e.update,data:e.stats.sex,name:"sex",title:"Sexo",subtitle:"Asegurados"},null,8,["data"]))]),m("div",ie,[(b(),q(X,{key:e.update,data:e.stats.ages_range,name:"age",title:"Edad",subtitle:"Asegurados"},null,8,["data"]))]),m("div",de,[(b(),q(I,{key:e.update,data:e.stats.insurances,name:"insurance",title:"Seguros M\xE9dicos",subtitle:"Asegurados"},null,8,["data"]))])])]))}};export{ce as default};
