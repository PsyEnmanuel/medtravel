import{l as p,m as g,n as w,$ as f,t as i,G as c,z as n,x as o,aK as v,aC as b,D as _,H as y,U as $,V as k,v as x,C as V,I as B}from"./index.49e59f77.js";const Q={__name:"accessrole-index",props:{table:Object,role:Object},setup(C){const r=p("$api"),d=g(),a=w({table:[],role:[],columns:[],rows:[],pagination:{sortBy:"",descending:!1,page:1,rowsPerPage:100}});f(async()=>{a.tables=await r.get("/permission/tables"),a.role=await r.get("role"),a.columns=a.role.items.reduce((t,e)=>(t.push({name:e.label,label:`${e.label} (${e.value})`,field:e.label,align:"center"}),t),[{name:"label",label:"TABLA",field:"label",classes:"w-[100px]",align:"left"}]),a.rows=a.tables.tables_roles});async function m(t,e){e.row[t.label]?e.row.value=parseInt(e.row.value)+parseInt(t.value):e.row.value=parseInt(e.row.value)-parseInt(t.value),r.put("permission/roles-permission",[{c_group:e.row.value,table:e.row.label}]),d.notify({type:"success",message:"Permiso de Role actualizado"})}return(t,e)=>(i(),c("div",null,[n(B,{pagination:a.pagination,"onUpdate:pagination":e[0]||(e[0]=l=>a.pagination=l),flat:"",rows:a.rows,columns:a.columns,"row-key":"name",separator:"vertical"},{body:o(l=>[n(v,{props:l},{default:o(()=>[n(b,{key:"label",props:l},{default:o(()=>[_(y(t.$t(l.row.label)),1)]),_:2},1032,["props"]),(i(!0),c($,null,k(a.role.items,s=>(i(),x(b,{key:s.label,props:l},{default:o(()=>[n(V,{modelValue:l.row[s.label],"onUpdate:modelValue":[u=>l.row[s.label]=u,u=>m(s,l)]},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),_:1},8,["pagination","rows","columns"])]))}};export{Q as default};
