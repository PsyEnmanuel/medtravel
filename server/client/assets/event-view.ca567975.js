import{r as j,l as h,n as $,$ as A,k as L,w as M,t as d,G as u,U as R,V as P,v as m,a0 as Q,a1 as F,y as o,H as _,z as a,B as S,a2 as B,F as w,x as i,D as O,E as v,K as N,W as G,a3 as U,a4 as q,M as y,a5 as g,L as I,m as z,a6 as H,R as K,A as W,a7 as J,a8 as p,a9 as X,aa as Y,ab as Z,ac as ee,ad as te,S as ae}from"./index.91b66b4a.js";import{_ as le}from"./ChartPoll.ccb68498.js";import se from"./itinerary-index.a0997963.js";const oe={class:"grid lg:grid-cols-2 gap-4"},ie={__name:"poll-event",props:{id:Number},setup(E){const f=j(),b=E,e=h("$api"),s=$({average:{},stats:{}});async function x(){const{list:l,average:t}=await e(`poll/stats/event_id/${b.id}`);console.log(s.stats),s.stats=l,s.average=t}A(()=>{x()});const r=L();return M(()=>r.table.t_poll,l=>{f.value.requestServerInteraction(),f.value.clearSelection()},{deep:!0}),(l,t)=>(d(),u("div",oe,[(d(!0),u(R,null,P(s.stats,(c,n)=>(d(),u("div",{key:n,class:"card mb-2"},[(d(),m(le,{key:`poll-${c.description}`,data:c.answers,name:`poll-${c.description}`,title:c.description,subtitle:""},null,8,["data","name","title"]))]))),128))]))}},re={class:"flex justify-between items-end"},de={class:"flex flex-col"},ne=o("span",{class:"text-lg font-bold text-primary"},"GU\xCDA M\xC9DICA",-1),ce={class:"text-xs text-font"},ue={class:"flex"},fe={class:"flex flex-col gap-1 mt-1"},pe=o("div",{class:"bg-default p-1 rounded-md text-center font-bold text-xs"},"Pendientes",-1),me={class:"w-full max-w-[40px] min-w-[40px] flex justify-center items-center border card shadow-none"},_e={class:"flex flex-nowrap justify-between w-full items-start border card shadow-none px-3 py-1"},ve={class:"w-full flex flex-col"},be={class:"text-xs uppercase pr-4 line-clamp-1"},xe=["innerHTML"],ge={class:"card border my-4 rounded-xl overflow-hidden"},we={key:0},Re={class:"border border-dashed w-full"},Ee={class:"border border-dashed w-full"},ye={class:"border border-dashed w-full"},Ie={class:"border border-dashed w-full"},he={class:"border border-dashed w-full"},Pe={__name:"EventMedicalGuide",props:{id:Number,width:String},setup(E){const f=E,b=h("$api"),e=$({loading:!0,visible:!0,item:{},filename:null,pdfSrc:null,numOfPages:0});A(async()=>{const{item:r,filename:l,pdfUrl:t}=await b.get(`report/medical-guide2/${f.id}`);e.item=r,e.filename=l,e.fileUrl=t;const n=await Q(t).promise;e.numOfPages=n.numPages,e.loading=!1});const s=F(()=>{var l,t,c,n,C,D,k,V,T;const r=[];return e.item._files&&((l=e.item)!=null&&l._files.cardnet.length||r.push({text:"Agregar cardnet de asegurado (Foto)",detail:"Se refiere a el tipo de archivo <b>CARN\xC9</b> de los asegurados",color:"black",btnText:"Subir CARN\xC9",fun(){e.uploadCARNEDrawer=!0}}),(t=e.item)!=null&&t._files.doctor.length||r.push({text:"Agregar imagenes de m\xE9dicos",detail:"Se refiere a la foto de <b>PERFIL</b> de los m\xE9dicos presentes en la coordinaci\xF3n",color:"black"}),(c=e.item)!=null&&c._files.presertification.length||r.push({text:"Agregar PRECERTIFICACI\xD3N (Archivo)",detail:"Tipo de Archivo <b>PRECERTIFICACI\xD3N</b> adjunto en la coordinaci\xF3n presentes en la coordinaci\xF3n",color:"black",btnText:"Subir PRECERTIFICACI\xD3N",fun(){e.uploadPRESERTIFICATIONDrawer=!0}}),(n=e.item)!=null&&n.provider||r.push({text:"Agregar Proveedor",detail:"Se refiere al proveedor principal de la coordinaci\xF3n",color:"black"}),(C=e.item)!=null&&C._files.provider||r.push({text:"Agregar Foto de perfil de proveedor",detail:"Se refiere a la foto de <b>PERFIL</b> del proveedor presente en la coordinaci\xF3n",color:"black",btnText:"Subir FOTO PERFIL PROVEEDOR",fun(){e.uploadPROFILEPROVIDERDrawer=!0}}),(D=e.item)!=null&&D.provider.file||r.push({text:"Agregar Foto de centro de proveedor (TIPO GU\xCDA M\xC9DICA)",detail:"Se refiere a la foto de <b>CENTRO</b> del proveedor presente en la coordinaci\xF3n",color:"black",btnText:"Subir FOTO CENTRO PROVEEDOR",fun(){e.uploadcentroPROVIDERDrawer=!0}}),(k=e.item)!=null&&k.provider.mapa||r.push({text:"Agregar Foto de Ubicaci\xF3n Mapa del proveedor",detail:"Tipo de Archivo <b>MAPA</b> adjunto en la <b>PROVEEDOR</b> presente en la coordinaci\xF3n",color:"black",btnText:"Subir FOTO MAPA PROVEEDOR",fun(){e.uploadMAPAPROVIDERrawer=!0}}),(T=(V=e.item)==null?void 0:V.itineraries)!=null&&T.length||r.push({text:"Agregar itinerarios",detail:"Listado de itinerarios correspondientes a la coordinaci\xF3n",color:"black"})),r}),x=F(()=>({width:f.width}));return(r,l)=>(d(),u(R,null,[o("div",{class:"card no-shadow border overflow-hidden p-4",style:N(x.value)},[o("div",re,[o("div",de,[ne,o("span",ce,"#"+_(e.item.code),1)]),o("div",ue,[a(w,{flat:"",class:"button mr-2",label:"Descargar",icon:"sym_o_download",onClick:l[0]||(l[0]=t=>S(B)(e.fileUrl,e.item.code))}),a(w,{flat:"",class:"button",label:"cerrar",onClick:l[1]||(l[1]=t=>r.$emit("close"))})])]),o("div",fe,[pe,(d(!0),u(R,null,P(s.value,(t,c)=>(d(),u("div",{class:"flex flex-nowrap gap-1",key:t.id},[o("div",me,_(c+1),1),o("div",_e,[o("div",ve,[o("div",be,_(t.text),1),o("div",{class:"text-xxs uppercase pr-4",innerHTML:t.detail},null,8,xe)]),t.fun?(d(),m(w,{key:0,class:"button",flat:"",onClick:t.fun},{default:i(()=>[O(_(t.btnText),1)]),_:2},1032,["onClick"])):v("",!0)]),a(G,{color:t.color,style:N({background:t.color}),class:"flex justify-center font-bold text-xxs w-[16px] h-[16px]"},null,8,["color","style"])]))),128))]),r.isEdit?(d(),m(w,{key:0,flat:"",class:"button-icon h-[40px] bg-secondary text-white",onClick:l[2]||(l[2]=t=>e.cancelDialog=!0),label:"Cancelar coordinaci\xF3n"},{default:i(()=>[a(U,{class:"bg-default text-black text-xs"},{default:i(()=>[O("Cancelar coordinaci\xF3n")]),_:1})]),_:1})):v("",!0),o("div",ge,[e.loading?v("",!0):(d(),u("div",we,[(d(!0),u(R,null,P(e.numOfPages,t=>(d(),u("div",{key:t},[a(S(q),{src:e.fileUrl,page:t},null,8,["src","page"])]))),128))]))])],4),a(I,{class:"q-pa-none left-0","no-refocus":"",modelValue:e.uploadcentroPROVIDERDrawer,"onUpdate:modelValue":l[4]||(l[4]=t=>e.uploadcentroPROVIDERDrawer=t)},{default:i(()=>[a(y,{class:"p-2 flex justify-center items-center"},{default:i(()=>[o("div",Re,[a(g,{class:"py-16 px-24",ref_id:e.item.provider_id,table:"t_provider",icon:"fa-duotone fa-solid fa-camera-retro",avaliable_file_text:!1,text:"Subir FOTO DE CENTRO PROVEEDOR",file_type:"GU\xCDA M\xC9DICA",onClose:l[3]||(l[3]=t=>e.uploadcentroPROVIDERDrawer=!1)},null,8,["ref_id"])])]),_:1})]),_:1},8,["modelValue"]),a(I,{class:"q-pa-none left-0","no-refocus":"",modelValue:e.uploadPROFILEPROVIDERDrawer,"onUpdate:modelValue":l[6]||(l[6]=t=>e.uploadPROFILEPROVIDERDrawer=t)},{default:i(()=>[a(y,{class:"p-2 flex justify-center items-center"},{default:i(()=>[o("div",Ee,[a(g,{class:"py-16 px-24",ref_id:e.item.provider_id,table:"t_provider",icon:"fa-duotone fa-solid fa-camera-retro",avaliable_file_text:!1,text:"Subir FOTO PERFIL PROVEEDOR",file_type:"FOTO PERFIL",onClose:l[5]||(l[5]=t=>e.uploadPROFILEPROVIDERDrawer=!1)},null,8,["ref_id"])])]),_:1})]),_:1},8,["modelValue"]),a(I,{class:"q-pa-none left-0","no-refocus":"",modelValue:e.uploadMAPAPROVIDERrawer,"onUpdate:modelValue":l[8]||(l[8]=t=>e.uploadMAPAPROVIDERrawer=t)},{default:i(()=>[a(y,{class:"p-2 flex justify-center items-center"},{default:i(()=>[o("div",ye,[a(g,{class:"py-16 px-24",ref_id:e.item.provider_id,table:"t_provider",icon:"fa-duotone fa-solid fa-camera-retro",avaliable_file_text:!1,text:"Subir FOTO MAPA PROVEEDOR",file_type:"MAPA",onClose:l[7]||(l[7]=t=>e.uploadMAPAPROVIDERrawer=!1)},null,8,["ref_id"])])]),_:1})]),_:1},8,["modelValue"]),a(I,{class:"q-pa-none left-0","no-refocus":"",modelValue:e.uploadCARNEDrawer,"onUpdate:modelValue":l[10]||(l[10]=t=>e.uploadCARNEDrawer=t)},{default:i(()=>[a(y,{class:"p-2 flex justify-center items-center"},{default:i(()=>[o("div",Ie,[a(g,{class:"py-16 px-24",ref_id:e.item.id,table:"t_event",icon:"fa-duotone fa-solid fa-camera-retro",avaliable_file_text:!1,text:"Subir CARN\xC9",file_type:"CARN\xC9",onClose:l[9]||(l[9]=t=>e.uploadCARNEDrawer=!1)},null,8,["ref_id"])])]),_:1})]),_:1},8,["modelValue"]),a(I,{class:"q-pa-none left-0","no-refocus":"",modelValue:e.uploadPRESERTIFICATIONDrawer,"onUpdate:modelValue":l[12]||(l[12]=t=>e.uploadPRESERTIFICATIONDrawer=t)},{default:i(()=>[a(y,{class:"p-2 flex justify-center items-center"},{default:i(()=>[o("div",he,[a(g,{class:"py-16 px-24",ref_id:e.item.id,table:"t_event",icon:"fa-duotone fa-solid fa-camera-retro",avaliable_file_text:!1,text:"Subir PRECERTIFICACI\xD3N",file_type:"PRECERTIFICACI\xD3N",onClose:l[11]||(l[11]=t=>e.uploadPRESERTIFICATIONDrawer=!1)},null,8,["ref_id"])])]),_:1})]),_:1},8,["modelValue"])],64))}},Ce={class:"flex md:flex-nowrap gap-2 break-all"},Oe={class:"w-full md:max-w-[200px] min-w-[200px]"},$e={key:0,class:"relative"},Ae={class:"card rounded-md flex flex-col py-2 px-3 mb-1 mt-1"},De={class:"font-semibold text-xs"},ke={class:"font-semibold text-xxs"},Ve={class:"grid gap-1 my-1"},Te={class:"flex items-center justify-between w-full"},Fe={class:"flex items-center w-full"},Se={class:"ml-4 md:text-md font-bold pt-1.5"},Ne={class:"w-full overflow-hidden"},Le={class:"card px-3 py-2"},Me={class:"card px-3 py-2"},Ue={class:"card"},je={class:"card px-3 py-2"},Qe={class:"card px-3 py-2"},Be={class:"flex flex-col w-full md:max-w-[250px] min-w-[250px]"},He={__name:"event-view",props:{id:String},setup(E){z();const f=h("$api"),b=h("$me"),e=E,s=$({loading:!0,timeout:null,tabsList:[{label:"Comentarios",value:"history",icon:"list"}],tabs:[{label:"Editar Coordinaci\xF3n",value:"edit",icon:"fa-duotone fa-solid fa-user-pen",visible:1},{label:"Itinerario",value:"itinerary",icon:"fa-duotone fa-solid fa-calendar-days",visible:1},{label:"Conciliaciones",value:"conciliation",icon:"fa-duotone fa-solid fa-file-lines",visible:(b.unixroles&3,1)},{label:"Gu\xEDa M\xE9dica",value:"medical_guide",icon:"fa-duotone fa-solid fa-file-lines",visible:(b.unixroles&3,1)},{label:"Archivos",value:"file",icon:"fa-duotone fa-solid fa-image",visible:1},{label:"Encuesta",value:"poll",icon:"fa-duotone fa-solid fa-poll-people",visible:1},{label:"Historial",value:"log",icon:"fa-duotone fa-solid fa-clock-rotate-left",visible:1}],tab:"edit",item:{},dialogWrite:!1,dialogPassword:!1});async function x(){s.item=await f.get(`event/${e.id}`),s.loading=!1}async function r(){try{const t=await f.delete(`file/${s.item.profile.id}`,{data:{ref_key:"t_event",ref_id:s.item.id}})}catch(t){console.log(t)}}const l=L();return M(()=>l.table.t_event,t=>{t.id===s.item.id&&x()},{deep:!0}),A(()=>{x()}),(t,c)=>(d(),m(ae,{class:"px-1.5 py-2 lg:px-5 lg:py-6"},{default:i(()=>[o("div",Ce,[o("div",Oe,[s.item.profile?(d(),u("div",$e,[a(H,{class:"card w-full max-h-[128px] object-contain",src:s.item.profile.url,"spinner-color":"white"},null,8,["src"]),a(w,{flat:"",class:"absolute top-0 right-0 button-icon bg-primary text-white rounded-md",size:"sm","no-caps":"",onClick:r,icon:"fa-solid fa-xmark"},{default:i(()=>[a(U,{class:"bg-default text-black text-xs"},{default:i(()=>[O("Remover Linea")]),_:1})]),_:1})])):v("",!0),o("div",Ae,[o("div",De,_(s.item.event_state),1),o("div",ke,_(s.item.code),1)]),o("div",Ve,[(d(!0),u(R,null,P(s.tabs,n=>(d(),u(R,{key:n.value},[n.visible?(d(),m(w,{key:0,class:K(["button-tab hover:shadow-left-secondary w-full text-xs",s.tab==n.value&&"shadow-left-secondary bg-primary text-white"]),align:"left",unelevated:"",onClick:C=>s.tab=n.value},{default:i(()=>[o("div",Te,[o("div",Fe,[a(W,{name:n.icon},null,8,["name"]),o("span",Se,_(n.label),1)])])]),_:2},1032,["onClick","class"])):v("",!0)],64))),128))])]),o("div",Ne,[s.loading?v("",!0):(d(),m(J,{key:0,modelValue:s.tab,"onUpdate:modelValue":c[0]||(c[0]=n=>s.tab=n),class:"bg-transparent"},{default:i(()=>[a(p,{name:"edit",class:"p-0"},{default:i(()=>[o("div",Le,[a(X,{isEdit:"",id:s.item.id,width:"100%"},null,8,["id"])])]),_:1}),a(p,{name:"medical_guide",class:"p-0"},{default:i(()=>[o("div",Me,[a(Pe,{isEdit:"",id:s.item.id,width:"100%"},null,8,["id"])])]),_:1}),a(p,{name:"file",class:"p-0"},{default:i(()=>[a(g,{ref_id:s.item.id,table:"t_event",file_type:"GENERAL"},null,8,["ref_id"]),a(Y,{refId:s.item.id,refKey:"t_event"},null,8,["refId"])]),_:1}),a(p,{name:"itinerary",class:"p-0"},{default:i(()=>[a(se,{eventId:s.item.id,width:"100%"},null,8,["eventId"])]),_:1}),a(p,{name:"invoice",class:"p-0"},{default:i(()=>[o("div",Ue,[a(Z,{eventId:s.item.id,width:"100%"},null,8,["eventId"])])]),_:1}),a(p,{name:"poll",class:"p-0"},{default:i(()=>[o("div",je,[a(ie,{id:s.item.id,width:"100%"},null,8,["id"])])]),_:1}),a(p,{name:"log",class:"p-0"},{default:i(()=>[o("div",Qe,[a(ee,{isEdit:"",id:s.item.id,ref_id:s.item.id,width:"100%"},null,8,["id","ref_id"])])]),_:1})]),_:1},8,["modelValue"]))]),o("div",Be,[s.loading?v("",!0):(d(),m(te,{key:0,refKey:"t_event",refId:s.item.id,comment_state:s.item.event_state,comment_state_id:s.item.$event_state_id},null,8,["refId","comment_state","comment_state_id"]))])])]),_:1}))}};export{He as default};
