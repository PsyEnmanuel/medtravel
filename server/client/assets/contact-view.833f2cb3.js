import{b0 as $,m as I,l as p,n as C,k as Q,w as V,$ as E,t as i,v as d,x as s,y as t,G as r,z as a,a7 as S,F as v,a2 as j,D as B,a4 as x,H as n,U as b,V as L,R as N,A as P,E as f,a8 as T,a9 as c,b5 as F,a5 as R,Z as z,ab as A,ad as U,S as D}from"./index.0455d5f1.js";const G={class:"flex md:flex-nowrap gap-2 break-all"},K={class:"w-full md:max-w-[200px] min-w-[200px]"},O={key:0,class:"relative"},H={class:"card rounded-md flex flex-col py-2 px-3 mb-1 mt-1"},M={class:"font-semibold text-xs"},W={class:"flex justify-between gap-2"},Z={class:"flex justify-between gap-2"},q={class:"grid gap-1 my-1"},J={class:"flex items-center justify-between w-full"},X={class:"flex items-center w-full"},Y={class:"ml-4 md:text-md font-bold pt-1.5"},ee={class:"w-full"},te={class:"card px-3 py-2"},ae={class:"card"},se={class:"flex flex-col w-full md:max-w-[250px] min-w-[250px]"},oe=$({__name:"contact-view",props:{id:String},setup(g){I();const m=p("$api"),h=p("$me"),y=g,e=C({loading:!0,timeout:null,tabs:[{label:"Editar Contacto",value:"edit",icon:"fa-duotone fa-solid fa-user-pen",visible:1},{label:"Coordinaciones",value:"event",icon:"fa-duotone fa-solid fa-calendar",visible:(h.unixroles&3,1)},{label:"Archivos",value:"file",icon:"fa-duotone fa-solid fa-image",visible:1}],tab:"edit",tabList:"history",item:{},dialogWrite:!1});async function u(){e.item=await m.get(`contact/${y.id}`),console.log(e.item.files),e.loading=!1}async function w(){try{const o=await m.delete(`file/${e.item.profile.id}`,{data:{ref_key:"t_contact",ref_id:e.item.id}});console.log(o)}catch(o){console.log(o)}}const k=Q();return V(()=>k.table.t_contact,o=>{o.id===e.item.id&&u()},{deep:!0}),E(()=>{u()}),(o,_)=>(i(),d(D,{class:"px-1.5 py-2 lg:px-5 lg:py-6"},{default:s(()=>[t("div",G,[t("div",K,[e.item.profile?(i(),r("div",O,[a(S,{class:"card w-full max-h-[128px] object-contain",src:e.item.profile.url,"spinner-color":"white"},null,8,["src"]),a(v,{flat:"",class:"absolute top-0 right-0 button-icon bg-primary text-white rounded-md",size:"sm","no-caps":"",onClick:w,icon:"fa-solid fa-xmark"},{default:s(()=>[a(j,{class:"bg-default text-black text-xs"},{default:s(()=>[B("Remover Linea")]),_:1})]),_:1})])):(i(),d(x,{key:1,ref_id:e.item.id,table:"t_contact",icon:"fa-duotone fa-solid fa-camera-retro",avaliable_file_text:!1,text:"Subir foto de perfil",file_type:"FOTO PERFIL"},null,8,["ref_id"])),t("div",H,[t("div",M,n(e.item.description),1),t("div",W,[t("div",null,n(e.item.sex),1),t("div",null,n(e.item.age),1)]),t("div",Z,[t("div",null,"#"+n(e.item.code),1),t("div",null,n(e.item.insurance),1)])]),t("div",q,[(i(!0),r(b,null,L(e.tabs,l=>(i(),r(b,{key:l.value},[l.visible?(i(),d(v,{key:0,class:N(["button-tab hover:shadow-left-primary w-full text-xs",e.tab==l.value&&"shadow-left-primary bg-default text-primary"]),align:"left",unelevated:"",onClick:le=>e.tab=l.value},{default:s(()=>[t("div",J,[t("div",X,[a(P,{name:l.icon},null,8,["name"]),t("span",Y,n(l.label),1)])])]),_:2},1032,["onClick","class"])):f("",!0)],64))),128))])]),t("div",ee,[e.loading?f("",!0):(i(),d(T,{key:0,modelValue:e.tab,"onUpdate:modelValue":_[0]||(_[0]=l=>e.tab=l),class:"bg-transparent"},{default:s(()=>[a(c,{name:"edit",class:"p-0"},{default:s(()=>[t("div",te,[a(F,{isEdit:"",id:e.item.id,width:"100%"},null,8,["id"])])]),_:1}),a(c,{name:"file",class:"p-0"},{default:s(()=>[a(x,{ref_id:e.item.id,table:"t_contact",file_type:"GENERAL"},null,8,["ref_id"]),a(R,{refId:e.item.id,refKey:"t_contact"},null,8,["refId"])]),_:1}),a(c,{name:"event",class:"p-0"},{default:s(()=>[a(z,{contactId:e.item.id,width:"100%"},null,8,["contactId"])]),_:1}),a(c,{name:"invoice",class:"p-0"},{default:s(()=>[t("div",ae,[a(A,{contactId:e.item.id,width:"100%"},null,8,["contactId"])])]),_:1})]),_:1},8,["modelValue"]))]),t("div",se,[e.loading?f("",!0):(i(),d(U,{key:0,refKey:"t_contact",refId:e.item.id},null,8,["refId"]))])])]),_:1}))}});export{oe as default};
