import{ax as F,r as N,l as q,n as D,q as T,aZ as E,k as L,w as A,t as i,v as u,x as s,y as d,z as a,Q as M,A as I,F as m,B as y,E as $,G as f,D as _,H as p,b1 as G,I as H,J,az as K,aA as g,C as Z,U as v,V as w,W as Q,K as O,b2 as X,L as x,M as C,b3 as S,a$ as Y,R as ee,S as te}from"./index.6dfca1d0.js";const le={class:"flex justify-between md:flex-nowrap mb-2"},ae={class:"flex flex-nowrap w-full gap-2"},se={key:0,class:"grid grid-flow-col auto-cols-max gap-2"},oe={class:"grid lg:grid-cols-4 mb-2"},ie={class:"full-width row flex-center text-primary q-gutter-sm"},ne={class:"flex flex-col"},de={class:"text-xxs"},re={class:"subtitle text-xs"},ue={key:0},pe={class:"subtitle text-xs mb-1"},me={class:"flex flex-col"},fe={class:"line-clamp-1"},ce={class:"flex gap-2"},ye={__name:"doctor-index",setup(ge){const{t:b}=F(),c=N(),U=q("$cats");q("$api");const V=D({attention_type:U.value.attention_type}),l=D({dialogImport:!1,dialogWrite:!1,dialogList:!1,dialogCreate:!1,selectedId:0,dialogWidth:400,selected:[],search:"",search_key:"orlike:description",pagination:{sortBy:"description",descending:!1,page:1,rowsPerPage:20},url:"doctor",query:{groupBy:["t_doctor.id"],where:{"jo:$attention_type_ids":[],"bi:c_status":5}},columns:[{name:"action",required:!0,label:"",align:"left",field:b("id"),classes:"w-[220px]"},{name:"description",required:!0,label:b("name"),align:"left",field:"description",sortable:!0,classes:"w-[220px]"},{name:"attention_type",required:!0,label:b("attention_type"),align:"left",field:"attention_type",sortable:!0,classes:"w-[100px]",format(n,t){return t.attention_type.join(", ")}},{name:"speciality",required:!0,label:b("specialities"),align:"left",field:"speciality",sortable:!0,classes:"w-[220px]"},{name:"provider",required:!0,label:b("providers"),align:"left",field:"provider",sortable:!0},{name:"note",required:!0,label:b("note"),align:"left",field:"note",sortable:!0},{name:"c_status",required:!0,label:b("c_status"),align:"left",field:"c_status",sortable:!0}],rows:[]}),{onRequest:B,getSelectedString:z,onDeleteRows:R,addMore:W,itemsRange:h}=T(l,c),{filterFnCategory:j}=E(V),P=L();return A(()=>P.table.t_doctor,n=>{c.value.requestServerInteraction(),c.value.clearSelection()},{deep:!0}),(n,t)=>(i(),u(te,{class:ee(n.insuredId?"px-2 py-3":"px-1.5 py-2 lg:px-5 lg:py-6")},{default:s(()=>[d("div",le,[d("div",ae,[a(M,{class:"w-full md:w-auto",dense:"",outlined:"",debounce:"300",modelValue:l.search,"onUpdate:modelValue":t[0]||(t[0]=e=>l.search=e),placeholder:n.$t("search")},{append:s(()=>[a(I,{name:"search"})]),_:1},8,["modelValue","placeholder"]),a(m,{flat:"",class:"button h-full",icon:"add",label:n.$isDesktop&&n.$t("add"),onClick:t[1]||(t[1]=e=>l.dialogCreate=!0)},null,8,["label"]),l.selected.length?(i(),u(m,{key:0,flat:"",class:"button h-full bg-primary text-white","icon-right":"sym_o_remove",label:n.$isDesktop?"Desactivar":"","no-caps":"",onClick:y(R)},null,8,["label","onClick"])):$("",!0)]),n.$isDesktop?(i(),f("div",se,[a(m,{class:"bg-transparent",flat:"","no-caps":""},{default:s(()=>[_(p(y(h).start)+" - "+p(y(h).end)+" de "+p(l.pagination.rowsNumber),1)]),_:1}),a(m,{class:"bg-transparent",icon:"sym_o_first_page",flat:"",onClick:t[2]||(t[2]=e=>c.value.firstPage())}),a(m,{class:"bg-transparent",icon:"sym_o_navigate_before",flat:"",onClick:t[3]||(t[3]=e=>c.value.prevPage())}),a(m,{class:"bg-transparent",icon:"sym_o_navigate_next",flat:"",onClick:t[4]||(t[4]=e=>c.value.nextPage())}),a(m,{class:"bg-transparent",icon:"sym_o_last_page",flat:"",onClick:t[5]||(t[5]=e=>c.value.lastPage())})])):$("",!0)]),d("div",oe,[a(G,{modelValue:l.query.where["jo:$attention_type_ids"],"onUpdate:modelValue":t[6]||(t[6]=e=>l.query.where["jo:$attention_type_ids"]=e),"use-chips":"",dense:"",outlined:"",clearable:"",multiple:"",options:V.attention_type,"option-value":"id",label:n.$t("attention_type"),"option-label":"description","emit-value":"","map-options":"","use-input":"",onFilter:t[7]||(t[7]=(e,o,r)=>y(j)(e,o,r,"attention_type"))},null,8,["modelValue","options","label"])]),a(H,{grid:!n.$isDesktop,"hide-pagination":"",rows:l.rows,columns:l.columns,"row-key":"id",ref_key:"tableRef",ref:c,onRequest:y(B),flat:"",selection:"multiple",pagination:l.pagination,"onUpdate:pagination":t[9]||(t[9]=e=>l.pagination=e),selected:l.selected,"onUpdate:selected":t[10]||(t[10]=e=>l.selected=e),"selected-rows-label":y(z),loading:l.loading,"rows-per-page-label":"Lineas","wrap-cells":!0},J({"no-data":s(({icon:e,message:o,filter:r})=>[d("div",ie,[d("span",null,p(o),1),a(I,{size:"2em",name:r?"filter_b_and_w":e},null,8,["name"])])]),body:s(e=>[a(K,{props:e},{default:s(()=>[a(g,null,{default:s(()=>[a(Z,{modelValue:e.selected,"onUpdate:modelValue":o=>e.selected=o,color:"primary",size:"xs"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),(i(!0),f(v,null,w(e.cols,o=>(i(),f(v,{key:o.name},[o.name==="description"?(i(),u(g,{key:o.name,props:e},{default:s(()=>[d("div",ne,[d("div",null,p(e.row.description),1),d("div",de,p(e.row.postnominal.join(",")),1)])]),_:2},1032,["props"])):o.name==="speciality"?(i(),u(g,{key:o.name,props:e},{default:s(()=>[(i(!0),f(v,null,w(e.row.speciality,r=>(i(),f("div",{class:"flex flex-col",key:r.id},[d("div",re,p(r.description),1),(i(!0),f(v,null,w(r.sub,k=>(i(),f("ul",{class:"flex flex-col list-inside text-xxs mt-1",key:k.id},[k.checked?(i(),f("li",ue,p(k.description),1)):$("",!0)]))),128))]))),128))]),_:2},1032,["props"])):o.name==="provider"?(i(),u(g,{key:o.name,props:e},{default:s(()=>[(i(!0),f(v,null,w(e.row.provider,r=>(i(),f("div",{class:"flex flex-col",key:r.id},[d("div",pe,p(r.description),1)]))),128))]),_:2},1032,["props"])):o.name==="bio"?(i(),u(g,{key:o.name,props:e},{default:s(()=>[d("div",me,[d("div",fe,p(e.row.bio),1)])]),_:2},1032,["props"])):o.name==="action"?(i(),u(g,{key:o.name,props:e},{default:s(()=>[d("div",ce,[a(m,{flat:"",class:"button bg-default text-primary rounded-md",label:"Editar","no-caps":"",onClick:r=>{l.selectedId=e.row.id,l.dialogWrite=!0}},null,8,["onClick"]),a(m,{flat:"",class:"button bg-default text-primary rounded-md",label:"consultar","no-caps":"",onClick:r=>n.$router.push(`${n.$path.doctor}/${n.$path.doctor_consult}/${e.row.id}`)},null,8,["onClick"])])]),_:2},1032,["props"])):o.name==="c_status"?(i(),u(g,{key:o.name,props:e},{default:s(()=>[e.row.c_status&4?(i(),u(Q,{key:0,class:"bg-primary"},{default:s(()=>[_("Activado")]),_:1})):(i(),u(Q,{key:1,class:"bg-secondary"},{default:s(()=>[_("Desactivado")]),_:1}))]),_:2},1032,["props"])):(i(),u(g,{key:o.name,props:e},{default:s(()=>[_(p(o.value),1)]),_:2},1032,["props"]))],64))),128))]),_:2},1032,["props"])]),item:s(e=>[d("div",{class:"q-py-xs col-xs-12 col-sm-6 col-md-4",style:O(e.selected?"transform: scale(0.95);":"")},[a(X,{item:e,onSelectedId:t[8]||(t[8]=o=>{l.selectedId=o,l.dialogWrite=!0})},null,8,["item"])],4)]),_:2},[n.$isDesktop?void 0:{name:"bottom",fn:s(()=>[a(m,{flat:"",class:"button bg-primary-light w-full","no-caps":"",onClick:y(W)},{default:s(()=>[_("Cargar m\xE1s")]),_:1},8,["onClick"])]),key:"0"}]),1032,["grid","rows","columns","onRequest","pagination","selected","selected-rows-label","loading"]),a(x,{class:"q-pa-none",modelValue:l.dialogWrite,"onUpdate:modelValue":t[12]||(t[12]=e=>l.dialogWrite=e),position:n.$isDesktop?"right":"standard","full-height":"","full-width":n.$isDesktop,maximized:"","transition-duration":100},{default:s(()=>[a(C,null,{default:s(()=>[a(S,{onClose:t[11]||(t[11]=e=>l.dialogWrite=!1),isDrawer:"",id:l.selectedId,isEdit:"",width:n.$isDesktop?"1000px":"100%"},null,8,["id","width"])]),_:1})]),_:1},8,["modelValue","position","full-width"]),a(x,{modelValue:l.dialogCreate,"onUpdate:modelValue":t[14]||(t[14]=e=>l.dialogCreate=e),position:n.$isDesktop?"right":"standard","full-height":"",maximized:"","transition-duration":100},{default:s(()=>[a(C,null,{default:s(()=>[a(S,{onClose:t[13]||(t[13]=e=>l.dialogCreate=!1),isDrawer:"",width:n.$isDesktop?"1000px":"100%"},null,8,["width"])]),_:1})]),_:1},8,["modelValue","position"]),a(x,{modelValue:l.dialogImport,"onUpdate:modelValue":t[16]||(t[16]=e=>l.dialogImport=e),"full-height":"","full-width":"","transition-duration":100},{default:s(()=>[a(C,null,{default:s(()=>[a(Y,{table:"t_doctor",onClose:t[15]||(t[15]=e=>l.dialogImport=!1)})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["class"]))}};export{ye as default};
