import{az as f,m as g,l as x,n as _,$ as v,t as r,G as u,z as o,x as l,aK as y,aC as c,D as V,H as I,U as $,V as k,v as C,C as Q,I as T}from"./index.49e59f77.js";const B={__name:"permission-index",setup(U){const{t:p}=f(),d=g(),i=x("$api"),a=_({permission:{},tables:{},columns:[{name:"label",label:"Tabla",field:"label",classes:"w-[100px]",align:"left"}],rows:[],pagination:{sortBy:"",descending:!1,page:1,rowsPerPage:100}});v(async()=>{a.tables=await i.get("/permission/tables"),a.permission=await i.get("permission");for(const s in a.permission.items)if(Object.prototype.hasOwnProperty.call(a.permission.items,s)){const n=a.permission[s];a.columns.push({name:s,label:p(s),field:n,align:"center"})}a.rows=a.tables.tables_unixperms});async function w(s,n,e){e.row[s]?e.row.value=parseInt(e.row.value)+parseInt(n):e.row.value=parseInt(e.row.value)-parseInt(n),i.put("permission/unixperms",[{c_unixperms:e.row.value,table:e.row.label}]),d.notify({type:"success",message:"Permiso de Unixperms actualizado"})}return(s,n)=>(r(),u("div",null,[o(T,{class:"overflow-auto",pagination:a.pagination,"onUpdate:pagination":n[0]||(n[0]=e=>a.pagination=e),flat:"",rows:a.rows,columns:a.columns,"row-key":"name",separator:"vertical"},{body:l(e=>[o(y,{props:e},{default:l(()=>[o(c,{key:"label",props:e},{default:l(()=>[V(I(s.$t(e.row.label)),1)]),_:2},1032,["props"]),(r(!0),u($,null,k(a.permission.items,(b,t)=>(r(),C(c,{key:t,props:e},{default:l(()=>[o(Q,{modelValue:e.row[t],"onUpdate:modelValue":[m=>e.row[t]=m,m=>w(t,b,e)]},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),_:1},8,["pagination","rows","columns"])]))}};export{B as default};
