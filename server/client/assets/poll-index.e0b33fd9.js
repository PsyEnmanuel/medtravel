import{az as V,r as S,n as D,q as P,k as Q,w as R,t as p,v as _,x as n,y as t,z as a,Q as z,A as w,F as i,B as c,E as f,G as g,D as v,H as d,I as B,J as I,aC as h,T as N,K as U,C as T,R as j,S as A}from"./index.09b51acc.js";const E={class:"flex justify-between md:flex-nowrap"},L={class:"flex flex-nowrap w-full gap-2"},W={key:0,class:"grid grid-flow-col auto-cols-max gap-2"},F={class:"full-width row flex-center text-primary q-gutter-sm"},G=["src"],H={class:"flex gap-2"},J={bordered:"",flat:"",class:"card pb-2 relative flex flex-nowrap"},K={class:"absolute right-3 top-2"},M={class:"pl-3 pr-8 w-full pt-2 flex flex-col overflow-hidden"},O={class:"text-uppercase line-clamp-1 font-semibold"},X={class:"text-uppercase line-clamp-1 text-xxs"},Y={class:"flex flex-col ml-auto"},Z={key:0,class:"text-xs flex justify-between gap-2"},ee=t("span",null,"Cobertura: ",-1),te={class:"text-red-600 ml-auto font-bold"},le={key:1,class:"text-xs flex justify-between gap-2"},ae=t("span",null,"Precio: ",-1),se={class:"ml-auto font-bold"},oe={class:"flex justify-end gap-2 -mr-5 mt-1"},re={__name:"poll-index",setup(ne){const{t:m}=V(),r=S(),o=D({dialogWrite:!1,dialogList:!1,dialogCreate:!1,selectedId:0,dialogWidth:400,selected:[],search:"",search_key:"orlike:description",pagination:{sortBy:"description",descending:!1,page:1,rowsPerPage:20},url:"poll",query:{groupBy:["t_poll.id"],where:{c_status:4}},columns:[{name:"action",required:!0,label:"",align:"left",field:m("id"),classes:"w-[100px]"},{name:"description",required:!0,label:m("name"),align:"left",field:"description",sortable:!0},{name:"note",required:!0,label:"Nota",align:"left",field:"note",sortable:!0}],rows:[]}),{onRequest:y,getSelectedString:k,onDeleteRows:x,addMore:$,itemsRange:b}=P(o,r),C=Q();return R(()=>C.table.t_poll,l=>{r.value.requestServerInteraction(),r.value.clearSelection()},{deep:!0}),(l,s)=>(p(),_(A,{class:j(l.$isDesktop?l.insuredId?"px-2 py-3":"px-1.5 py-2 lg:px-5 lg:py-6":"px-1.5 py-2")},{default:n(()=>[t("div",E,[t("div",L,[a(z,{class:"w-full md:w-auto",dense:"",outlined:"",debounce:"300",modelValue:o.search,"onUpdate:modelValue":s[0]||(s[0]=e=>o.search=e),placeholder:l.$t("search")},{append:n(()=>[a(w,{name:"search"})]),_:1},8,["modelValue","placeholder"]),a(i,{flat:"",class:"button h-full",icon:"add",label:l.$isDesktop&&l.$t("add"),onClick:s[1]||(s[1]=e=>o.dialogCreate=!0)},null,8,["label"]),o.selected.length?(p(),_(i,{key:0,flat:"",class:"button h-full bg-primary text-white","icon-right":"sym_o_remove",label:l.$isDesktop?"Remover":"","no-caps":"",onClick:c(x)},null,8,["label","onClick"])):f("",!0)]),l.$isDesktop?(p(),g("div",W,[a(i,{class:"bg-transparent",flat:"","no-caps":""},{default:n(()=>[v(d(c(b).start)+" - "+d(c(b).end)+" de "+d(o.pagination.rowsNumber),1)]),_:1}),a(i,{class:"bg-transparent",icon:"sym_o_first_page",flat:"",onClick:s[2]||(s[2]=e=>r.value.firstPage())}),a(i,{class:"bg-transparent",icon:"sym_o_navigate_before",flat:"",onClick:s[3]||(s[3]=e=>r.value.prevPage())}),a(i,{class:"bg-transparent",icon:"sym_o_navigate_next",flat:"",onClick:s[4]||(s[4]=e=>r.value.nextPage())}),a(i,{class:"bg-transparent",icon:"sym_o_last_page",flat:"",onClick:s[5]||(s[5]=e=>r.value.lastPage())})])):f("",!0)]),a(B,{grid:!l.$isDesktop,"hide-pagination":"",rows:o.rows,columns:o.columns,"row-key":"id",ref_key:"tableRef",ref:r,onRequest:c(y),flat:"",selection:"multiple",pagination:o.pagination,"onUpdate:pagination":s[6]||(s[6]=e=>o.pagination=e),selected:o.selected,"onUpdate:selected":s[7]||(s[7]=e=>o.selected=e),"selected-rows-label":c(k),loading:o.loading,"rows-per-page-label":"Lineas","wrap-cells":!0},I({"no-data":n(({icon:e,message:u,filter:q})=>[t("div",F,[t("span",null,d(u),1),a(w,{size:"2em",name:q?"filter_b_and_w":e},null,8,["name"])])]),"body-cell-avatar":n(e=>[a(h,{props:e},{default:n(()=>[a(N,{rounded:"",size:"42px"},{default:n(()=>[t("img",{src:l.$imageInsuredPlaceholder(e.value)},null,8,G)]),_:2},1024)]),_:2},1032,["props"])]),"body-cell-action":n(e=>[a(h,{props:e},{default:n(()=>[t("div",H,[a(i,{flat:"",class:"button-press bg-primary text-white rounded-md",size:"sm",label:"Consultar","no-caps":"",onClick:u=>l.$router.push(`${l.$path.setting_poll}/${l.$path.setting_poll_consult}/${e.row.id}`)},null,8,["onClick"])])]),_:2},1032,["props"])]),item:n(e=>[t("div",{class:"q-py-xs col-xs-12 col-sm-6 col-md-4",style:U(e.selected?"transform: scale(0.95);":"")},[t("div",J,[t("div",K,[a(T,{dense:"",modelValue:e.selected,"onUpdate:modelValue":u=>e.selected=u,label:e.row.name},null,8,["modelValue","onUpdate:modelValue","label"])]),t("div",M,[t("span",O,d(e.row.description),1),t("span",X,d(e.row.barcode),1),t("div",Y,[e.row.coverage_format?(p(),g("span",Z,[ee,t("span",te,d(e.row.coverage_format),1)])):f("",!0),e.row.price?(p(),g("span",le,[ae,t("span",se,d(e.row.price_format),1)])):f("",!0)]),t("div",oe,[a(i,{flat:"",class:"button-press bg-primary text-white rounded-md",size:"sm",label:"Consultar","no-caps":"",onClick:u=>l.$router.push(`${l.$path.setting}/${l.$path.setting_poll_consult}/${e.row.id}`)},null,8,["onClick"])])])])],4)]),_:2},[l.$isDesktop?void 0:{name:"bottom",fn:n(()=>[a(i,{flat:"",class:"button bg-primary-light w-full","no-caps":"",onClick:c($)},{default:n(()=>[v("Cargar m\xE1s")]),_:1},8,["onClick"])]),key:"0"}]),1032,["grid","rows","columns","onRequest","pagination","selected","selected-rows-label","loading"])]),_:1},8,["class"]))}};export{re as default};
