import{az as I,r as Q,n as S,q as R,k as z,w as B,t as f,v as b,x as s,y as o,z as l,Q as U,A as w,F as n,B as p,E as _,G as P,D as h,H as r,I as W,J as E,aC as m,K as N,C as T,L as k,M as v,b0 as x,R as L,S as j}from"./index.09b51acc.js";const M={class:"flex justify-between md:flex-nowrap mb-2"},A={class:"flex flex-nowrap w-full gap-2"},F={key:0,class:"grid grid-flow-col auto-cols-max gap-2"},G={class:"full-width row flex-center text-primary q-gutter-sm"},H={class:"flex flex-col"},J={class:"flex flex-col"},K=["href"],O={class:"flex flex-col"},X=["href"],Y={class:"flex gap-2"},Z={bordered:"",flat:"",class:"card pb-2 relative flex flex-nowrap"},ee={class:"absolute right-3 top-2"},le={class:"pl-3 pr-8 w-full pt-2 flex flex-col overflow-hidden"},te={class:"text-uppercase line-clamp-1 font-semibold"},ae={class:"text-uppercase line-clamp-1 text-xxs"},se={class:"text-uppercase line-clamp-1 text-xxs"},oe={class:"flex justify-end gap-2 -mr-5 mt-1"},re={__name:"customer-index",setup(ie){const{t:c}=I(),d=Q(),t=S({dialogWrite:!1,dialogList:!1,dialogCreate:!1,selectedId:0,dialogWidth:400,selected:[],search:"",search_key:"orlike:description",pagination:{sortBy:"description",descending:!1,page:1,rowsPerPage:20},url:"customer",query:{groupBy:["t_customer.id"],where:{c_status:4}},columns:[{name:"action",required:!0,label:"",align:"left",field:c("id"),classes:"w-[220px]"},{name:"description",required:!0,label:c("name"),align:"left",field:"description",sortable:!0},{name:"phone",required:!0,label:c("phone"),align:"left",field:"phone",sortable:!0},{name:"email",required:!0,label:c("email"),align:"left",field:"email",sortable:!0}],rows:[]}),{onRequest:y,getSelectedString:C,onDeleteRows:$,addMore:V,itemsRange:g}=R(t,d),D=z();return B(()=>D.table.t_customer,i=>{d.value.requestServerInteraction(),d.value.clearSelection()},{deep:!0}),(i,a)=>(f(),b(j,{class:L(i.$isDesktop?i.CustomerId?"px-2 py-3":"px-1.5 py-2 lg:px-5 lg:py-6":"px-1.5 py-2")},{default:s(()=>[o("div",M,[o("div",A,[l(U,{class:"w-full md:w-auto",dense:"",outlined:"",debounce:"300",modelValue:t.search,"onUpdate:modelValue":a[0]||(a[0]=e=>t.search=e),placeholder:i.$t("search")},{append:s(()=>[l(w,{name:"search"})]),_:1},8,["modelValue","placeholder"]),t.selected.length?(f(),b(n,{key:0,flat:"",class:"button h-full bg-primary text-white","icon-right":"sym_o_remove",label:i.$isDesktop?"Remover":"","no-caps":"",onClick:p($)},null,8,["label","onClick"])):_("",!0)]),i.$isDesktop?(f(),P("div",F,[l(n,{class:"bg-transparent",flat:"","no-caps":""},{default:s(()=>[h(r(p(g).start)+" - "+r(p(g).end)+" de "+r(t.pagination.rowsNumber),1)]),_:1}),l(n,{class:"bg-transparent",icon:"sym_o_first_page",flat:"",onClick:a[1]||(a[1]=e=>d.value.firstPage())}),l(n,{class:"bg-transparent",icon:"sym_o_navigate_before",flat:"",onClick:a[2]||(a[2]=e=>d.value.prevPage())}),l(n,{class:"bg-transparent",icon:"sym_o_navigate_next",flat:"",onClick:a[3]||(a[3]=e=>d.value.nextPage())}),l(n,{class:"bg-transparent",icon:"sym_o_last_page",flat:"",onClick:a[4]||(a[4]=e=>d.value.lastPage())})])):_("",!0)]),l(W,{grid:!i.$isDesktop,"hide-pagination":"",rows:t.rows,columns:t.columns,"row-key":"id",ref_key:"tableRef",ref:d,onRequest:p(y),flat:"",selection:"multiple",pagination:t.pagination,"onUpdate:pagination":a[5]||(a[5]=e=>t.pagination=e),selected:t.selected,"onUpdate:selected":a[6]||(a[6]=e=>t.selected=e),"selected-rows-label":p(C),loading:t.loading,"rows-per-page-label":"Lineas","wrap-cells":!0},E({"no-data":s(({icon:e,message:u,filter:q})=>[o("div",G,[o("span",null,r(u),1),l(w,{size:"2em",name:q?"filter_b_and_w":e},null,8,["name"])])]),"body-cell-description":s(e=>[l(m,{props:e},{default:s(()=>[o("div",H,[o("div",null,r(e.row.description),1)])]),_:2},1032,["props"])]),"body-cell-webpage":s(e=>[l(m,{props:e},{default:s(()=>[o("div",J,[o("a",{class:"text-primary line-clamp-1",href:e.row.webpage,target:"_blank"},r(e.row.webpage),9,K)])]),_:2},1032,["props"])]),"body-cell-link_gps":s(e=>[l(m,{props:e},{default:s(()=>[o("div",O,[o("a",{class:"text-primary line-clamp-1",href:e.row.link_gps,target:"_blank"},r(e.row.link_gps),9,X)])]),_:2},1032,["props"])]),"body-cell-action":s(e=>[l(m,{props:e},{default:s(()=>[o("div",Y,[l(n,{flat:"",class:"button bg-default text-primary rounded-md",label:"Editar","no-caps":"",onClick:u=>{t.selectedId=e.row.id,t.dialogWrite=!0}},null,8,["onClick"]),l(n,{flat:"",class:"button bg-default text-primary rounded-md",label:"consultar","no-caps":"",onClick:u=>i.$router.push(`${i.$path.customer}/${i.$path.customer_consult}/${e.row.id}`)},null,8,["onClick"])])]),_:2},1032,["props"])]),item:s(e=>[o("div",{class:"q-py-xs col-xs-12 col-sm-6 col-md-4",style:N(e.selected?"transform: scale(0.95);":"")},[o("div",Z,[o("div",ee,[l(T,{dense:"",modelValue:e.selected,"onUpdate:modelValue":u=>e.selected=u,label:e.row.name},null,8,["modelValue","onUpdate:modelValue","label"])]),o("div",le,[o("span",te,r(e.row.description),1),o("span",ae,r(e.row.phone),1),o("span",se,r(e.row.email),1),o("div",oe,[l(n,{flat:"",class:"button bg-default text-primary rounded-md",size:"sm",label:"Editar","no-caps":"",onClick:u=>{t.selectedId=e.row.id,t.dialogWrite=!0}},null,8,["onClick"])])])])],4)]),_:2},[i.$isDesktop?void 0:{name:"bottom",fn:s(()=>[l(n,{flat:"",class:"button bg-primary-light w-full","no-caps":"",onClick:p(V)},{default:s(()=>[h("Cargar m\xE1s")]),_:1},8,["onClick"])]),key:"0"}]),1032,["grid","rows","columns","onRequest","pagination","selected","selected-rows-label","loading"]),l(k,{class:"q-pa-none",modelValue:t.dialogWrite,"onUpdate:modelValue":a[8]||(a[8]=e=>t.dialogWrite=e),position:i.$isDesktop?"right":"standard","full-height":"","full-width":i.$isDesktop,maximized:"","transition-duration":100},{default:s(()=>[l(v,null,{default:s(()=>[l(x,{onClose:a[7]||(a[7]=e=>t.dialogWrite=!1),isDrawer:"",id:t.selectedId,isEdit:"",width:i.$isDesktop?"1000px":"100%"},null,8,["id","width"])]),_:1})]),_:1},8,["modelValue","position","full-width"]),l(k,{modelValue:t.dialogCreate,"onUpdate:modelValue":a[10]||(a[10]=e=>t.dialogCreate=e),position:i.$isDesktop?"right":"standard","full-height":"",maximized:"","transition-duration":100},{default:s(()=>[l(v,null,{default:s(()=>[l(x,{onClose:a[9]||(a[9]=e=>t.dialogCreate=!1),isDrawer:"",width:i.$isDesktop?"1000px":"100%"},null,8,["width"])]),_:1})]),_:1},8,["modelValue","position"])]),_:1},8,["class"]))}};export{re as default};
