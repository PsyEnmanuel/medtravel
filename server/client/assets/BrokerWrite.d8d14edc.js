import{l as g,m as O,r as A,n as h,a1 as G,aZ as j,$ as L,t as i,G as p,y as n,H as M,v as y,F as r,E as P,z as o,x as b,Q as m,B as W,aQ as H,aR as f,ap as d,A as S,al as T,b9 as Z,ba as J,K as E,R as X,aV as Y,D as ee}from"./index.6dfca1d0.js";const te={class:"flex justify-between items-start gap-2 py-2"},le={key:0},oe=n("p",{class:"text-2xl text-info"},"Editar CORREDOR",-1),se={class:"font-bold text-brand"},ie=n("p",{class:"text-xs"},"Los campos requeridos tienen un (*)",-1),ne={key:1},ae=n("p",{class:"text-2xl text-info"},[ee("Agregar "),n("b",{class:"font-bold text-brand"},"CORREDOR")],-1),re=n("p",null,"Los campos requeridos tienen un (*)",-1),de=[ae,re],ue=n("div",{class:"subtitle mb-2 bg-primary p-0.5 rounded-none"},null,-1),me={class:"grid lg:grid-cols-2 gap-1"},ce={class:"flex flex-col gap-1"},pe={key:1,class:"mt-10"},be={__name:"BrokerWrite",props:{id:Number,isEdit:Boolean,width:String,isDrawer:Boolean},emits:["close"],setup(c,{emit:B}){const u=g("$api"),R=g("$cats"),w=g("$local"),v=O(),k=A(),a=c,x=B,D=h({broker_type:R.value.broker_type,binary:[{label:"Si",value:1},{label:"No",value:0}]}),V=()=>({}),e=h({item:V(),local:"WriteBroker",categories:[],plan:null,plan_type:null});function _(){e.item=V(),w.remove(e.local),k.value.resetValidation()}async function I(l){try{const t=await u.get(`utility/countries/${l}`);e.item.country_id=t.id,e.item.country=t.description}catch(t){console.log(t)}}function z(){try{e.item.state_id=null,e.item.state=null,e.item.country_id=null,e.item.country=null,e.item.city_id=null,e.item.city=null}catch(l){console.log(l)}}async function K(l){try{const t=await u.get(`utility/cities/${l}`);e.item.city_id=t.id,e.item.city=t.description}catch(t){console.log(t)}}function Q(){try{e.item.city_id=null,e.item.city=null}catch(l){console.log(l)}}async function N(l){try{const t=await u.get(`utility/states/${l}`);e.item.state_id=t.id,e.item.state=t.description}catch(t){console.log(t)}}function U(){try{e.item.state_id=null,e.item.state=null,e.item.city_id=null,e.item.city=null}catch(l){console.log(l)}}async function F(){if(a.isEdit)await u.put(`broker/${a.id}`,{...e.item})&&v.notify({type:"success",message:"Proveedor Editada"});else{const l=await u.post("broker",{...e.item});l&&(console.log(9),x("close",l.id),v.notify({type:"success",message:"Proveedor Agregado"}),_())}}async function q(){a.isEdit?e.item=await u.get(`broker/${a.id}`):w.get(e.local)}const $=G(()=>({width:a.width,padding:a.isDrawer&&"6px 8px"}));return j(D),L(()=>{q()}),(l,t)=>{var C;return i(),p("div",{style:E($.value),class:"pb-32"},[n("div",te,[c.isEdit?(i(),p("div",le,[oe,n("b",se,M(e.item.description),1),ie])):(i(),p("div",ne,de)),c.isDrawer?(i(),y(r,{key:2,flat:"",class:"button",label:"cerrar",onClick:t[0]||(t[0]=s=>x("close"))})):P("",!0)]),ue,o(Y,{class:X((C=c.isDrawer)!=null?C:"pb-64"),ref_key:"writeForm",ref:k,onSubmit:F,onReset:_},{default:b(()=>[n("div",me,[n("div",ce,[o(m,{dense:"",outlined:"",modelValue:e.item.description,"onUpdate:modelValue":t[1]||(t[1]=s=>e.item.description=s),label:l.$t("name")+"*",rules:[W(H)],"hide-bottom-space":"",onKeydown:t[2]||(t[2]=f(d(()=>{},["prevent"]),["enter"]))},null,8,["modelValue","label","rules"]),o(m,{dense:"",outlined:"",modelValue:e.item.phone,"onUpdate:modelValue":t[3]||(t[3]=s=>e.item.phone=s),label:l.$t("phone"),onKeydown:t[4]||(t[4]=f(d(()=>{},["prevent"]),["enter"]))},null,8,["modelValue","label"]),o(m,{dense:"",outlined:"",modelValue:e.item.webpage,"onUpdate:modelValue":t[6]||(t[6]=s=>e.item.webpage=s),label:l.$t("webpage"),onKeydown:t[7]||(t[7]=f(d(()=>{},["prevent"]),["enter"]))},{after:b(()=>[o(r,{flat:"",class:"button rounded-md h-[40px] p-2","no-caps":"",rel:"noopener",onClick:t[5]||(t[5]=d(()=>{},["stop"])),href:e.item.webpage,target:"_blank"},{default:b(()=>[o(S,{name:"fa-solid fa-link",size:"xs"})]),_:1},8,["href"])]),_:1},8,["modelValue","label"]),o(m,{dense:"",outlined:"",modelValue:e.item.link_gps,"onUpdate:modelValue":t[9]||(t[9]=s=>e.item.link_gps=s),label:l.$t("link_gps"),onKeydown:t[10]||(t[10]=f(d(()=>{},["prevent"]),["enter"]))},{after:b(()=>[o(r,{flat:"",class:"button rounded-md h-[40px] p-2","no-caps":"",rel:"noopener",onClick:t[8]||(t[8]=d(()=>{},["stop"])),href:e.item.link_gps,target:"_blank"},{default:b(()=>[o(S,{name:"fa-solid fa-link",size:"xs"})]),_:1},8,["href"])]),_:1},8,["modelValue","label"]),o(T,{onSetCountry:I,onClearCountry:z,"model-value":e.item.country},null,8,["model-value"]),o(Z,{refId:e.item.country_id,onSetState:N,onClearState:U,"model-value":e.item.state},null,8,["refId","model-value"]),o(J,{refId:e.item.state_id,onSetCity:K,onClearCity:Q,"model-value":e.item.city},null,8,["refId","model-value"]),o(m,{dense:"",outlined:"",modelValue:e.item.zipcode,"onUpdate:modelValue":t[11]||(t[11]=s=>e.item.zipcode=s),label:l.$t("zipcode"),onKeydown:t[12]||(t[12]=f(d(()=>{},["prevent"]),["enter"]))},null,8,["modelValue","label"]),o(m,{dense:"",outlined:"",modelValue:e.item.address,"onUpdate:modelValue":t[13]||(t[13]=s=>e.item.address=s),label:l.$t("address"),type:"textarea",rows:3},null,8,["modelValue","label"])])]),c.isDrawer?(i(),p("div",{key:0,class:"fixed bottom-0 lg:right-[10px] right-0 py-2 bg-white mt-10",style:E($.value)},[a.isEdit?(i(),y(r,{key:0,class:"button-press w-full text-lg rounded-md bg-primary text-white",flat:"",label:"Guardar cambios",type:"submit"})):(i(),y(r,{key:1,class:"button-press w-full text-lg rounded-md bg-primary text-white",flat:"",label:"agregar",type:"submit"}))],4)):(i(),p("div",pe,[a.isEdit?(i(),y(r,{key:0,class:"button-press w-full text-lg rounded-md bg-primary text-white",flat:"",label:"Guardar cambios",type:"submit"})):(i(),y(r,{key:1,class:"button-press w-full text-lg rounded-md bg-primary text-white",flat:"",label:"agregar",type:"submit"}))]))]),_:1},8,["class"])],4)}}};export{be as _};
